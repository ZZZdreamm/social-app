/*! For license information please see main.77fcd94a.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=h(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return _(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||_(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=_},309:function(e,t,n){"use strict";e.exports=n(746)},758:function(e){"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,i=/^\d/,a=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,o=/^\s*(['"]?)(.*?)(\1)\s*$/,s=new t(512),u=new t(512),c=new t(512);function l(e){return s.get(e)||s.set(e,f(e).map((function(e){return e.replace(o,"$2")})))}function f(e){return e.match(n)||[""]}function h(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function d(e){return!h(e)&&(function(e){return e.match(i)&&!e.match(r)}(e)||function(e){return a.test(e)}(e))}e.exports={Cache:t,split:f,normalizePath:l,setter:function(e){var t=l(e);return u.get(e)||u.set(e,(function(e,n){for(var r=0,i=t.length,a=e;r<i-1;){var o=t[r];if("__proto__"===o||"constructor"===o||"prototype"===o)return e;a=a[t[r++]]}a[t[r]]=n}))},getter:function(e,t){var n=l(e);return c.get(e)||c.set(e,(function(e){for(var r=0,i=n.length;r<i;){if(null==e&&t)return;e=e[n[r++]]}return e}))},join:function(e){return e.reduce((function(e,t){return e+(h(t)||r.test(t)?"["+t+"]":(e?".":"")+t)}),"")},forEach:function(e,t,n){!function(e,t,n){var r,i,a,o,s=e.length;for(i=0;i<s;i++)(r=e[i])&&(d(r)&&(r='"'+r+'"'),a=!(o=h(r))&&/^\d+$/.test(r),t.call(n,r,o,a,i,e))}(Array.isArray(e)?e:f(e),t,n)}}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){$(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ae(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Se=null;function Ee(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Ce(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ie(){if(xe){var e=xe,t=Se;if(Se=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Ae=!1;function De(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==xe||null!==Se)&&(Ne(),Ie())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Re=!1}function je(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Me=null,Fe=!1,Ue=null,Be={onError:function(e){Le=!0,Me=e}};function Ve(e,t,n,r,i,a,o,s,u){Le=!1,Me=null,je.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ze(i),e;if(o===r)return Ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ft(s):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,xt,St,Et,Ct=!1,It=[],Tt=null,Nt=null,At=null,Dt=new Map,Ot=new Map,Rt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Ct=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==At&&Ft(At)&&(At=null),Dt.forEach(Ut),Ot.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<It.length){Vt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Vt(Tt,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),Dt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Zt=!0;function Wt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Kt(e,t,n,r){if(Zt){var i=Qt(e,t,n,r);if(null===i)Zr(e,t,r,Gt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Dt.set(a,Lt(Dt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ot.set(a,Lt(Ot.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=Qt(e,t,n,r))&&Zr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=gi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=M({},cn,{view:0,detail:0}),hn=an(fn),dn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(M({},dn,{dataTransfer:0})),yn=an(M({},fn,{relatedTarget:0})),mn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(M({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return Sn}var Cn=M({},fn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Cn),Tn=an(M({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=an(Dn),Rn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,jn=null;l&&"documentMode"in document&&(jn=document.documentMode);var Ln=l&&"TextEvent"in window&&!jn,Mn=l&&(!Pn||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Gn(e){Fr(e,0)}function Qn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var $n=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),De(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Sr={};function Er(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=Er("animationend"),Ir=Er("animationiteration"),Tr=Er("animationstart"),Nr=Er("transitionend"),Ar=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),u(t,[e])}for(var Rr=0;Rr<Dr.length;Rr++){var Pr=Dr[Rr];Or(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Or(Cr,"onAnimationEnd"),Or(Ir,"onAnimationIteration"),Or(Tr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Mr(i,s,c),a=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}De((function(){var r=a,i=_e(n),o=[];e:{var s=Ar.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=In;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Cr:case Ir:case Tr:u=mn;break;case Nr:u=An;break;case"scroll":u=hn;break;case"wheel":u=On;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Oe(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Kr(l),h=Kr(h)}l=null}else l=null;null!==u&&Gr(o,s,u,l,!1),null!==c&&null!==f&&Gr(o,f,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Yn;else if(Zn(s))if($n)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Zn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Vn(n))&&(k.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=en(),Jt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Fr(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Oe(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Oe(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Oe(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Oe(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var wi=[],xi=-1;function Si(e){return{current:e}}function Ei(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Ci(e,t){xi++,wi[xi]=e.current,e.current=t}var Ii={},Ti=Si(Ii),Ni=Si(!1),Ai=Ii;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ni),Ei(Ti)}function Pi(e,t,n){if(Ti.current!==Ii)throw Error(a(168));Ci(Ti,t),Ci(Ni,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return M({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ai=Ti.current,Ci(Ti,e),Ci(Ni,Ni.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=ji(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ti),Ci(Ti,e)):Ei(Ni),Ci(Ni,n)}var Fi=null,Ui=!1,Bi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=kt;try{var n=Fi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Je,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Zi=0,Wi=null,Hi=0,Ki=[],Gi=0,Qi=null,Yi=1,$i="";function Xi(e,t){qi[Zi++]=Hi,qi[Zi++]=Wi,Wi=e,Hi=t}function Ji(e,t,n){Ki[Gi++]=Yi,Ki[Gi++]=$i,Ki[Gi++]=Qi,Qi=e;var r=Yi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Yi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function ta(e){for(;e===Wi;)Wi=qi[--Zi],qi[Zi]=null,Hi=qi[--Zi],qi[Zi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,$i=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Oc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Oc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function _a(){ba=ka=ga=null}function wa(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ca=null;function Ia(e){null===Ca?Ca=[e]:Ca.push(e)}function Ta(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function ja(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var f=i.baseState;for(o=0,l=c=u=null,s=a;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=M({},f,h);break e;case 2:Aa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,o|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=f}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),ja(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),ja(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(rc(t,e,r,n),ja(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Oi(t)?Ai:Ti.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Da(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Oi(t)?Ai:Ti.current,i.context=Di(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:f(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return f(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===s.length)return n(i,f),ia&&Xi(i,v),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Xi(i,v),c}for(f=r(i,f);v<s.length;v++)null!==(y=p(f,i,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,s,u,c){var l=j(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var f=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=h(i,g.value,c))&&(s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Ga(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=jc(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case O:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(j(o))return y(r,a,o,u);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var Ya=Qa(!0),$a=Qa(!1),Xa={},Ja=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci(Ja,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Ja),Ci(Ja,t)}function io(){Ei(Ja),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Ja.current),n=ue(t,e.type);t!==n&&(Ci(eo,e),Ci(Ja,n))}function oo(e){eo.current===e&&(Ei(Ja),Ei(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,_o=0;function wo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cs,e=n(r,i)}while(ko)}if(fo.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==bo;return bo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Io(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function To(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,vo.lanes|=f,Mu|=f}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Do(){}function Oo(e,t){var n=vo,r=Io(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Zo(jo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Uo(9,Po.bind(null,n,r,i,t),void 0,null),null===Au)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Mo(e)}function jo(e,t,n){return n((function(){Lo(t)&&Mo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Mo(e){var t=Na(e,1);null!==t&&rc(t,e,1,-1)}function Fo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function Vo(e,t,n,r){var i=Co();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return Vo(8390656,8,e,t)}function Zo(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Ko.bind(null,t,e),n)}function Qo(){}function Yo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function es(){return Io().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ta(e,t,n,r))){rc(n,e,r,tc()),as(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ia(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ta(e,t,i,r))&&(rc(n,e,r,i=tc()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ea,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ea,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Fo,useDebugValue:Qo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Co();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Au)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(jo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Au.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:$o,useReducer:No,useRef:Bo,useState:function(){return No(To)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(Io(),yo.memoizedState,e)},useTransition:function(){return[No(To)[0],Io().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:$o,useReducer:Ao,useRef:Bo,useState:function(){return Ao(To)},useDebugValue:Qo,useDeferredValue:function(e){var t=Io();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[Ao(To)[0],Io().memoizedState]},useMutableSource:Do,useSyncExternalStore:Oo,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wu||(Wu=!0,Hu=r),hs(0,t)},n}function vs(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Ku?Ku=new Set([this]):Ku.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?$a(t,null,n,r):Ya(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=Eo(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Is(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Pu,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Pu,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ci(Pu,Ru),Ru|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ci(Pu,Ru),Ru|=r;return _s(e,t,i,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Is(e,t,n,r,i){var a=Oi(n)?Ai:Ti.current;return a=Di(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=Eo(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function Ts(e,t,n,r,i){if(Oi(n)){var a=!0;Li(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Zs(e,t),qa(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Di(t,c=Oi(n)?Ai:Ti.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Za(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Ma(t,r,o,i),u=t.memoizedState,s!==r||h!==u||Ni.current||Aa?("function"===typeof l&&(Ba(t,n,l,r),u=t.memoizedState),(s=Aa||za(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Oa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ea(u):u=Di(t,u=Oi(n)?Ai:Ti.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&Za(t,o,r,u),Aa=!1,h=t.memoizedState,o.state=h,Ma(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(c=Aa||za(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ns(e,t,n,r,a,i)}function Ns(e,t,n,r,i,a){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Mi(t,n,!1),Ws(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function As(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Ds(e,t,n,r,i){return da(),pa(i),t.flags|=256,_s(e,t,n,r),t.child}var Os,Rs,Ps,js,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Bs(e,t,s,r=fs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Bs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Bs(e,t,s,r=fs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Au)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),rc(r,e,i,-1))}return yc(),Bs(e,t,s,r=fs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Gi++]=Yi,Ki[Gi++]=$i,Ki[Gi++]=Qi,Yi=e.id,$i=e.overflow,Qi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Pc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Pc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bs(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Ks(t),null;case 3:return r=t.stateNode,io(),Ei(Ni),Ei(Ti),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(sc(aa),aa=null))),Rs(e,t),Ks(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ps(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ks(t),null}if(e=no(Ja.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Ur(jr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ks(t),null;case 6:if(e&&null!=t.stateNode)js(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ks(t),null;case 13:if(Ei(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ks(t),o=!1}else null!==aa&&(sc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===ju&&(ju=3):yc())),null!==t.updateQueue&&(t.flags|=4),Ks(t),null);case 4:return io(),Rs(e,t),null===e&&zr(t.stateNode.containerInfo),Ks(t),null;case 10:return wa(t.type._context),Ks(t),null;case 19:if(Ei(so),null===(o=t.memoizedState))return Ks(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Hs(o,!1);else{if(0!==ju||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qu&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Ks(t),null}else 2*$e()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=so.current,Ci(so,r?1&n|2:1&n),t):(Ks(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Ks(t),6&t.subtreeFlags&&(t.flags|=8192)):Ks(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qs(e,t){switch(ta(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ni),Ei(Ti),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ps=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},js=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,$s=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Js=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tu(t,n,a)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function au(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ou(e){var t=e.alternate;null!==t&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tu(n,t,o),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!$s&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,du(e,t,n),$s=r):du(e,t,n);break;default:du(e,t,n)}}function vu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(a(160));pu(o,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),gu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(y){Ec(e,e.return,y)}try{ru(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(yu(t,e),gu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&$(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(yu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(yu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:yu(t,e),gu(e);break;case 13:yu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=$e())),4&r&&vu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($s=(l=$s)||f,yu(t,e),$s=l):yu(t,e),gu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Js=e,f=e.child;null!==f;){for(h=Js=f;null!==Js;){switch(p=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){wu(h);continue}}null!==p?(p.return=d,Js=p):wu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yu(t,e),gu(e),4&r&&vu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cu(e,uu(e),o);break;default:throw Error(a(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ku(e,t,n){Js=e,bu(e,t,n)}function bu(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ys;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Ys;var c=$s;if(Ys=o,($s=u)&&!c)for(Js=i;null!==Js;)u=(o=Js).child,22===o.tag&&null!==o.memoizedState?xu(i):null!==u?(u.return=o,Js=u):xu(i);for(;null!==a;)Js=a,bu(a,t,n),a=a.sibling;Js=i,Ys=s,$s=c}_u(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Js=a):_u(e)}}function _u(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$s||512&t.flags&&au(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function wu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function xu(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var a=t.return;try{au(t)}catch(u){Ec(t,a,u)}break;case 5:var o=t.return;try{au(t)}catch(u){Ec(t,o,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Su,Eu=Math.ceil,Cu=b.ReactCurrentDispatcher,Iu=b.ReactCurrentOwner,Tu=b.ReactCurrentBatchConfig,Nu=0,Au=null,Du=null,Ou=0,Ru=0,Pu=Si(0),ju=0,Lu=null,Mu=0,Fu=0,Uu=0,Bu=null,Vu=null,zu=0,qu=1/0,Zu=null,Wu=!1,Hu=null,Ku=null,Gu=!1,Qu=null,Yu=0,$u=0,Xu=null,Ju=-1,ec=0;function tc(){return 0!==(6&Nu)?$e():-1!==Ju?Ju:Ju=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Nu)&&0!==Ou?Ou&-Ou:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<$u)throw $u=0,Xu=null,Error(a(185));mt(e,n,r),0!==(2&Nu)&&e===Au||(e===Au&&(0===(2&Nu)&&(Fu|=n),4===ju&&uc(e,Ou)),ic(e,r),1===n&&0===Nu&&0===(1&t.mode)&&(qu=$e()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ht(e,e===Au?Ou:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Ui=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi((function(){0===(6&Nu)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Ju=-1,ec=0,0!==(6&Nu))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Au?Ou:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Nu;Nu|=2;var o=vc();for(Au===e&&Ou===t||(Zu=null,qu=$e()+500,dc(e,t));;)try{kc();break}catch(u){pc(e,u)}_a(),Cu.current=o,Nu=i,null!==Du?t=0:(Au=null,Ou=0,t=ju)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Lu,dc(e,0),uc(e,r),ic(e,$e()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Lu,dc(e,0),uc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vu,Zu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=zu+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vu,Zu),t);break}wc(e,Vu,Zu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vu,Zu),r);break}wc(e,Vu,Zu);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vu,Vu=n,null!==t&&sc(t)),e}function sc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function uc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Nu))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Lu,dc(e,0),uc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vu,Zu),ic(e,$e()),null}function lc(e,t){var n=Nu;Nu|=1;try{return e(t)}finally{0===(Nu=n)&&(qu=$e()+500,Ui&&zi())}}function fc(e){null!==Qu&&0===Qu.tag&&0===(6&Nu)&&xc();var t=Nu;Nu|=1;var n=Tu.transition,r=kt;try{if(Tu.transition=null,kt=1,e)return e()}finally{kt=r,Tu.transition=n,0===(6&(Nu=t))&&zi()}}function hc(){Ru=Pu.current,Ei(Pu)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ei(Ni),Ei(Ti),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(so);break;case 10:wa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Au=e,Du=e=Pc(e.current,null),Ou=Ru=t,ju=0,Lu=null,Uu=Fu=Mu=0,Vu=Bu=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ca=null}return e}function pc(e,t){for(;;){var n=Du;try{if(_a(),fo.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Iu.current=null,null===n||null===n.return){ju=1,Lu=t,Du=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Ou,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==ju&&(ju=2),null===Bu?Bu=[o]:Bu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ku||!Ku.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function vc(){var e=Cu.current;return Cu.current=os,null===e?os:e}function yc(){0!==ju&&3!==ju&&2!==ju||(ju=4),null===Au||0===(268435455&Mu)&&0===(268435455&Fu)||uc(Au,Ou)}function mc(e,t){var n=Nu;Nu|=2;var r=vc();for(Au===e&&Ou===t||(Zu=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(_a(),Nu=n,Cu.current=r,null!==Du)throw Error(a(261));return Au=null,Ou=0,ju}function gc(){for(;null!==Du;)bc(Du)}function kc(){for(;null!==Du&&!Qe();)bc(Du)}function bc(e){var t=Su(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?_c(e):Du=t,Iu.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ru)))return void(Du=n)}else{if(null!==(n=Qs(n,t)))return n.flags&=32767,void(Du=n);if(null===e)return ju=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===ju&&(ju=5)}function wc(e,t,n){var r=kt,i=Tu.transition;try{Tu.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Qu);if(0!==(6&Nu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Au&&(Du=Au=null,Ou=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gu||(Gu=!0,Ac(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tu.transition,Tu.transition=null;var s=kt;kt=1;var u=Nu;Nu|=4,Iu.current=null,function(e,t){if(ei=Zt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==o||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Zt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(_){Ec(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=nu,nu=!1}(e,n),mu(n,e),pr(ti),Zt=!!ei,ti=ei=null,e.current=n,ku(n,e,i),Ye(),Nu=u,kt=s,Tu.transition=o}else e.current=n;if(Gu&&(Gu=!1,Qu=e,Yu=i),o=e.pendingLanes,0===o&&(Ku=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wu)throw Wu=!1,e=Hu,Hu=null,e;0!==(1&Yu)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xu?$u++:($u=0,Xu=e):$u=0,zi()}(e,t,n,r)}finally{Tu.transition=i,kt=r}return null}function xc(){if(null!==Qu){var e=bt(Yu),t=Tu.transition,n=kt;try{if(Tu.transition=null,kt=16>e?16:e,null===Qu)var r=!1;else{if(e=Qu,Qu=null,Yu=0,0!==(6&Nu))throw Error(a(331));var i=Nu;for(Nu|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Js=l;null!==Js;){var f=Js;switch(f.tag){case 0:case 11:case 15:ru(8,f,o)}var h=f.child;if(null!==h)h.return=f,Js=h;else for(;null!==Js;){var d=(f=Js).sibling,p=f.return;if(ou(f),f===l){Js=null;break}if(null!==d){d.return=p,Js=d;break}Js=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:ru(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Js=g;break e}Js=o.return}}var k=e.current;for(Js=k;null!==Js;){var b=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Js=b;else e:for(s=k;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(w){Ec(u,u.return,w)}if(u===s){Js=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Js=_;break e}Js=u.return}}if(Nu=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Tu.transition=t}}return!1}function Sc(e,t,n){e=Pa(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ku||!Ku.has(r))){t=Pa(t,e=vs(t,e=ls(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Au===e&&(Ou&n)===n&&(4===ju||3===ju&&(130023424&Ou)===Ou&&500>$e()-zu?dc(e,0):Uu|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Na(e,t))&&(mt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Ac(e,t){return Ke(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oc(e,t,n,r){return new Dc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Oc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case S:s=8,i|=8;break;case E:return(e=Oc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case N:return(e=Oc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Oc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case I:s=9;break e;case T:s=11;break e;case D:s=14;break e;case O:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Oc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Oc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Oc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Oc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Oc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new Bc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Oc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Oi(n))return ji(e,n,t)}return t}function qc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Zc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(rc(e,i,o,a),ja(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Su=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:As(t),da();break;case 5:ao(t);break;case 1:Oi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ci(so,1&so.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ci(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ws(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zs(e,t),e=t.pendingProps;var i=Di(t,Ti.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Ns(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===D)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Is(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Is(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(As(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Oa(e,t),Ma(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ds(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ds(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ws(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Cs(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ni.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ea(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xs(e,t,r,i=ya(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Zs(e,t),t.tag=1,Oi(r)?(e=!0,Li(t)):e=!1,Sa(t,n),qa(t,r,i),Wa(t,r,i,n),Ns(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Es(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}Zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Zc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Zc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Nu)&&(qu=$e()+500,zi()))}break;case 13:fc((function(){var t=Na(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Na(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},St=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));K(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=lc,Ne=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,_i,Ce,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},77:function(e){"use strict";var t=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty,i="undefined"!==typeof Element;function a(e,o){if(e===o)return!0;if(e&&o&&"object"==typeof e&&"object"==typeof o){var s,u,c,l=t(e),f=t(o);if(l&&f){if((u=e.length)!=o.length)return!1;for(s=u;0!==s--;)if(!a(e[s],o[s]))return!1;return!0}if(l!=f)return!1;var h=e instanceof Date,d=o instanceof Date;if(h!=d)return!1;if(h&&d)return e.getTime()==o.getTime();var p=e instanceof RegExp,v=o instanceof RegExp;if(p!=v)return!1;if(p&&v)return e.toString()==o.toString();var y=n(e);if((u=y.length)!==n(o).length)return!1;for(s=u;0!==s--;)if(!r.call(o,y[s]))return!1;if(i&&e instanceof Element&&o instanceof Element)return e===o;for(s=u;0!==s--;)if(("_owner"!==(c=y[s])||!e.$$typeof)&&!a(e[c],o[c]))return!1;return!0}return e!==e&&o!==o}e.exports=function(e,t){try{return a(e,t)}catch(n){if(n.message&&n.message.match(/stack|recursion/i)||-2146828260===n.number)return console.warn("Warning: react-fast-compare does not handle circular references.",n.name,n.message),!1;throw n}}},372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,u=60110,c=60112,l=60113,f=60120,h=60115,d=60116,p=60121,v=60122,y=60117,m=60129,g=60131;if("function"===typeof Symbol&&Symbol.for){var k=Symbol.for;n=k("react.element"),r=k("react.portal"),i=k("react.fragment"),a=k("react.strict_mode"),o=k("react.profiler"),s=k("react.provider"),u=k("react.context"),c=k("react.forward_ref"),l=k("react.suspense"),f=k("react.suspense_list"),h=k("react.memo"),d=k("react.lazy"),p=k("react.block"),v=k("react.server.block"),y=k("react.fundamental"),m=k("react.debug_trace_mode"),g=k("react.legacy_hidden")}function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case h:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===m||e===a||e===l||e===f||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===d||e.$$typeof===h||e.$$typeof===s||e.$$typeof===u||e.$$typeof===c||e.$$typeof===y||e.$$typeof===p||e[0]===v)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+T(u,0):a,_(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+T(s=e[c],c);u+=N(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=N(s=s.value,t,i,l=a+T(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,R(w);else{var t=r(l);null!==t&&P(_,t.startTime-e)}}function w(e,n){v=!1,y&&(y=!1,g(C),C=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&P(_,f.startTime-n),u=!1}return u}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,E=null,C=-1,I=5,T=-1;function N(){return!(t.unstable_now()-T<I)}function A(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?x():(S=!1,E=null)}}else S=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,O=D.port2;D.port1.onmessage=A,x=function(){O.postMessage(null)}}else x=function(){m(A,0)};function R(e){E=e,S||(S=!0,x())}function P(e,n){C=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(C),C=-1):y=!0,P(_,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,R(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<a.length;u++){var c=a[u];if(!s(c))return!1;var l=e[c],f=t[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}},564:function(e){var t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=function(e){return e.match(t)||[]},r=function(e){return e[0].toUpperCase()+e.slice(1)},i=function(e,t){return n(e).join(t).toLowerCase()},a=function(e){return n(e).reduce((function(e,t){return"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase())}),"")};e.exports={words:n,upperFirst:r,camelCase:a,pascalCase:function(e){return r(a(e))},snakeCase:function(e){return i(e,"_")},kebabCase:function(e){return i(e,"-")},sentenceCase:function(e){return r(i(e," "))},titleCase:function(e){return n(e).map(r).join(" ")}}},514:function(e){function t(e,t){var n=e.length,r=new Array(n),i={},a=n,o=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var i=e[n];t.has(i[0])||t.set(i[0],new Set),t.has(i[1])||t.set(i[1],new Set),t.get(i[0]).add(i[1])}return t}(t),s=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach((function(e){if(!s.has(e[0])||!s.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")}));a--;)i[a]||u(e[a],a,new Set);return r;function u(e,t,a){if(a.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(h){c=""}throw new Error("Cyclic dependency"+c)}if(!s.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!i[t]){i[t]=!0;var l=o.get(e)||new Set;if(t=(l=Array.from(l)).length){a.add(e);do{var f=l[--t];u(f,s.get(f),a)}while(t);a.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var i=e[n];t.add(i[0]),t.add(i[1])}return Array.from(t)}(e),e)},e.exports.array=t},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,u,"next",e)}function u(e){r(o,i,a,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},413:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(A){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new I(r||[]);return a(o,"_invoke",{value:x(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=f;var d={};function p(){}function v(){}function y(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(T([])));k&&k!==t&&n.call(k,s)&&(m=k);var b=y.prototype=p.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(a,o,s,u){var c=h(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==(0,r.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,u)}))}u(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:N}}function N(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(w.prototype),l(w.prototype,u,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(f(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(b),l(b,c,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}},439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(878);var i=n(181),a=n(267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},2:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{787:"c45b6682",890:"d9b68c18"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="social-app:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/social-app/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunksocial_app=self.webpackChunksocial_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{Decoder:function(){return rn},Encoder:function(){return tn},PacketType:function(){return Xt},protocol:function(){return en}});var t={};n.r(t),n.d(t,{FirebaseError:function(){return ha},SDK_VERSION:function(){return Ao},_DEFAULT_ENTRY_NAME:function(){return mo},_addComponent:function(){return _o},_addOrOverwriteComponent:function(){return wo},_apps:function(){return ko},_clearComponents:function(){return Co},_components:function(){return bo},_getProvider:function(){return So},_registerComponent:function(){return xo},_removeServiceInstance:function(){return Eo},deleteApp:function(){return Po},getApp:function(){return Oo},getApps:function(){return Ro},initializeApp:function(){return Do},onLog:function(){return Mo},registerVersion:function(){return Lo},setLogLevel:function(){return Fo}});var r=n(791),i=n.t(r,2),a=n(250),o=n(165),s=n(861),u=n(439),c=n(907);function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var f=n(181);function h(e){return function(e){if(Array.isArray(e))return(0,c.Z)(e)}(e)||l(e)||(0,f.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=n(142);function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(0,p.Z)(r.key),r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var _=n(2);function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){var t=b();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===(0,_.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function S(e,t,n){return S=b()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i},S.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,k(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),m(n,e)},E(e)}var C,I=n(878),T=n(267);function N(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,f.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(C||(C={}));var D,O="popstate";function R(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function P(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function j(e,t){return{usr:e.state,key:e.key,idx:t}}function L(e,t,n,r){return void 0===n&&(n=null),A({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?F(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function M(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function F(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function U(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,u=void 0!==s&&s,c=o.history,l=C.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=C.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:y.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:M(e);return R(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(A({},c.state,{idx:h}),""));var y={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(O,p),f=e,function(){o.removeEventListener(O,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=C.Push;var r=L(y.location,e,t);n&&n(r,e);var i=j(r,h=d()+1),a=y.createHref(r);try{c.pushState(i,"",a)}catch(Is){if(Is instanceof DOMException&&"DataCloneError"===Is.name)throw Is;o.location.assign(a)}u&&f&&f({action:l,location:y.location,delta:1})},replace:function(e,t){l=C.Replace;var r=L(y.location,e,t);n&&n(r,e);var i=j(r,h=d()),a=y.createHref(r);c.replaceState(i,"",a),u&&f&&f({action:l,location:y.location,delta:0})},go:function(e){return c.go(e)}};return y}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(D||(D={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function B(e,t,n){void 0===n&&(n="/");var r=ee(("string"===typeof t?F(t):t).pathname||"/",n);if(null==r)return null;var i=V(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=$(i[o],J(r));return a}function V(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(R(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=ie([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(R(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),V(e.children,t,u,s)),(null!=e.path||e.index)&&t.push({path:s,score:Y(s,e.index),routesMeta:u})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=N(z(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function z(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,I.Z)(n)||l(n)||(0,f.Z)(n)||(0,T.Z)()),i=r[0],a=r.slice(1),o=i.endsWith("?"),s=i.replace(/\?$/,"");if(0===a.length)return o?[s,""]:[s];var u=z(a.join("/")),c=[];return c.push.apply(c,h(u.map((function(e){return""===e?s:[s,e].join("/")})))),o&&c.push.apply(c,h(u)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var q=/^:\w+$/,Z=3,W=2,H=1,K=10,G=-2,Q=function(e){return"*"===e};function Y(e,t){var n=e.split("/"),r=n.length;return n.some(Q)&&(r+=G),t&&(r+=W),n.filter((function(e){return!Q(e)})).reduce((function(e,t){return e+(q.test(t)?Z:""===t?H:K)}),r)}function $(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=X({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:ie([i,l.pathname]),pathnameBase:ae(ie([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ie([i,l.pathnameBase]))}return a}function X(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);P("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,u.Z)(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],c=s.replace(/(.)\/+$/,"$1"),l=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Is){return P(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Is+")."),e}}(l[n]||"",t),e}),{});return{params:f,pathname:s,pathnameBase:c,pattern:e}}function J(e){try{return decodeURI(e)}catch(Is){return P(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Is+")."),e}}function ee(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function te(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function ne(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function re(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=F(e):(R(!(i=A({},e)).pathname||!i.pathname.includes("?"),te("?","pathname","search",i)),R(!i.pathname||!i.pathname.includes("#"),te("#","pathname","hash",i)),R(!i.search||!i.search.includes("#"),te("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var u=t.length-1;if(s.startsWith("..")){for(var c=s.split("/");".."===c[0];)c.shift(),u-=1;i.pathname=c.join("/")}a=u>=0?t[u]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?F(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:oe(a),hash:se(s)}}(i,a),f=s&&"/"!==s&&s.endsWith("/"),h=(o||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ie=function(e){return e.join("/").replace(/\/\/+/g,"/")},ae=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},oe=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},se=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ue=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(E(Error));function ce(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var le=["post","put","patch","delete"],fe=(new Set(le),["get"].concat(le));new Set(fe),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}var de=r.createContext(null);var pe=r.createContext(null);var ve=r.createContext(null);var ye=r.createContext(null);var me=r.createContext(null);var ge=r.createContext({outlet:null,matches:[],isDataRoute:!1});var ke=r.createContext(null);function be(){return null!=r.useContext(me)}function _e(){return be()||R(!1),r.useContext(me).location}function we(e){r.useContext(ye).static||r.useLayoutEffect(e)}function xe(){return r.useContext(ge).isDataRoute?function(){var e=Pe(Te.UseNavigateStable).router,t=Le(Ne.UseNavigateStable),n=r.useRef(!1);we((function(){n.current=!0}));var i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,he({fromRouteId:t},i)))}),[e,t]);return i}():function(){be()||R(!1);var e=r.useContext(de),t=r.useContext(ye),n=t.basename,i=t.navigator,a=r.useContext(ge).matches,o=_e().pathname,s=JSON.stringify(ne(a).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);we((function(){u.current=!0}));var c=r.useCallback((function(t,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof t){var a=re(t,JSON.parse(s),o,"path"===r.relative);null==e&&"/"!==n&&(a.pathname="/"===a.pathname?n:ie([n,a.pathname])),(r.replace?i.replace:i.push)(a,r.state,r)}else i.go(t)}),[n,i,s,o,e]);return c}()}var Se=r.createContext(null);function Ee(){var e=r.useContext(ge).matches,t=e[e.length-1];return t?t.params:{}}function Ce(e,t,n){be()||R(!1);var i,a=r.useContext(ye).navigator,o=r.useContext(ge).matches,s=o[o.length-1],u=s?s.params:{},c=(s&&s.pathname,s?s.pathnameBase:"/"),l=(s&&s.route,_e());if(t){var f,h="string"===typeof t?F(t):t;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||R(!1),i=h}else i=l;var d=i.pathname||"/",p=B(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=Re(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:ie([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ie([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,n);return t&&v?r.createElement(me.Provider,{value:{location:he({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:C.Pop}},v):v}function Ie(){var e=function(){var e,t=r.useContext(ke),n=je(Ne.UseRouteError),i=Le(Ne.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ce(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}var Te,Ne,Ae=r.createElement(Ie,null),De=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(ge.Provider,{value:this.props.routeContext},r.createElement(ke.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),n}(r.Component);function Oe(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(de);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ge.Provider,{value:t},i)}function Re(e,t,n){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}var o=e,s=null==(i=n)?void 0:i.errors;if(null!=s){var u=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));u>=0||R(!1),o=o.slice(0,Math.min(o.length,u+1))}return o.reduceRight((function(e,i,a){var u=i.route.id?null==s?void 0:s[i.route.id]:null,c=null;n&&(c=i.route.errorElement||Ae);var l=t.concat(o.slice(0,a+1)),f=function(){var t;return t=u?c:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(Oe,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?r.createElement(De,{location:n.location,revalidation:n.revalidation,component:c,error:u,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Pe(e){var t=r.useContext(de);return t||R(!1),t}function je(e){var t=r.useContext(pe);return t||R(!1),t}function Le(e){var t=function(e){var t=r.useContext(ge);return t||R(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||R(!1),n.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(Te||(Te={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ne||(Ne={}));var Me;function Fe(e){var t=e.to,n=e.replace,i=e.state,a=e.relative;be()||R(!1);var o=r.useContext(ge).matches,s=_e().pathname,u=xe(),c=re(t,ne(o).map((function(e){return e.pathnameBase})),s,"path"===a),l=JSON.stringify(c);return r.useEffect((function(){return u(JSON.parse(l),{replace:n,state:i,relative:a})}),[u,l,a,n,i]),null}function Ue(e){return function(e){var t=r.useContext(ge).outlet;return t?r.createElement(Se.Provider,{value:e},t):t}(e.context)}function Be(e){R(!1)}function Ve(e){var t=e.basename,n=void 0===t?"/":t,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?C.Pop:s,c=e.navigator,l=e.static,f=void 0!==l&&l;be()&&R(!1);var h=n.replace(/^\/*/,"/"),d=r.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=F(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,_=p.state,w=void 0===_?null:_,x=p.key,S=void 0===x?"default":x,E=r.useMemo((function(){var e=ee(y,h);return null==e?null:{location:{pathname:e,search:g,hash:b,state:w,key:S},navigationType:u}}),[h,y,g,b,w,S,u]);return null==E?null:r.createElement(ye.Provider,{value:d},r.createElement(me.Provider,{children:a,value:E}))}function ze(e){var t=e.children,n=e.location;return function(e,t){return Ce(e,t)}(Ze(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Me||(Me={}));var qe=new Promise((function(){}));r.Component;function Ze(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e)){var a=[].concat(h(t),[i]);if(e.type!==r.Fragment){e.type!==Be&&R(!1),e.props.index&&e.props.children&&R(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ze(e.props.children,a)),n.push(o)}else n.push.apply(n,Ze(e.props.children,a))}})),n}function We(){return We="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},We.apply(this,arguments)}var He=Object.create(null);He.open="0",He.close="1",He.ping="2",He.pong="3",He.message="4",He.upgrade="5",He.noop="6";var Ke=Object.create(null);Object.keys(He).forEach((function(e){Ke[He[e]]=e}));for(var Ge={type:"error",data:"parser error"},Qe="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Ye="function"===typeof ArrayBuffer,$e=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},Xe=function(e,t,n){var r,i=e.type,a=e.data;return Qe&&a instanceof Blob?t?n(a):$e(a,n):Ye&&(a instanceof ArrayBuffer||(r=a,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(a):$e(new Blob([a]),n):n(He[i]+(a||""))},Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et="undefined"===typeof Uint8Array?[]:new Uint8Array(256),tt=0;tt<64;tt++)et[Je.charCodeAt(tt)]=tt;var nt="function"===typeof ArrayBuffer,rt=function(e,t){if(nt){var n=function(e){var t,n,r,i,a,o=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),l=new Uint8Array(c);for(t=0;t<s;t+=4)n=et[e.charCodeAt(t)],r=et[e.charCodeAt(t+1)],i=et[e.charCodeAt(t+2)],a=et[e.charCodeAt(t+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&a;return c}(e);return it(n,t)}return{base64:!0,data:e}},it=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},at=function(e,t){if("string"!==typeof e)return{type:"message",data:it(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:rt(e.substring(1),t)}:Ke[n]?e.length>1?{type:Ke[n],data:e.substring(1)}:{type:Ke[n]}:Ge},ot=String.fromCharCode(30);function st(e){if(e)return function(e){for(var t in st.prototype)e[t]=st.prototype[t];return e}(e)}st.prototype.on=st.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},st.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},st.prototype.off=st.prototype.removeListener=st.prototype.removeAllListeners=st.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},st.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},st.prototype.emitReserved=st.prototype.emit,st.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},st.prototype.hasListeners=function(e){return!!this.listeners(e).length};var ut="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function ct(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var lt=ut.setTimeout,ft=ut.clearTimeout;function ht(e,t){t.useNativeTimers?(e.setTimeoutFn=lt.bind(ut),e.clearTimeoutFn=ft.bind(ut)):(e.setTimeoutFn=ut.setTimeout.bind(ut),e.clearTimeoutFn=ut.clearTimeout.bind(ut))}var dt,pt=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e)).description=r,a.context=i,a.type="TransportError",a}return y(n)}(E(Error)),vt=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).writable=!1,ht(w(r),e),r.opts=e,r.query=e.query,r.socket=e.socket,r}return y(n,[{key:"onError",value:function(e,t,r){return We(k(n.prototype),"emitReserved",this).call(this,"error",new pt(e,t,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,We(k(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=at(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){We(k(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",We(k(n.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}}]),n}(st),yt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),mt=64,gt={},kt=0,bt=0;function _t(e){var t="";do{t=yt[e%mt]+t,e=Math.floor(e/mt)}while(e>0);return t}function wt(){var e=_t(+new Date);return e!==dt?(kt=0,dt=e):e+"."+_t(kt++)}for(;bt<mt;bt++)gt[yt[bt]]=bt;function xt(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}var St=!1;try{St="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(UB){}var Et=St;function Ct(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Et))return new XMLHttpRequest}catch(n){}if(!t)try{return new(ut[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function It(){}var Tt=null!=new Ct({xdomain:!1}).responseType,Nt=function(e){g(n,e);var t=x(n);function n(e){var r;if(d(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var i="https:"===location.protocol,a=location.port;a||(a=i?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||a!==e.port,r.xs=e.secure!==i}var o=e&&e.forceBase64;return r.supportsBinary=Tt&&!o,r}return y(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(ot),r=[],i=0;i<n.length;i++){var a=at(n[i],t);if(r.push(a),"error"===a.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,a){Xe(e,!1,(function(e){r[a]=e,++i===n&&t(r.join(ot))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=wt()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=xt(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new At(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(vt),At=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),ht(w(i=t.call(this)),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return y(n,[{key:"create",value:function(){var e=this,t=ct(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new Ct(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(a){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{r.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(a){return void this.setTimeoutFn((function(){e.onError(a)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=It,e)try{this.xhr.abort()}catch(t){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(st);if(At.requestsCount=0,At.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Dt);else if("function"===typeof addEventListener){addEventListener("onpagehide"in ut?"pagehide":"unload",Dt,!1)}function Dt(){for(var e in At.requests)At.requests.hasOwnProperty(e)&&At.requests[e].abort()}var Ot="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},Rt=ut.WebSocket||ut.MozWebSocket,Pt="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),jt=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return y(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=Pt?{}:ct(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Pt?new Rt(e,t,n):t?new Rt(e,t):new Rt(e)}catch(UB){return this.emitReserved("error",UB)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;Xe(n,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(n){}i&&Ot((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=wt()),this.supportsBinary||(e.b64=1);var r=xt(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!Rt}}]),n}(vt),Lt={websocket:jt,polling:Nt},Mt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ft=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ut(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=Mt.exec(e||""),a={},o=14;o--;)a[Ft[o]]=i[o]||"";return-1!=n&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,a.query),a}var Bt=function(e){g(n,e);var t=x(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,n),(r=t.call(this)).writeBuffer=[],e&&"object"===typeof e&&(i=e,e=null),e?(e=Ut(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=Ut(i.host).host),ht(w(r),i),r.secure=null!=i.secure?i.secure:"undefined"!==typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"===typeof r.opts.query&&(r.opts.query=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return y(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Lt[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var a=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(f(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var a=new Error("probe error");a.transport=r.name,t.emitReserved("upgradeError",a)}})))};function o(){i||(i=!0,f(),r.close(),r=null)}var s=function(e){var n=new Error("probe error: "+e);n.transport=r.name,o(),t.emitReserved("upgradeError",n)};function u(){s("transport closed")}function c(){s("socket closed")}function l(e){r&&e.name!==r.name&&o()}var f=function(){r.removeListener("open",a),r.removeListener("error",s),r.removeListener("close",u),t.off("close",c),t.off("upgrading",l)};r.once("open",a),r.once("error",s),r.once("close",u),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(st);Bt.protocol=4;Bt.protocol;var Vt="function"===typeof ArrayBuffer,zt=function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},qt=Object.prototype.toString,Zt="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===qt.call(Blob),Wt="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===qt.call(File);function Ht(e){return Vt&&(e instanceof ArrayBuffer||zt(e))||Zt&&e instanceof Blob||Wt&&e instanceof File}function Kt(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Kt(e[n]))return!0;return!1}if(Ht(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Kt(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Kt(e[i]))return!0;return!1}function Gt(e){var t=[],n=e.data,r=e;return r.data=Qt(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Qt(e,t){if(!e)return e;if(Ht(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=Qt(e[i],t);return r}if("object"===typeof e&&!(e instanceof Date)){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(a[o]=Qt(e[o],t));return a}return e}function Yt(e,t){return e.data=$t(e.data,t),delete e.attachments,e}function $t(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=$t(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=$t(e[r],t));return e}var Xt,Jt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],en=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Xt||(Xt={}));var tn=function(){function e(t){d(this,e),this.replacer=t}return y(e,[{key:"encode",value:function(e){return e.type!==Xt.EVENT&&e.type!==Xt.ACK||!Kt(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Xt.EVENT?Xt.BINARY_EVENT:Xt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Xt.BINARY_EVENT&&e.type!==Xt.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=Gt(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}();function nn(e){return"[object Object]"===Object.prototype.toString.call(e)}var rn=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).reviver=e,r}return y(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===Xt.BINARY_EVENT;r||t.type===Xt.BINARY_ACK?(t.type=r?Xt.EVENT:Xt.ACK,this.reconstructor=new an(t),0===t.attachments&&We(k(n.prototype),"emitReserved",this).call(this,"decoded",t)):We(k(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!Ht(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,We(k(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Xt[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Xt.BINARY_EVENT||r.type===Xt.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var a=e.substring(i,t);if(a!=Number(a)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(a)}if("/"===e.charAt(t+1)){for(var o=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(o,t)}else r.nsp="/";var s=e.charAt(t+1);if(""!==s&&Number(s)==s){for(var u=t+1;++t;){var c=e.charAt(t);if(null==c||Number(c)!=c){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var l=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Xt.CONNECT:return nn(t);case Xt.DISCONNECT:return void 0===t;case Xt.CONNECT_ERROR:return"string"===typeof t||nn(t);case Xt.EVENT:case Xt.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Jt.indexOf(t[0]));case Xt.ACK:case Xt.BINARY_ACK:return Array.isArray(t)}}}]),n}(st),an=function(){function e(t){d(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return y(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Yt(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function on(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var sn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),un=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).connected=!1,a.recovered=!1,a.receiveBuffer=[],a.sendBuffer=[],a._queue=[],a._queueSeq=0,a.ids=0,a.acks={},a.flags={},a.io=e,a.nsp=r,i&&i.auth&&(a.auth=i.auth),a._opts=Object.assign({},i),a.io._autoConnect&&a.open(),a}return y(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[on(e,"open",this.onopen.bind(this)),on(e,"packet",this.onpacket.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(sn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;var i={type:Xt.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var a=this.ids++,o=n.pop();this._registerAckCallback(a,o),i.id=a}var s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var a=this.io.setTimeoutFn((function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))}),i);this.acks[e]=function(){r.io.clearTimeoutFn(a);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,[null].concat(n))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(n,i){r.push((function(e,t){return a?e?i(e):n(t):n(e)})),t.emit.apply(t,[e].concat(r))}))}},{key:"_addToQueue",value:function(e){var t,n=this;"function"===typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r===n._queue[0]){if(null!==e)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else if(n._queue.shift(),t){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];t.apply(void 0,[null].concat(a))}return r.pending=!1,n._drainQueue()}})),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:Xt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Xt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Xt.EVENT:case Xt.BINARY_EVENT:this.onevent(e);break;case Xt.ACK:case Xt.BINARY_ACK:this.onack(e);break;case Xt.DISCONNECT:this.ondisconnect();break;case Xt.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=N(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e)}}catch(UB){r.e(UB)}finally{r.f()}}We(k(n.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t.packet({type:Xt.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Xt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=N(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(UB){n.e(UB)}finally{n.f()}}}}]),n}(st);function cn(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}cn.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},cn.prototype.reset=function(){this.attempts=0},cn.prototype.setMin=function(e){this.ms=e},cn.prototype.setMax=function(e){this.max=e},cn.prototype.setJitter=function(e){this.jitter=e};var ln=function(t){g(r,t);var n=x(r);function r(t,i){var a,o;d(this,r),(a=n.call(this)).nsps={},a.subs=[],t&&"object"===typeof t&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",a.opts=i,ht(w(a),i),a.reconnection(!1!==i.reconnection),a.reconnectionAttempts(i.reconnectionAttempts||1/0),a.reconnectionDelay(i.reconnectionDelay||1e3),a.reconnectionDelayMax(i.reconnectionDelayMax||5e3),a.randomizationFactor(null!==(o=i.randomizationFactor)&&void 0!==o?o:.5),a.backoff=new cn({min:a.reconnectionDelay(),max:a.reconnectionDelayMax(),jitter:a.randomizationFactor()}),a.timeout(null==i.timeout?2e4:i.timeout),a._readyState="closed",a.uri=t;var s=i.parser||e;return a.encoder=new s.Encoder,a.decoder=new s.Decoder,a._autoConnect=!1!==i.autoConnect,a._autoConnect&&a.open(),a}return y(r,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Bt(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=on(n,"open",(function(){r.onopen(),e&&e()})),a=on(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var o=this._timeout;0===o&&i();var s=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),o);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(i),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(on(e,"ping",this.onping.bind(this)),on(e,"data",this.ondata.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(e){var t=this;Ot((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new un(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),r}(st),fn={};function hn(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=Ut(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,a=r.id,o=r.path,s=fn[a]&&o in fn[a].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new ln(i,t):(fn[a]||(fn[a]=new ln(i,t)),n=fn[a]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(hn,{Manager:ln,Socket:un,io:hn,connect:hn});var dn=n(441),pn=n(613),vn=n.n(pn);var yn=function(e){function t(e,r,u,c,h){for(var d,p,v,y,b,w=0,x=0,S=0,E=0,C=0,O=0,P=v=d=0,L=0,M=0,F=0,U=0,B=u.length,V=B-1,z="",q="",Z="",W="";L<B;){if(p=u.charCodeAt(L),L===V&&0!==x+E+S+w&&(0!==x&&(p=47===x?10:47),E=S=w=0,B++,V++),0===x+E+S+w){if(L===V&&(0<M&&(z=z.replace(f,"")),0<z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:z+=u.charAt(L)}p=59}switch(p){case 123:for(d=(z=z.trim()).charCodeAt(0),v=1,U=++L;L<B;){switch(p=u.charCodeAt(L)){case 123:v++;break;case 125:v--;break;case 47:switch(p=u.charCodeAt(L+1)){case 42:case 47:e:{for(P=L+1;P<V;++P)switch(u.charCodeAt(P)){case 47:if(42===p&&42===u.charCodeAt(P-1)&&L+2!==P){L=P+1;break e}break;case 10:if(47===p){L=P+1;break e}}L=P}}break;case 91:p++;case 40:p++;case 34:case 39:for(;L++<V&&u.charCodeAt(L)!==p;);}if(0===v)break;L++}if(v=u.substring(U,L),0===d&&(d=(z=z.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<M&&(z=z.replace(f,"")),p=z.charCodeAt(1)){case 100:case 109:case 115:case 45:M=r;break;default:M=D}if(U=(v=t(r,M,v,p,h+1)).length,0<R&&(b=s(3,v,M=n(D,z,F),r,T,I,U,p,h,c),z=M.join(""),void 0!==b&&0===(U=(v=b.trim()).length)&&(p=0,v="")),0<U)switch(p){case 115:z=z.replace(_,o);case 100:case 109:case 45:v=z+"{"+v+"}";break;case 107:v=(z=z.replace(m,"$1 $2"))+"{"+v+"}",v=1===A||2===A&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=z+v,112===c&&(q+=v,v="")}else v=""}else v=t(r,n(r,z,F),v,c,h+1);Z+=v,v=F=M=P=d=0,z="",p=u.charCodeAt(++L);break;case 125:case 59:if(1<(U=(z=(0<M?z.replace(f,""):z).trim()).length))switch(0===P&&(d=z.charCodeAt(0),45===d||96<d&&123>d)&&(U=(z=z.replace(" ",":")).length),0<R&&void 0!==(b=s(1,z,r,e,T,I,q.length,c,h,c))&&0===(U=(z=b.trim()).length)&&(z="\0\0"),d=z.charCodeAt(0),p=z.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){W+=z+u.charAt(L);break}default:58!==z.charCodeAt(U-1)&&(q+=i(z,d,p,z.charCodeAt(2)))}F=M=P=d=0,z="",p=u.charCodeAt(++L)}}switch(p){case 13:case 10:47===x?x=0:0===1+d&&107!==c&&0<z.length&&(M=1,z+="\0"),0<R*j&&s(0,z,r,e,T,I,q.length,c,h,c),I=1,T++;break;case 59:case 125:if(0===x+E+S+w){I++;break}default:switch(I++,y=u.charAt(L),p){case 9:case 32:if(0===E+w+x)switch(C){case 44:case 58:case 9:case 32:y="";break;default:32!==p&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===E+x+w&&(M=F=1,y="\f"+y);break;case 108:if(0===E+x+w+N&&0<P)switch(L-P){case 2:112===C&&58===u.charCodeAt(L-3)&&(N=C);case 8:111===O&&(N=O)}break;case 58:0===E+x+w&&(P=L);break;case 44:0===x+S+E+w&&(M=1,y+="\r");break;case 34:case 39:0===x&&(E=E===p?0:0===E?p:E);break;case 91:0===E+x+S&&w++;break;case 93:0===E+x+S&&w--;break;case 41:0===E+x+w&&S--;break;case 40:if(0===E+x+w){if(0===d)if(2*C+3*O===533);else d=1;S++}break;case 64:0===x+S+E+w+P+v&&(v=1);break;case 42:case 47:if(!(0<E+w+S))switch(x){case 0:switch(2*p+3*u.charCodeAt(L+1)){case 235:x=47;break;case 220:U=L,x=42}break;case 42:47===p&&42===C&&U+2!==L&&(33===u.charCodeAt(U+2)&&(q+=u.substring(U,L+1)),y="",x=0)}}0===x&&(z+=y)}O=C,C=p,L++}if(0<(U=q.length)){if(M=r,0<R&&(void 0!==(b=s(2,q,M,e,T,I,U,c,h,c))&&0===(q=b).length))return W+q+Z;if(q=M.join(",")+"{"+q+"}",0!==A*N){switch(2!==A||a(q,2)||(N=0),N){case 111:q=q.replace(k,":-moz-$1")+q;break;case 112:q=q.replace(g,"::-webkit-input-$1")+q.replace(g,"::-moz-$1")+q.replace(g,":-ms-input-$1")+q}N=0}}return W+q+Z}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=r(e,t[s],n).trim();break;default:var u=s=0;for(t=[];s<a;++s)for(var c=0;c<o;++c)t[u++]=r(e[c]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(y,"$1"+e.trim());case 58:return e.trim()+t.replace(y,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(y,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var u=o.substring(e,o.length-1).trim();return u=o.substring(0,e).trim()+u+";",1===A||2===A&&a(u,1)?"-webkit-"+u+u:u}if(0===A||2===A&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(C,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(u=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+u+o;case 1005:return d.test(o)?o.replace(h,":-webkit-")+o.replace(h,":-moz-")+o:o;case 1e3:switch(t=(u=o.substring(13).trim()).indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(t)){case 226:u=o.replace(b,"tb");break;case 232:u=o.replace(b,"tb-rl");break;case 220:u=o.replace(b,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+u+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(u=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(111>u.charCodeAt(8))break;case 115:o=o.replace(u,"-webkit-"+u)+";"+o;break;case 207:case 102:o=o.replace(u,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(u,"-webkit-"+u)+";"+o.replace(u,"-ms-"+u+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return u=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+u+"-ms-flex-"+u+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(x,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(x,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(u,"-webkit-"+u)+o.replace(u,"-moz-"+u.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),P(2!==t?r:r.replace(S,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,a,o,s,u,l){for(var f,h=0,d=t;h<R;++h)switch(f=O[h].call(c,e,d,n,r,i,a,o,s,u,l)){case void 0:case!1:case!0:case null:break;default:d=f}if(d!==t)return d}function u(e){return void 0!==(e=e.prefix)&&(P=null,e?"function"!==typeof e?A=1:(A=2,P=e):A=0),u}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<R){var i=s(-1,n,r,r,T,I,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(D,r,n,0,0);return 0<R&&(void 0!==(i=s(-2,a,r,r,T,I,a.length,0,0,0))&&(a=i)),"",N=0,I=T=1,a}var l=/^\0+/g,f=/[\0\r\f]/g,h=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,k=/:(read-only)/g,b=/[svh]\w+-[tblr]{2}/,_=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,x=/-self|flex-/g,S=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,I=1,T=1,N=0,A=1,D=[],O=[],R=0,P=null,j=0;return c.use=function e(t){switch(t){case void 0:case null:R=O.length=0;break;default:if("function"===typeof t)O[R++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else j=0|!!t}return e},c.set=u,void 0!==e&&u(e),c},mn={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function gn(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var kn=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,bn=gn((function(e){return kn.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),_n=n(110),wn=n.n(_n);function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Sn=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},En=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,dn.typeOf)(e)},Cn=Object.freeze([]),In=Object.freeze({});function Tn(e){return"function"==typeof e}function Nn(e){return e.displayName||e.name||"Component"}function An(e){return e&&"string"==typeof e.styledComponentId}var Dn="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",On="undefined"!=typeof window&&"HTMLElement"in window,Rn=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)));function Pn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var jn=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&Pn(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,u=t.length;s<u;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),Ln=new Map,Mn=new Map,Fn=1,Un=function(e){if(Ln.has(e))return Ln.get(e);for(;Mn.has(Fn);)Fn++;var t=Fn++;return Ln.set(e,t),Mn.set(t,e),t},Bn=function(e){return Mn.get(e)},Vn=function(e,t){t>=Fn&&(Fn=t+1),Ln.set(e,t),Mn.set(t,e)},zn="style["+Dn+'][data-styled-version="5.3.11"]',qn=new RegExp("^"+Dn+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Zn=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},Wn=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(qn);if(s){var u=0|parseInt(s[1],10),c=s[2];0!==u&&(Vn(c,u),Zn(e,c,s[3]),e.getTag().insertRules(u,r)),r.length=0}else r.push(o)}}},Hn=function(){return n.nc},Kn=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(Dn))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(Dn,"active"),r.setAttribute("data-styled-version","5.3.11");var o=Hn();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},Gn=function(){function e(e){var t=this.element=Kn(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}Pn(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Qn=function(){function e(e){var t=this.element=Kn(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Yn=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),$n=On,Xn={isServer:!On,useCSSOMInjection:!Rn},Jn=function(){function e(e,t,n){void 0===e&&(e=In),void 0===t&&(t={}),this.options=xn({},Xn,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&On&&$n&&($n=!1,function(e){for(var t=document.querySelectorAll(zn),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(Dn)&&(Wn(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return Un(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(xn({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new Yn(i):r?new Gn(i):new Qn(i),new jn(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Un(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Un(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Un(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=Bn(i);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(i);if(o&&s&&o.size){var u=Dn+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+u+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),er=/(a)(d)/gi,tr=function(e){return String.fromCharCode(e+(e>25?39:97))};function nr(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=tr(t%52)+n;return(tr(t%52)+n).replace(er,"$1-$2")}var rr=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ir=function(e){return rr(5381,e)};function ar(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Tn(n)&&!An(n))return!1}return!0}var or=ir("5.3.11"),sr=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&ar(e),this.componentId=t,this.baseHash=rr(or,t),this.baseStyle=n,Jn.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=Er(this.rules,e,t,n).join(""),o=nr(rr(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}else{for(var u=this.rules.length,c=rr(this.baseHash,n.hash),l="",f=0;f<u;f++){var h=this.rules[f];if("string"==typeof h)l+=h;else if(h){var d=Er(h,e,t,n),p=Array.isArray(d)?d.join(""):d;c=rr(c,p+f),l+=p}}if(l){var v=nr(c>>>0);if(!t.hasNameForId(r,v)){var y=n(l,"."+v,void 0,r);t.insertRules(r,v,y)}i.push(v)}}return i.join(" ")},e}(),ur=/^\s*\/\/.*$/gm,cr=[":","[",".","#"];function lr(e){var t,n,r,i,a=void 0===e?In:e,o=a.options,s=void 0===o?In:o,u=a.plugins,c=void 0===u?Cn:u,l=new yn(s),f=[],h=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,u,c,l,f){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){f.push(e)})),d=function(e,r,a){return 0===r&&-1!==cr.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,s){void 0===s&&(s="&");var u=e.replace(ur,""),c=a&&o?o+" "+a+" { "+u+" }":u;return t=s,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!a?"":a,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},h,function(e){if(-2===e){var t=f;return f=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||Pn(15),rr(e,t.name)}),5381).toString():"",p}var fr=r.createContext(),hr=(fr.Consumer,r.createContext()),dr=(hr.Consumer,new Jn),pr=lr();function vr(){return(0,r.useContext)(fr)||dr}function yr(){return(0,r.useContext)(hr)||pr}function mr(e){var t=(0,r.useState)(e.stylisPlugins),n=t[0],i=t[1],a=vr(),o=(0,r.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,r.useMemo)((function(){return lr({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return(0,r.useEffect)((function(){vn()(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),r.createElement(fr.Provider,{value:o},r.createElement(hr.Provider,{value:s},e.children))}var gr=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=pr);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return Pn(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=pr),this.name+e.hash},e}(),kr=/([A-Z])/,br=/([A-Z])/g,_r=/^ms-/,wr=function(e){return"-"+e.toLowerCase()};function xr(e){return kr.test(e)?e.replace(br,wr).replace(_r,"-ms-"):e}var Sr=function(e){return null==e||!1===e||""===e};function Er(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=Er(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return Sr(e)?"":An(e)?"."+e.styledComponentId:Tn(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!t?e:Er(e(t),t,n,r):e instanceof gr?n?(e.inject(n,r),e.getName(r)):e:En(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!Sr(t[o])&&(Array.isArray(t[o])&&t[o].isCss||Tn(t[o])?a.push(xr(o)+":",t[o],";"):En(t[o])?a.push.apply(a,e(t[o],o)):a.push(xr(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in mn||r.startsWith("--")?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var u}var Cr=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Ir(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Tn(e)||En(e)?Cr(Er(Sn(Cn,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:Cr(Er(Sn(e,n)))}new Set;var Tr=function(e,t,n){return void 0===n&&(n=In),e.theme!==n.theme&&e.theme||t||n.theme},Nr=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ar=/(^-|-$)/g;function Dr(e){return e.replace(Nr,"-").replace(Ar,"")}var Or=function(e){return nr(ir(e)>>>0)};function Rr(e){return"string"==typeof e&&!0}var Pr=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},jr=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Lr(e,t,n){var r=e[n];Pr(t)&&Pr(r)?Mr(r,t):e[n]=t}function Mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(Pr(o))for(var s in o)jr(s)&&Lr(e,o[s],s)}return e}var Fr=r.createContext();Fr.Consumer;var Ur={};function Br(e,t,n){var i=An(e),a=!Rr(e),o=t.attrs,s=void 0===o?Cn:o,u=t.componentId,c=void 0===u?function(e,t){var n="string"!=typeof e?"sc":Dr(e);Ur[n]=(Ur[n]||0)+1;var r=n+"-"+Or("5.3.11"+n+Ur[n]);return t?t+"-"+r:r}(t.displayName,t.parentComponentId):u,l=t.displayName,f=void 0===l?function(e){return Rr(e)?"styled."+e:"Styled("+Nn(e)+")"}(e):l,h=t.displayName&&t.componentId?Dr(t.displayName)+"-"+t.componentId:t.componentId||c,d=i&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,p=t.shouldForwardProp;i&&e.shouldForwardProp&&(p=t.shouldForwardProp?function(n,r,i){return e.shouldForwardProp(n,r,i)&&t.shouldForwardProp(n,r,i)}:e.shouldForwardProp);var v,y=new sr(n,h,i?e.componentStyle:void 0),m=y.isStatic&&0===s.length,g=function(e,t){return function(e,t,n,i){var a=e.attrs,o=e.componentStyle,s=e.defaultProps,u=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,f=e.target,h=function(e,t,n){void 0===e&&(e=In);var r=xn({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in Tn(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(Tr(t,(0,r.useContext)(Fr),s)||In,t,a),d=h[0],p=h[1],v=function(e,t,n,r){var i=vr(),a=yr();return t?e.generateAndInjectStyles(In,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,d),y=n,m=p.$as||t.$as||p.as||t.as||f,g=Rr(m),k=p!==t?xn({},t,{},p):t,b={};for(var _ in k)"$"!==_[0]&&"as"!==_&&("forwardedAs"===_?b.as=k[_]:(c?c(_,bn,m):!g||bn(_))&&(b[_]=k[_]));return t.style&&p.style!==t.style&&(b.style=xn({},t.style,{},p.style)),b.className=Array.prototype.concat(u,l,v!==l?v:null,t.className,p.className).filter(Boolean).join(" "),b.ref=y,(0,r.createElement)(m,b)}(v,e,t,m)};return g.displayName=f,(v=r.forwardRef(g)).attrs=d,v.componentStyle=y,v.displayName=f,v.shouldForwardProp=p,v.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Cn,v.styledComponentId=h,v.target=i?e.target:e,v.withComponent=function(e){var r=t.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(t,["componentId"]),a=r&&r+"-"+(Rr(e)?e:Dr(Nn(e)));return Br(e,xn({},i,{attrs:d,componentId:a}),n)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?Mr({},e.defaultProps,t):t}}),Object.defineProperty(v,"toString",{value:function(){return"."+v.styledComponentId}}),a&&wn()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var Vr=function(e){return function e(t,n,r){if(void 0===r&&(r=In),!(0,dn.isValidElementType)(n))return Pn(1,String(n));var i=function(){return t(n,r,Ir.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,xn({},r,{},i))},i.attrs=function(i){return e(t,n,xn({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(Br,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Vr[e]=Vr(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=ar(e),Jn.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(Er(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Jn.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Hn();return"<style "+[n&&'nonce="'+n+'"',Dn+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?Pn(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return Pn(2);var n=((t={})[Dn]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),i=Hn();return i&&(n.nonce=i),[r.createElement("style",xn({},n,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Jn({isServer:!0}),this.sealed=!1}var t=e.prototype;t.collectStyles=function(e){return this.sealed?Pn(2):r.createElement(mr,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return Pn(3)}}();var zr=Vr,qr=n(164),Zr=zr.div.withConfig({displayName:"baseStyles__BaseModalBackground"})(["display:flex;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:30;background-color:rgba(0,0,0,0.5);align-items:center;justify-content:center;"]);function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(){}function Gr(){}Gr.resetWarningCache=Kr;var Qr,Yr,$r=(Qr=function(e){e.exports=function(){function e(e,t,n,r,i,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Gr,resetWarningCache:Kr};return n.PropTypes=n,n}()},Qr(Yr={exports:{}}),Yr.exports),Xr=$r,Jr=r.createContext({}),ei=Jr.Provider,ti=Jr.Consumer;function ni(e){var t=e.backgroundComponent,n=e.children,i=(0,r.useRef)(null),a=Hr((0,r.useState)(null),2),o=a[0],s=a[1],u=Hr((0,r.useState)(Zr),2),c=u[0],l=u[1];return(0,r.useEffect)((function(){t&&l(t)}),[l,t]),(0,r.useEffect)((function(){s(i.current)}),[s,i]),r.createElement(ei,{value:{modalNode:o,BackgroundComponent:c}},n,r.createElement("div",{ref:i}))}function ri(){return ri=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ri.apply(this,arguments)}ni.propTypes={backgroundComponent:Xr.oneOfType([Xr.element,Xr.object])};var ii=["WrapperComponent","children","onBackgroundClick","onEscapeKeydown","allowScroll","beforeOpen","afterOpen","beforeClose","afterClose","backgroundProps","isOpen"];function ai(e){var t,n=e.WrapperComponent,i=e.children,a=e.onBackgroundClick,o=e.onEscapeKeydown,s=e.allowScroll,u=e.beforeOpen,c=e.afterOpen,l=e.beforeClose,f=e.afterClose,h=e.backgroundProps,d=e.isOpen,p=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,ii),v=(0,r.useRef)(null),y=(0,r.useRef)(null),m=(0,r.useRef)(!1),g=Hr((0,r.useState)(!1),2),k=g[0],b=g[1];function _(e){v.current===e.target&&a&&a(e)}return(0,r.useEffect)((function(){function e(e){b(e),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&e.apply(void 0,n)}(e?c:f)}k===d||m.current||function(t){if(t){var n=t();"function"==typeof(null==n?void 0:n.then)?(m.current=!0,n.then((function(){e(d),m.current=!1}))):e(d)}else e(d)}(d?u:l)}),[m,k,d,u,l,f,c]),(0,r.useEffect)((function(){function e(e){"Escape"===e.key&&o&&o(e)}return k&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[k,o]),(0,r.useEffect)((function(){return k&&!s&&(y.current=document.body.style.overflow,document.body.style.overflow="hidden"),function(){s||(document.body.style.overflow=y.current||"")}}),[k,s]),t=n?r.createElement(n,p,i):i,r.createElement(ti,null,(function(e){var n=e.modalNode,i=e.BackgroundComponent;return n&&i&&k?qr.createPortal(r.createElement(i,ri({},h,{onClick:_,ref:v}),t),n):null}))}ai.styled=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t?zr.div.withConfig({displayName:"Modal__wrap"}).apply(void 0,t):zr.div.withConfig({displayName:"Modal__wrap"})();return function(e){return r.createElement(ai,ri({WrapperComponent:i},e))}},ai.defaultProps={backgroundProps:{}},ai.propTypes={WrapperComponent:Xr.oneOfType([Xr.element,Xr.object]),onBackgroundClick:Xr.func,onEscapeKeydown:Xr.func,allowScroll:Xr.bool,beforeOpen:Xr.func,afterOpen:Xr.func,beforeClose:Xr.func,afterClose:Xr.func,backgroundProps:Xr.object,isOpen:Xr.bool};var oi=n(184);function si(e){var t=e.isAuthenticated;return(0,oi.jsx)(oi.Fragment,{children:t?(0,oi.jsx)(Ue,{}):(0,oi.jsx)(Fe,{to:"/"})})}function ui(){return(0,oi.jsx)("div",{className:"landing-page",style:{height:"100%"},children:(0,oi.jsx)("h2",{children:"You have lost your internet connection. Try to reconnect"})})}var ci=r.createContext({myProfile:{Id:"",Email:""},updateProfile:function(){}}),li=r.createContext({myFriends:[],updateFriends:function(){}}),fi=r.createContext({myFriendRequests:[],updateFriendRequests:function(){}}),hi=r.createContext({mySentRequests:[],updateSentFriendRequests:function(){}}),di=r.createContext({openedChats:[],updateOpenedChats:function(){}}),pi="".concat("/social-app");function vi(){var e=xe(),t=(0,r.useContext)(ci).myProfile,n=(0,r.useContext)(di).updateOpenedChats,i=_e(),a=(0,r.useState)(window.innerWidth),o=(0,u.Z)(a,2),s=o[0],c=o[1];(0,r.useEffect)((function(){window.addEventListener("resize",(function(){c(window.innerWidth)}))}),[]),(0,r.useEffect)((function(){c(window.innerWidth)}),[window.innerWidth]);var l,f,h="/"==i.pathname&&s>600;return h?l={width:"20vw"}:s<600?(l={width:"10vw",backgroundColor:"var(--navColor)",boxShadow:"8px 0px 10px -12px var(--typicalShadow)"},f={padding:"0.3rem 0.3rem"}):(l={width:"5vw",backgroundColor:"var(--navColor)",boxShadow:"8px 0px 10px -12px var(--typicalShadow)"},f={padding:"0.3rem 0.3rem"}),(0,oi.jsx)("nav",{className:"bar bar-left",style:l,children:t&&(0,oi.jsxs)("ul",{children:[(0,oi.jsxs)("li",{style:f,onClick:function(){e("/")},children:["/"==i.pathname&&(0,oi.jsx)("div",{className:"bar-left__active"}),(0,oi.jsx)("img",{src:"".concat(pi,"/homepage.png"),alt:""}),h&&(0,oi.jsx)("span",{className:"medium-font",children:"Home"})]}),(0,oi.jsxs)("li",{style:f,onClick:function(){e("user-profile/".concat(t.Id))},children:[i.pathname.includes("user-profile")&&(0,oi.jsx)("div",{className:"bar-left__active"}),(0,oi.jsx)("img",{src:t.ProfileImage||"".concat(pi,"/noProfile.jpg"),alt:""}),h&&(0,oi.jsx)("span",{className:"medium-font",children:t.Email})]}),(0,oi.jsxs)("li",{style:f,onClick:function(){e("/user-friends/".concat(t.Id))},children:[i.pathname.includes("user-friends")&&(0,oi.jsx)("div",{className:"bar-left__active"}),(0,oi.jsx)("img",{src:"".concat(pi,"/friends.png"),alt:""}),h&&(0,oi.jsx)("span",{className:"medium-font",children:"Friends"})]}),(0,oi.jsxs)("li",{style:f,onClick:function(){e("/user-friend-requests/".concat(t.Id))},children:[i.pathname.includes("user-friend-requests")&&(0,oi.jsx)("div",{className:"bar-left__active"}),(0,oi.jsx)("img",{src:"".concat(pi,"/goBackArrow.png"),alt:""}),h&&(0,oi.jsx)("span",{className:"medium-font",children:"Friend Requests"})]}),(0,oi.jsxs)("li",{style:f,onClick:function(){e("/user-sent-friend-requests/".concat(t.Id))},children:[i.pathname.includes("user-sent-friend-requests")&&(0,oi.jsx)("div",{className:"bar-left__active"}),(0,oi.jsx)("img",{style:{rotate:"180deg"},src:"".concat(pi,"/goBackArrow.png"),alt:""}),h&&(0,oi.jsx)("span",{className:"medium-font",children:"Sent Friend Requests"})]}),(0,oi.jsxs)("li",{style:f,onClick:function(){n([]),e("/messaging-only/".concat(t.Id))},children:[(0,oi.jsx)("img",{src:"".concat(pi,"/messaging-only.png"),alt:""}),h&&(0,oi.jsx)("span",{className:"medium-font",children:"Messaging only"})]})]})})}function yi(e){var t=e.appName,n=xe();return(0,oi.jsx)("button",{className:"go-back-button",onClick:function(){n("/")},children:t})}var mi=r.createContext({claims:[],update:function(){}});function gi(e){var t=(0,r.useState)(!1),n=(0,u.Z)(t,2),i=n[0],a=n[1],o=(0,r.useContext)(mi).claims;return(0,r.useEffect)((function(){if(e.role){var t=o.findIndex((function(t){return"role"===t.name&&t.value===e.role}));a(t>-1)}else a(o.length>0)}),[o,e.role]),(0,oi.jsx)(oi.Fragment,{children:i?e.isAuthorized:e.notAuthorized})}var ki="https://cacarrot-server.herokuapp.com/social";var bi=function(e,t){var n=new Request("".concat(ki,"/").concat(t),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type"},mode:"cors",body:JSON.stringify(e)});return fetch(n).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error("Error:",e)}))},_i=function(e,t){var n=Object.entries(t).map((function(e){var t=(0,u.Z)(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(r)})).join("&");console.log("".concat(ki,"/").concat(e,"/?").concat(n));var r=new Request("".concat(ki,"/").concat(e,"/?").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"DELETE","Access-Control-Allow-Headers":"Content-Type"},mode:"cors"});return fetch(r).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error("Error:",e)}))},wi=function(e,t){var n=new Request("".concat(ki,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"PUT","Access-Control-Allow-Headers":"Content-Type"},mode:"cors",body:JSON.stringify(e)});return fetch(n).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error("Error:",e)}))};function xi(e){var t=e.profile,n=xe(),i=(0,r.useContext)(ci).myProfile;return(0,oi.jsx)(oi.Fragment,{children:i.Email!=t.Email&&(0,oi.jsx)("div",{className:"data-option medium-font",onClick:function(){n("user-profile/".concat(t.Id)),document.getElementById("user-search-typeahead").value=""},children:(0,oi.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,oi.jsx)("img",{className:"data-option-part image",src:t.ProfileImage||"".concat(pi,"/noProfile.jpg"),alt:""}),(0,oi.jsx)("span",{className:"data-option-part",children:t.Email})]})},t.Id)})}function Si(e){var t=e.listOfData,n=e.handleSearch,i=e.itemChildren,a=e.bonusClassName,o=(0,r.useState)(t),s=(0,u.Z)(o,2),c=s[0],l=s[1],f=c.length>0?"flex":"none";return(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsxs)("div",{className:"typeaheadContainer ".concat(a),onBlur:function(){setTimeout((function(){l([])}),100)},children:[(0,oi.jsx)("input",{id:"user-search-typeahead",autoComplete:"off",onChange:function(e){return n(e.target.value,l)},onFocus:function(e){return n(e.target.value,l)}}),c&&c.length>0&&(0,oi.jsx)("div",{className:"typeahead-options big-shadow-around",style:{display:f},children:c.map((function(e){return(0,oi.jsx)("span",{onClick:function(){document.getElementById("user-search-typeahead").value="",l([])},children:i(e)})}))})]})})}function Ei(){function e(){return e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,bi({name:t},"search-users");case 3:r=e.sent,i=r.users.slice(0,5),n(i),e.next=9;break;case 8:n([]);case 9:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}return(0,oi.jsx)(Si,{listOfData:[],itemChildren:function(e){return(0,oi.jsx)(xi,{profile:e})},handleSearch:function(t,n){return e.apply(this,arguments)},bonusClassName:"navbar-typeahead"})}var Ci={navbar:"style_navbar__q40Q6",profileIcon:"style_profileIcon__kVGWc",messagerIcon:"style_messagerIcon__fR5eA",messagerContainer:"style_messagerContainer__0Uk3h",show:"style_show__8xEnV",smallProfileImage:"style_smallProfileImage__NDPnh",arrowImage:"style_arrowImage__guJh2",profile:"style_profile__0YDcp",profileOptions:"style_profileOptions__xABx3",flex:"style_flex__14-uh",block:"style_block__1H+d3",hidden:"style_hidden__fmg7-"};function Ii(e){var t=e.profile,n=e.setChoosenFriend,i=(0,r.useContext)(ci).myProfile;return(0,oi.jsx)(oi.Fragment,{children:i.Email!=t.Email&&(0,oi.jsx)("div",{className:"data-option medium-font",onClick:function(){n(t),document.getElementById("user-search-typeahead").value=""},children:(0,oi.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,oi.jsx)("img",{className:"data-option-part image",src:t.ProfileImage||"".concat(pi,"/noProfile.jpg"),alt:""}),(0,oi.jsx)("span",{className:"data-option-part",children:t.Email})]})},t.Id)})}function Ti(e){var t=e.setChoosenFriend,n=(0,r.useContext)(ci).myProfile;function i(){return i=(0,s.Z)((0,o.Z)().mark((function e(t,r){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,bi({userId:n.Id,searchQuery:t},"search-friends");case 3:i=e.sent,r(i),e.next=8;break;case 7:r([]);case 8:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}return(0,oi.jsx)(Si,{listOfData:[],itemChildren:function(e){return(0,oi.jsx)(Ii,{profile:e,setChoosenFriend:t})},handleSearch:function(e,t){return i.apply(this,arguments)},bonusClassName:"messager-typeahead"})}function Ni(e){var t=e.friends,n=e.toggleModal,i=xe(),a=(0,r.useContext)(ci).myProfile.Id,o=(0,r.useContext)(di),s=o.openedChats,u=o.updateOpenedChats;function c(e){n("messager"),null!==s&&void 0!==s&&s.find((function(t){return t.Id===e.Id}))||u((function(t){return[].concat(h(t),[e])}))}return(0,oi.jsxs)("div",{className:"messagerBox",children:[(0,oi.jsxs)("section",{className:"messagerBox__body",children:[(0,oi.jsxs)("div",{className:"messagerBox__header",children:[(0,oi.jsx)("div",{className:"messagerBox__header__title",children:(0,oi.jsx)("h3",{children:"Chats"})}),(0,oi.jsx)("div",{className:"messagerBox__header__search",children:(0,oi.jsx)(Ti,{setChoosenFriend:c})})]}),(0,oi.jsx)("div",{className:"messagerBox__body__friends",children:null===t||void 0===t?void 0:t.map((function(e){return(0,oi.jsxs)("div",{className:"messagerBox__body__friends__friend",onClick:function(){return c(e)},children:[(0,oi.jsx)("img",{src:e.ProfileImage||"".concat(pi,"/noProfile.jpg"),alt:""}),(0,oi.jsx)("span",{children:e.Email})]},e.Id)}))})]}),(0,oi.jsx)("section",{className:"messagerBox__footer",children:(0,oi.jsx)("div",{className:"messagerBox__footer__title",children:(0,oi.jsx)("h4",{onClick:function(){n("messager"),i("/messaging-only/".concat(a))},children:"Show all chats"})})})]})}function Ai(e){var t=e.visibleModal,n=e.toggleModal,i=(0,r.useContext)(li).myFriends,a=("messager"===t?Ci.flex:Ci.hidden)+" "+Ci.messagerContainer;return(0,oi.jsxs)("div",{className:Ci.messagerIcon,children:[(0,oi.jsx)("img",{className:Ci.smallProfileImage,onClick:function(){n("messager")},src:"".concat(pi,"/messaging-only.png"),alt:""}),(0,oi.jsx)("div",{className:a,children:(0,oi.jsx)(Ni,{friends:i,toggleModal:n})})]})}var Di="token";function Oi(e){console.log(e),localStorage.setItem(Di,e)}function Ri(){var e=localStorage.getItem(Di);if(!e||"null"===e||"undefined"===e)return[];var t=JSON.parse(atob(e.split(".")[1])),n=[];for(var r in t)n.push({name:r,value:t[r]});return n}function Pi(e){var t=e.visibleModal,n=e.toggleModal,i=xe(),a=(0,r.useContext)(mi).update,o=(0,r.useContext)(ci).myProfile,s=("profileOptions"===t?Ci.block:Ci.hidden)+" "+Ci.profileOptions,u=[{name:"Settings",image:"settings.png"},{name:"Help",image:"help.png"}];return(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("div",{className:Ci.profileIcon,children:(0,oi.jsx)("div",{className:Ci.smallProfileImage,onClick:function(){return n("profileOptions")},style:{backgroundImage:"url(".concat(o.ProfileImage,")")},children:(0,oi.jsx)("img",{className:Ci.arrowImage,src:"".concat(pi,"/arrow.png"),alt:""})})}),(0,oi.jsxs)("div",{className:s,children:[(0,oi.jsxs)("div",{className:Ci.profile,onClick:function(){n(""),i("/user-profile/".concat(o.Id))},children:[(0,oi.jsx)("img",{src:o.ProfileImage||"".concat(pi,"/noProfile.jpg"),alt:""}),(0,oi.jsx)("h4",{children:o.Email})]}),u&&u.map((function(e){return(0,oi.jsxs)("h4",{onClick:function(){return n("")},children:[(0,oi.jsx)("img",{src:"".concat(pi,"/").concat(e.image),alt:""}),e.name]},e.name)})),(0,oi.jsxs)("h4",{onClick:function(){localStorage.removeItem(Di),localStorage.removeItem("email"),localStorage.removeItem("id"),localStorage.removeItem("profileImage"),localStorage.removeItem("username"),localStorage.removeItem("username"),a([]),i("/"),i(0)},children:[(0,oi.jsx)("img",{src:"".concat(pi,"/logout.png"),alt:""}),"Logout"]})]})]})}var ji={whiteMode:{navColor:"#ffffff",backColor:"#f0f2f5",textGrey:"#7e7f81",lightGrey:"#d6d9dfdc",container2Color:"#eeeeee",containerColor:"#3b55d9",testColor1:"#febebe",testColor2:"#bbb",textColor1:"#2f2f2f",textColor2:"#ffffff",testColor3:"#89cff0",blueColor:"#0084ff",shadow1:"rgba(0, 0, 0, 0.1)",shadow2:"rgba(0, 0, 0, 0.2)",shadow3:"rgba(0, 0, 0, 0.3)",typicalShadow:"rgba(0, 0, 0, 0.5)",shadowInset:"rgba(255, 255, 255, 0.5)",hoverColor:"#e4e6e9",borderColor:"#ccc",lightBlue:"rgba(0, 132, 255, 1)",iconsBackColor:"placeholder",scrollColor:"#2f2f2f"},blackMode:{navColor:"#000000",backColor:"#2f2f2f",textGrey:"#7e7f81",lightGrey:"#d6d9dfdc",container2Color:"#eeeeee",containerColor:"#3b55d9",testColor1:"#febebe",testColor2:"#bbb",textColor1:"#f2f2f2",textColor2:"#ffffff",testColor3:"rgba(0, 132, 255, 1)",blueColor:"#0084ff",shadow1:"rgba(255, 255, 255, 0.1)",shadow2:"rgba(255, 255, 255, 0.2)",shadow3:"rgba(255, 255, 255, 0.3)",typicalShadow:"rgba(255, 255, 255, 0.5)",shadowInset:"rgba(255, 255, 255, 0.5)",hoverColor:"rgb(71, 72, 72)",borderColor:"#fff",lightBlue:"rgba(0, 132, 255, 1)",iconsBackColor:"#f0f0f0",scrollColor:"#e4e6e9"}};function Li(){function e(e){var t=document.documentElement;e.checked?(localStorage.setItem("nightMode","false"),Object.entries(ji.whiteMode).forEach((function(e){var n=(0,u.Z)(e,2),r=n[0],i=n[1];t.style.setProperty("--".concat(r),i)}))):(localStorage.setItem("nightMode","true"),Object.entries(ji.blackMode).forEach((function(e){var n=(0,u.Z)(e,2),r=n[0],i=n[1];t.style.setProperty("--".concat(r),i)})))}return(0,r.useEffect)((function(){var t=document.getElementById("hide-checkbox");if(t){var n=localStorage.getItem("nightMode");t.checked="true"!==n,e(t)}}),[]),(0,oi.jsxs)("div",{className:"nightMode-wrapper",onClick:function(){console.log("halo");var t=document.getElementById("hide-checkbox");t&&(t.checked=!t.checked),e(t)},children:[(0,oi.jsx)("input",{type:"checkbox",id:"hide-checkbox"}),(0,oi.jsxs)("label",{id:"nightMode-toggle_checkbox",placeholder:"hide-checkbox",className:"toggle",children:[(0,oi.jsxs)("span",{className:"toggle-button",children:[(0,oi.jsx)("span",{className:"crater crater-1"}),(0,oi.jsx)("span",{className:"crater crater-2"}),(0,oi.jsx)("span",{className:"crater crater-3"}),(0,oi.jsx)("span",{className:"crater crater-4"}),(0,oi.jsx)("span",{className:"crater crater-5"}),(0,oi.jsx)("span",{className:"crater crater-6"}),(0,oi.jsx)("span",{className:"crater crater-7"})]}),(0,oi.jsx)("span",{className:"star star-1"}),(0,oi.jsx)("span",{className:"star star-2"}),(0,oi.jsx)("span",{className:"star star-3"}),(0,oi.jsx)("span",{className:"star star-4"}),(0,oi.jsx)("span",{className:"star star-5"}),(0,oi.jsx)("span",{className:"star star-6"}),(0,oi.jsx)("span",{className:"star star-7"}),(0,oi.jsx)("span",{className:"star star-8"})]})]})}function Mi(){var e=(0,r.useState)(""),t=(0,u.Z)(e,2),n=t[0],i=t[1];function a(e){i((function(t){return t===e?"":e}))}return(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)(Ei,{}),(0,oi.jsxs)("span",{className:"navbarIconsContainer",children:[(0,oi.jsx)(Li,{}),(0,oi.jsx)(Ai,{visibleModal:n,toggleModal:a}),(0,oi.jsx)(Pi,{visibleModal:n,toggleModal:a})]})]})}function Fi(){var e=xe();return(0,oi.jsxs)("span",{className:"flex-center",style:{position:"relative"},children:[(0,oi.jsx)(Li,{}),(0,oi.jsx)("button",{onClick:function(){return e("/register")},children:"Register"})]})}function Ui(){return(0,oi.jsxs)("nav",{className:Ci.navbar,children:[(0,oi.jsx)(yi,{appName:"FriendLink"}),(0,oi.jsx)(gi,{isAuthorized:(0,oi.jsx)(Mi,{}),notAuthorized:(0,oi.jsx)(Fi,{})})]})}var Bi=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function Vi(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.split(/[:\/]/g).pop().toLowerCase()}Vi.valid=function(e){return Bi.test(e)};var zi=Vi,qi=n(942),Zi=!1,Wi=!1,Hi="${JSCORE_VERSION}",Ki=function(e,t){if(!e)throw Gi(t)},Gi=function(e){return new Error("Firebase Database ("+Hi+") INTERNAL ASSERT FAILED: "+e)},Qi=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Yi={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qi(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw new $i;var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},$i=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return y(n)}(E(Error)),Xi=function(e){var t=Qi(e);return Yi.encodeByteArray(t,!0)},Ji=function(e){return Xi(e).replace(/\./g,"")},ea=function(e){try{return Yi.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ta(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ta(e[n],t[n]));return e}var na=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},ra=function(){try{return na()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&ea(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ia=function(){var e;return null===(e=ra())||void 0===e?void 0:e.config},aa=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function oa(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ji(JSON.stringify({alg:"none",type:"JWT"})),Ji(JSON.stringify(a)),""].join(".")}function sa(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ua(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sa())}function ca(){var e,t=null===(e=ra())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function la(){return!0===Zi||!0===Wi}function fa(){try{return"object"===typeof indexedDB}catch(e){return!1}}var ha=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),da.prototype.create),a}return y(n)}(E(Error)),da=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(pa,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ha(n,a,t)}}]),e}();var pa=/\{\$([^}]+)}/g;function va(e){return JSON.parse(e)}function ya(e){return JSON.stringify(e)}var ma=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=va(ea(a[0])||""),n=va(ea(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ga(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ka(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ba(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function _a(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function wa(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(xa(s)&&xa(u)){if(!wa(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function xa(e){return null!==e&&"object"===typeof e}var Sa=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return y(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Ea(e,t){var n=new Ca(e,t);return n.subscribe.bind(n)}var Ca=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=N(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(UB){r.e(UB)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Ia),void 0===r.error&&(r.error=Ia),void 0===r.complete&&(r.complete=Ia);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Ia(){}var Ta=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Na(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Aa(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Na(e,t)+"must be a valid function.")}function Da(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Na(e,t)+"must be a valid context object.")}var Oa=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Ra(e){return e&&e._delegate?e._delegate:e}var Pa=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ja="[DEFAULT]",La=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new aa;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ja})}catch(c){}var t,n=N(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,u.Z)(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(c){}}}catch(UB){n.e(UB)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=N(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=(0,u.Z)(i.value,2),c=s[0],l=s[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(UB){o.e(UB)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(dA){}}}catch(UB){i.e(UB)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===ja?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(dA){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ja;return this.component?this.component.multipleInstances?e:ja:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ma,Fa,Ua=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new La(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ba=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Fa||(Fa={}));var Va={debug:Fa.DEBUG,verbose:Fa.VERBOSE,info:Fa.INFO,warn:Fa.WARN,error:Fa.ERROR,silent:Fa.SILENT},za=Fa.INFO,qa=(Ma={},(0,qi.Z)(Ma,Fa.DEBUG,"log"),(0,qi.Z)(Ma,Fa.VERBOSE,"log"),(0,qi.Z)(Ma,Fa.INFO,"info"),(0,qi.Z)(Ma,Fa.WARN,"warn"),(0,qi.Z)(Ma,Fa.ERROR,"error"),Ma),Za=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=qa[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Wa=function(){function e(t){d(this,e),this.name=t,this._logLevel=za,this._logHandler=Za,this._userLogHandler=null,Ba.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Fa))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Va[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fa.DEBUG].concat(t)),this._logHandler.apply(this,[this,Fa.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fa.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Fa.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fa.INFO].concat(t)),this._logHandler.apply(this,[this,Fa.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fa.WARN].concat(t)),this._logHandler.apply(this,[this,Fa.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Fa.ERROR].concat(t)),this._logHandler.apply(this,[this,Fa.ERROR].concat(t))}}]),e}();var Ha,Ka,Ga=n(413),Qa=function(e,t){return t.some((function(t){return e instanceof t}))};var Ya=new WeakMap,$a=new WeakMap,Xa=new WeakMap,Ja=new WeakMap,eo=new WeakMap;var to={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Xa.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function no(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ka||(Ka=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ao(this),n),io(Ya.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return io(e.apply(ao(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ao(this),t].concat(r));return Xa.set(a,t.sort?t.sort():[t]),io(a)}}function ro(e){return"function"===typeof e?no(e):(e instanceof IDBTransaction&&function(e){if(!$a.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));$a.set(e,t)}}(e),Qa(e,Ha||(Ha=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,to):e)}function io(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(io(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ya.set(t,e)})).catch((function(){})),eo.set(t,e),t}(e);if(Ja.has(e))return Ja.get(e);var t=ro(e);return t!==e&&(Ja.set(e,t),eo.set(t,e)),t}var ao=function(e){return eo.get(e)};var oo,so,uo=["get","getKey","getAll","getAllKeys","count"],co=["put","add","delete","clear"],lo=new Map;function fo(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(lo.get(t))return lo.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=co.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||uo.includes(n))){var a=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var a,s,u,c,l,f,h=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=this.transaction(t,i?"readwrite":"readonly"),u=s.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(u=u.index(l.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,l),i&&s.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return lo.set(t,a),a}}}to=function(e){return(0,Ga.Z)((0,Ga.Z)({},e),{},{get:function(t,n,r){return fo(t,n)||e.get(t,n,r)},has:function(t,n){return!!fo(t,n)||e.has(t,n)}})}(to);var ho=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var po="@firebase/app",vo="0.9.12",yo=new Wa("@firebase/app"),mo="[DEFAULT]",go=(oo={},(0,qi.Z)(oo,po,"fire-core"),(0,qi.Z)(oo,"@firebase/app-compat","fire-core-compat"),(0,qi.Z)(oo,"@firebase/analytics","fire-analytics"),(0,qi.Z)(oo,"@firebase/analytics-compat","fire-analytics-compat"),(0,qi.Z)(oo,"@firebase/app-check","fire-app-check"),(0,qi.Z)(oo,"@firebase/app-check-compat","fire-app-check-compat"),(0,qi.Z)(oo,"@firebase/auth","fire-auth"),(0,qi.Z)(oo,"@firebase/auth-compat","fire-auth-compat"),(0,qi.Z)(oo,"@firebase/database","fire-rtdb"),(0,qi.Z)(oo,"@firebase/database-compat","fire-rtdb-compat"),(0,qi.Z)(oo,"@firebase/functions","fire-fn"),(0,qi.Z)(oo,"@firebase/functions-compat","fire-fn-compat"),(0,qi.Z)(oo,"@firebase/installations","fire-iid"),(0,qi.Z)(oo,"@firebase/installations-compat","fire-iid-compat"),(0,qi.Z)(oo,"@firebase/messaging","fire-fcm"),(0,qi.Z)(oo,"@firebase/messaging-compat","fire-fcm-compat"),(0,qi.Z)(oo,"@firebase/performance","fire-perf"),(0,qi.Z)(oo,"@firebase/performance-compat","fire-perf-compat"),(0,qi.Z)(oo,"@firebase/remote-config","fire-rc"),(0,qi.Z)(oo,"@firebase/remote-config-compat","fire-rc-compat"),(0,qi.Z)(oo,"@firebase/storage","fire-gcs"),(0,qi.Z)(oo,"@firebase/storage-compat","fire-gcs-compat"),(0,qi.Z)(oo,"@firebase/firestore","fire-fst"),(0,qi.Z)(oo,"@firebase/firestore-compat","fire-fst-compat"),(0,qi.Z)(oo,"fire-js","fire-js"),(0,qi.Z)(oo,"firebase","fire-js-all"),oo),ko=new Map,bo=new Map;function _o(e,t){try{e.container.addComponent(t)}catch(n){yo.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function wo(e,t){e.container.addOrOverwriteComponent(t)}function xo(e){var t=e.name;if(bo.has(t))return yo.debug("There were multiple attempts to register component ".concat(t,".")),!1;bo.set(t,e);var n,r=N(ko.values());try{for(r.s();!(n=r.n()).done;){_o(n.value,e)}}catch(UB){r.e(UB)}finally{r.f()}return!0}function So(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Eo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mo;So(e,t).clearInstance(n)}function Co(){bo.clear()}var Io=(so={},(0,qi.Z)(so,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),(0,qi.Z)(so,"bad-app-name","Illegal App name: '{$appName}"),(0,qi.Z)(so,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,qi.Z)(so,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,qi.Z)(so,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,qi.Z)(so,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,qi.Z)(so,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,qi.Z)(so,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,qi.Z)(so,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,qi.Z)(so,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,qi.Z)(so,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),so),To=new da("app","Firebase",Io),No=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pa("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw To.create("app-deleted",{appName:this._name})}}]),e}(),Ao="9.22.2";function Do(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:mo,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw To.create("bad-app-name",{appName:String(i)});if(n||(n=ia()),!n)throw To.create("no-options");var a=ko.get(i);if(a){if(wa(n,a.options)&&wa(r,a.config))return a;throw To.create("duplicate-app",{appName:i})}var o,s=new Ua(i),u=N(bo.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(UB){u.e(UB)}finally{u.f()}var l=new No(n,r,s);return ko.set(i,l),l}function Oo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mo,t=ko.get(e);if(!t&&e===mo&&ia())return Do();if(!t)throw To.create("no-app",{appName:e});return t}function Ro(){return Array.from(ko.values())}function Po(e){return jo.apply(this,arguments)}function jo(){return(jo=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ko.has(n)){e.next=6;break}return ko.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lo(e,t,n){var r,i=null!==(r=go[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void yo.warn(s.join(" "))}xo(new Pa("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Mo(e,t){if(null!==e&&"function"!==typeof e)throw To.create("invalid-log-argument");!function(e,t){var n,r=N(Ba);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Va[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Fa[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(UB){r.e(UB)}finally{r.f()}}(e,t)}function Fo(e){var t;t=e,Ba.forEach((function(e){e.setLogLevel(t)}))}var Uo="firebase-heartbeat-database",Bo=1,Vo="firebase-heartbeat-store",zo=null;function qo(){return zo||(zo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=io(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(io(s.result),e.oldVersion,e.newVersion,io(s.transaction),e)})),r&&s.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(Uo,Bo,{upgrade:function(e,t){if(0===t)e.createObjectStore(Vo)}}).catch((function(e){throw To.create("idb-open",{originalErrorMessage:e.message})}))),zo}function Zo(e){return Wo.apply(this,arguments)}function Wo(){return Wo=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qo();case 3:return n=e.sent,e.next=6,n.transaction(Vo).objectStore(Vo).get(Go(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof ha?yo.warn(e.t0.message):(i=To.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yo.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Wo.apply(this,arguments)}function Ho(e,t){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qo();case 3:return r=e.sent,i=r.transaction(Vo,"readwrite"),a=i.objectStore(Vo),e.next=8,a.put(n,Go(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof ha?yo.warn(e.t0.message):(s=To.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),yo.warn(s.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Ko.apply(this,arguments)}function Go(e){return"".concat(e.name,"!").concat(e.options.appId)}var Qo=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new es(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Yo(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Yo(),n=$o(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ji(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Yo(){return(new Date).toISOString().substring(0,10)}function $o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=N(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),ts(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),ts(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(UB){a.e(UB)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Xo,Jo,es=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fa()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Is){t(Is)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Zo(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ho(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ho(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ts(e){return Ji(JSON.stringify({version:2,heartbeats:e})).length}Xo="",xo(new Pa("platform-logger",(function(e){return new ho(e)}),"PRIVATE")),xo(new Pa("heartbeat",(function(e){return new Qo(e)}),"PRIVATE")),Lo(po,vo,Xo),Lo(po,vo,"esm2017"),Lo("fire-js","");var ns=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,_o(t,new Pa("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Po(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mo;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){_o(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){wo(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),rs=(Jo={},(0,qi.Z)(Jo,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,qi.Z)(Jo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Jo),is=new da("app-compat","Firebase",rs);var as=function e(){var n=function(e){var n={},r={__esModule:!0,initializeApp:function(t){var i=Do(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ga(n,i.name))return n[i.name];var a=new e(i,r);return n[i.name]=a,a},app:i,registerVersion:Lo,setLogLevel:Fo,onLog:Mo,apps:null,SDK_VERSION:Ao,INTERNAL:{registerComponent:function(t){var n=t.name,a=n.replace("-compat","");if(xo(t)&&"PUBLIC"===t.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw is.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==t.serviceProps&&ta(o,t.serviceProps),r[a]=o,e.prototype[a]=function(){for(var e=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!ga(n,e=e||mo))throw is.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=e,r}(ns);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){ta(n,e)},createSubscribe:Ea,ErrorFactory:da,deepExtend:ta}),n}(),os=new Wa("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){os.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ss=self.firebase.SDK_VERSION;ss&&ss.indexOf("LITE")>=0&&os.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var us=as;!function(e){Lo("@firebase/app-compat","0.2.12",e)}();us.registerVersion("firebase","9.22.2","app-compat");var cs="@firebase/database",ls="0.14.4",fs="";function hs(e){fs=e}var ds=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return y(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ya(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:va(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),ps=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return y(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ga(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),vs=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ds(t)}}catch(n){}return new ps},ys=vs("localStorage"),ms=vs("sessionStorage"),gs=new Wa("@firebase/database"),ks=function(){var e=1;return function(){return e++}}(),bs=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ki(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Sa;n.update(t);var r=n.digest();return Yi.encodeByteArray(r)},_s=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ya(r):r,t+=" "}return t},ws=null,xs=!0,Ss=function(e,t){Ki(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(gs.logLevel=Fa.VERBOSE,ws=gs.log.bind(gs),t&&ms.set("logging_enabled",!0)):"function"===typeof e?ws=e:(ws=null,ms.remove("logging_enabled"))},Es=function(){if(!0===xs&&(xs=!1,null===ws&&!0===ms.get("logging_enabled")&&Ss(!0)),ws){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=_s.apply(null,t);ws(r)}},Cs=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Es.apply(void 0,[e].concat(n))}},Is=function(){var e="FIREBASE INTERNAL ERROR: "+_s.apply(void 0,arguments);gs.error(e)},Ts=function(){var e="FIREBASE FATAL ERROR: ".concat(_s.apply(void 0,arguments));throw gs.error(e),new Error(e)},Ns=function(){var e="FIREBASE WARNING: "+_s.apply(void 0,arguments);gs.warn(e)},As=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ds="[MIN_NAME]",Os="[MAX_NAME]",Rs=function(e,t){if(e===t)return 0;if(e===Ds||t===Os)return-1;if(t===Ds||e===Os)return 1;var n=Vs(e),r=Vs(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Ps=function(e,t){return e===t?0:e<t?-1:1},js=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ya(t))},Ls=function e(t){if("object"!==typeof t||null===t)return ya(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ya(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},Ms=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Fs(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Us=function(e){Ki(!As(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Bs=new RegExp("^-?(0*)\\d{1,10}$"),Vs=function(e){if(Bs.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},zs=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Ns("Exception was thrown by user callback.",e),t}),Math.floor(0))}},qs=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Zs=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Ns('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Ws=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Es("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ns(e)}}]),e}(),Hs=function(){function e(t){d(this,e),this.accessToken=t}return y(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Hs.OWNER="owner";var Ks="5",Gs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qs="ac",Ys="websocket",$s="long_polling",Xs=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ys.get("host:"+t)||this._host}return y(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ys.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Js(e,t,n){var r;if(Ki("string"===typeof t,"typeof type must == string"),Ki("object"===typeof n,"typeof params must == object"),t===Ys)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==$s)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Fs(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var eu=function(){function e(){d(this,e),this.counters_={}}return y(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ga(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return function(e){return ta(void 0,e)}(this.counters_)}}]),e}(),tu={},nu={};function ru(e){var t=e.toString();return tu[t]||(tu[t]=new eu),tu[t]}var iu=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return y(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&zs((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),au="start",ou=function(){function e(t,n,r,i,a,o,s){var u=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cs(t),this.stats_=ru(n),this.urlFn=function(e){return u.appCheckToken&&(e[Qs]=u.appCheckToken),Js(n,$s,e)}}return y(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new iu(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(la()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new su((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===au)n.id=a,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[au]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Ks,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Qs]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Gs.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ya(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Xi(t),r=Ms(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!la()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ya(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!la()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),su=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,la())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ks(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Es("frame writing exception"),s.stack&&Es(s.stack),Es(s)}}}return y(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;la()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Es("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Es("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),uu=null;"undefined"!==typeof MozWebSocket?uu=MozWebSocket:"undefined"!==typeof WebSocket&&(uu=WebSocket);var cu=function(){function e(t,n,r,i,a,o,s){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cs(this.connId),this.stats_=ru(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return y(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ys.set("previous_websocket_failure",!0);try{var r;if(la()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Ks,"/").concat(fs,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new uu(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){ys.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=va(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ki(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ya(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Ms(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Ks,!la()&&"undefined"!==typeof location&&location.hostname&&Gs.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Qs]=r),i&&(a.p=i),Js(e,Ys,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==uu&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return ys.isInMemoryStorage||!0===ys.get("previous_websocket_failure")}}]),e}();cu.responsesRequiredToBeHealthy=2,cu.healthyTimeout=3e4;var lu=function(){function e(t){d(this,e),this.initTransports_(t)}return y(e,[{key:"initTransports_",value:function(t){var n=cu&&cu.isAvailable(),r=n&&!cu.previouslyFailed();if(t.webSocketOnly&&(n||Ns("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[cu];else{var i,a=this.transports_=[],o=N(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(UB){o.e(UB)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[ou,cu]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();lu.globalTransportInitialized_=!1;var fu=function(){function e(t,n,r,i,a,o,s,u,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cs("c:"+this.id+":"),this.transportManager_=new lu(n),this.log_("Connection created"),this.start_()}return y(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=qs((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=js("t",e),n=js("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=js("t",e),n=js("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=js("t",e);if("d"in e){var n=e.d;if("h"===t){var r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Is("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Is("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ks!==n&&Ns("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),qs((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qs((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ys.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),hu=function(){function e(){d(this,e)}return y(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),du=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},Ki(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return y(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=h(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ki(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),pu=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ua()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(n,[{key:"getInitialEvent",value:function(e){return Ki("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(du),vu=32,yu=768,mu=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return y(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function gu(){return new mu("")}function ku(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function bu(e){return e.pieces_.length-e.pieceNum_}function _u(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new mu(e.pieces_,t)}function wu(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function xu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Su(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new mu(t,0)}function Eu(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof mu)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new mu(n,0)}function Cu(e){return e.pieceNum_>=e.pieces_.length}function Iu(e,t){var n=ku(e),r=ku(t);if(null===n)return t;if(n===r)return Iu(_u(e),_u(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Tu(e,t){for(var n=xu(e,0),r=xu(t,0),i=0;i<n.length&&i<r.length;i++){var a=Rs(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function Nu(e,t){if(bu(e)!==bu(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Au(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(bu(e)>bu(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Du=y((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=xu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Oa(this.parts_[r]);Ou(this)}));function Ou(e){if(e.byteLength_>yu)throw new Error(e.errorPrefix_+"has a key path longer than "+yu+" bytes ("+e.byteLength_+").");if(e.parts_.length>vu)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vu+") or object contains a cycle "+Ru(e))}function Ru(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Pu=function(e){g(n,e);var t=x(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return y(n,[{key:"getInitialEvent",value:function(e){return Ki("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(du),ju=1e3,Lu=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,s,u,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Cs("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=ju,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!la())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Pu.getInstance().on("visible",l.onVisible_,w(l)),-1===e.host.indexOf("fblocal")&&pu.getInstance().on("online",l.onOnline_,w(l)),l}return y(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ya(i)),Ki(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new aa,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ki(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ki(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ma(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ma(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ki(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ya(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Is("Unrecognized action received from server: "+ya(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ki(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ju),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r,i,a,s,c,l,f,h,d,p,v,y,m,g=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,c=!1,l=null,f=function(){l?l.close():(c=!0,i())},h=function(e){Ki(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)},this.realtime_={close:f,sendRequest:h},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:p=e.sent,v=(0,u.Z)(p,2),y=v[0],m=v[1],c?Es("getToken() completed but was canceled"):(Es("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=m&&m.token,l=new fu(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Ns(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),s)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),c||(this.repoInfo_.nodeAdmin&&Ns(e.t0),f());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Es("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Es("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ba(this.interruptReasons_)&&(this.reconnectDelay_=ju,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Ls(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new mu(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Es("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Es("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=N(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=N(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(UB){r.e(UB)}finally{r.f()}}}catch(UB){t.e(UB)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";la()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+fs.replace(/\./g,"-")]=1,ua()?e["framework.cordova"]=1:"object"===typeof navigator&&"ReactNative"===navigator.product&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=pu.getInstance().currentlyOnline();return ba(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ga(e,"w")){var n=ka(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Ns("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(hu);Lu.nextPersistentConnectionId_=0,Lu.nextConnectionId_=0;var Mu,Fu=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return y(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Uu=function(){function e(){d(this,e)}return y(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Fu(Ds,e),r=new Fu(Ds,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Fu.MIN}}]),e}(),Bu=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){return Rs(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Gi("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Fu.MIN}},{key:"maxPost",value:function(){return new Fu(Os,Mu)}},{key:"makePost",value:function(e,t){return Ki("string"===typeof e,"KeyIndex indexValue must always be a string."),new Fu(e,Mu)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return Mu},set:function(e){Mu=e}}]),n}(Uu),Vu=new Bu,zu=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return y(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),qu=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Hu.EMPTY_NODE,this.right=null!=a?a:Hu.EMPTY_NODE}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Hu.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Hu.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();qu.RED=!0,qu.BLACK=!1;var Zu,Wu=function(){function e(){d(this,e)}return y(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new qu(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Hu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,qu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,qu.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new zu(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new zu(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new zu(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new zu(this.root_,null,this.comparator_,!0,e)}}]),e}();function Ku(e,t){return Rs(e.name,t.name)}function Gu(e,t){return Rs(e,t)}Hu.EMPTY_NODE=new Wu;var Qu,Yu,$u,Xu=function(e){return"number"===typeof e?"number:"+Us(e):"string:"+e},Ju=function(e){if(e.isLeafNode()){var t=e.val();Ki("string"===typeof t||"number"===typeof t||"object"===typeof t&&ga(t,".sv"),"Priority must be a string or number.")}else Ki(e===Zu||e.isEmpty(),"priority of unexpected type.");Ki(e===Zu||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ec=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ki(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ju(this.priorityNode_)}return y(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Cu(t)?this:".priority"===ku(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ku(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ki(".priority"!==r||1===bu(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(_u(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Xu(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Us(this.value_):this.value_,this.lazyHash_=bs(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ki(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ki(i>=0,"Unknown leaf type: "+n),Ki(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Qu},set:function(e){Qu=e}}]),e}();ec.VALUE_TYPE_ORDER=["object","boolean","number","string"];var tc,nc,rc=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Rs(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Fu.MIN}},{key:"maxPost",value:function(){return new Fu(Os,new ec("[PRIORITY-POST]",$u))}},{key:"makePost",value:function(e,t){var n=Yu(e);return new Fu(t,new ec("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Uu),ic=new rc,ac=Math.log(2),oc=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ac,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return y(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),sc=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new qu(o,a.node,qu.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new qu(o,a.node,qu.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new qu(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,qu.BLACK):(s(f,qu.BLACK),s(f,qu.RED))}return a}(new oc(e.length));return new Hu(r||t,a)},uc={},cc=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return y(e,[{key:"get",value:function(e){var t=ka(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Hu?t:null}},{key:"hasIndex",value:function(e){return ga(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ki(t!==Vu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Fu.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?sc(i,t.getCompare()):uc;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(_a(this.indexes_,(function(e,i){var a=ka(r.indexSet_,i);if(Ki(a,"Missing index implementation for "+i),e===uc){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Fu.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),sc(o,a.getCompare())}return uc}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Fu(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(_a(this.indexes_,(function(e){if(e===uc)return e;var r=n.get(t.name);return r?e.remove(new Fu(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ki(uc&&ic,"ChildrenNode.ts has not been loaded"),tc=tc||new e({".priority":uc},{".priority":ic})}}]),e}(),lc=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ju(this.priorityNode_),this.children_.isEmpty()&&Ki(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return y(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||nc}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?nc:t}},{key:"getChild",value:function(e){var t=ku(e);return null===t?this:this.getImmediateChild(t).getChild(_u(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ki(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Fu(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?nc:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ku(e);if(null===n)return t;Ki(".priority"!==ku(e)||1===bu(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(_u(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ic,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Xu(this.getPriority().val())+":"),this.forEachChild(ic,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":bs(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Fu(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Fu(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Fu(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Fu.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Fu.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===fc?-1:0}},{key:"withIndex",value:function(t){if(t===Vu||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===Vu||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ic),r=t.getIterator(ic),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===Vu?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return nc||(nc=new e(new Hu(Gu),null,cc.Default))}}]),e}();lc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var fc=new(function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.call(this,new Hu(Gu),lc.EMPTY_NODE,cc.Default)}return y(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return lc.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(lc));Object.defineProperties(Fu,{MIN:{value:new Fu(Ds,lc.EMPTY_NODE)},MAX:{value:new Fu(Os,fc)}}),Bu.__EMPTY_NODE=lc.EMPTY_NODE,ec.__childrenNodeConstructor=lc,Zu=fc,function(e){$u=e}(fc);var hc=!0;function dc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return lc.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ki(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new ec(e,dc(t));if(e instanceof Array||!hc){var n=lc.EMPTY_NODE;return Fs(e,(function(t,r){if(ga(e,t)&&"."!==t.substring(0,1)){var i=dc(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(dc(t))}var r=[],i=!1;if(Fs(e,(function(e,t){if("."!==e.substring(0,1)){var n=dc(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Fu(e,n)))}})),0===r.length)return lc.EMPTY_NODE;var a=sc(r,Ku,(function(e){return e.name}),Gu);if(i){var o=sc(r,ic.getCompare());return new lc(a,dc(t),new cc({".priority":o},{".priority":ic}))}return new lc(a,dc(t),cc.Default)}!function(e){Yu=e}(dc);var pc=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,Ki(!Cu(e)&&".priority"!==ku(e),"Can't create PathIndex with empty path or .priority key"),r}return y(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Rs(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=dc(e),r=lc.EMPTY_NODE.updateChild(this.indexPath_,n);return new Fu(t,r)}},{key:"maxPost",value:function(){var e=lc.EMPTY_NODE.updateChild(this.indexPath_,fc);return new Fu(Os,e)}},{key:"toString",value:function(){return xu(this.indexPath_,0).join("/")}}]),n}(Uu),vc=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Rs(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Fu.MIN}},{key:"maxPost",value:function(){return Fu.MAX}},{key:"makePost",value:function(e,t){var n=dc(e);return new Fu(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Uu),yc=new vc;function mc(e){return{type:"value",snapshotNode:e}}function gc(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function kc(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function bc(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var _c=function(){function e(t){d(this,e),this.index_=t}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Ki(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(kc(t,o)):Ki(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(gc(t,n)):a.trackChildChange(bc(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(ic,(function(e,r){t.hasChild(e)||n.trackChildChange(kc(e,r))})),t.isLeafNode()||t.forEachChild(ic,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(bc(t,r,i))}else n.trackChildChange(gc(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?lc.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),wc=function(){function e(t){d(this,e),this.indexedFilter_=new _c(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new Fu(t,n))||(n=lc.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=lc.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(lc.EMPTY_NODE);var i=this;return t.forEachChild(ic,(function(e,t){i.matches(new Fu(e,t))||(r=r.updateImmediateChild(e,lc.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),xc=function(){function e(t){var n=this;d(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new wc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return y(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new Fu(t,n))||(n=lc.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=lc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=lc.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;r=r.updateImmediateChild(o.name,o.node),a++}}}else{var s;r=(r=t.withIndex(this.index_)).updatePriority(lc.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);for(var u=0;s.hasNext();){var c=s.getNext();u<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?u++:r=r.updateImmediateChild(c.name,lc.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;Ki(s.numChildren()===this.limit_,"");var u=new Fu(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var f=s.getImmediateChild(t),h=r.getChildAfterChild(this.index_,c,this.reverse_);null!=h&&(h.name===t||s.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);var d=null==h?1:a(h,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(bc(t,n,f)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(kc(t,f));var p=s.updateImmediateChild(t,lc.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(null!=i&&i.trackChildChange(gc(h.name,h.node)),p.updateImmediateChild(h.name,h.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange(kc(c.name,c.node)),i.trackChildChange(gc(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,lc.EMPTY_NODE)):e}}]),e}(),Sc=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ic}return y(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ki(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ki(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ds}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ki(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ki(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Os}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ki(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ic}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Ec(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Cc(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ic(e,t){var n=e.copy();return n.index_=t,n}function Tc(e){var t,n={};if(e.isDefault())return n;if(e.index_===ic?t="$priority":e.index_===yc?t="$value":e.index_===Vu?t="$key":(Ki(e.index_ instanceof pc,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ya(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=ya(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+ya(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=ya(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+ya(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Nc(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ic&&(t.i=e.index_.toString()),t}var Ac=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Cs("p:rest:"),o.listens_={},o}return y(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Tc(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),ka(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Tc(e._queryParams),r=e._path.toString(),i=new aa;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=(0,u.Z)(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+function(e){for(var t=[],n=function(){var e=(0,u.Z)(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=va(l.responseText)}catch(n){Ns("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&Ns("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ki(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(hu),Dc=function(){function e(){d(this,e),this.rootNode_=lc.EMPTY_NODE}return y(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Oc(){return{value:null,children:new Map}}function Rc(e,t,n){if(Cu(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ku(t);e.children.has(r)||e.children.set(r,Oc()),Rc(e.children.get(r),t=_u(t),n)}}function Pc(e,t){if(Cu(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(ic,(function(t,n){Rc(e,new mu(t),n)})),Pc(e,t)}if(e.children.size>0){var r=ku(t);if(t=_u(t),e.children.has(r))Pc(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function jc(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){jc(r,new mu(t.toString()+"/"+e),n)}))}var Lc,Mc=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return y(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fs(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Fc=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Mc(t);var r=1e4+2e4*Math.random();qs(this.reportStats_.bind(this),Math.floor(r))}return y(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Fs(t,(function(t,i){i>0&&ga(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),qs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Uc(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Lc||(Lc={}));var Bc,Vc=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Lc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return y(e,[{key:"operationForChild",value:function(t){if(Cu(this.path)){if(null!=this.affectedTree.value)return Ki(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new mu(t));return new e(gu(),n,this.revert)}return Ki(ku(this.path)===t,"operationForChild called for unrelated child."),new e(_u(this.path),this.affectedTree,this.revert)}}]),e}(),zc=function(){function e(t,n){d(this,e),this.source=t,this.path=n,this.type=Lc.LISTEN_COMPLETE}return y(e,[{key:"operationForChild",value:function(t){return Cu(this.path)?new e(this.source,gu()):new e(this.source,_u(this.path))}}]),e}(),qc=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=Lc.OVERWRITE}return y(e,[{key:"operationForChild",value:function(t){return Cu(this.path)?new e(this.source,gu(),this.snap.getImmediateChild(t)):new e(this.source,_u(this.path),this.snap)}}]),e}(),Zc=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=Lc.MERGE}return y(e,[{key:"operationForChild",value:function(t){if(Cu(this.path)){var n=this.children.subtree(new mu(t));return n.isEmpty()?null:n.value?new qc(this.source,gu(),n.value):new e(this.source,gu(),n)}return Ki(ku(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,_u(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Wc=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return y(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Cu(e))return this.isFullyInitialized()&&!this.filtered_;var t=ku(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Hc=y((function e(t){d(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Kc(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Gi("Should only compare child_ events.");var r=new Fu(t.childName,t.snapshotNode),i=new Fu(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Gc(e,t){return{eventCache:e,serverCache:t}}function Qc(e,t,n,r){return Gc(new Wc(t,n,r),e.serverCache)}function Yc(e,t,n,r){return Gc(e.eventCache,new Wc(t,n,r))}function $c(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Xc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Jc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Bc||(Bc=new Hu(Ps)),Bc);d(this,e),this.value=t,this.children=n}return y(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:gu(),value:this.value};if(Cu(e))return null;var n=ku(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(_u(e),t);return null!=i?{path:Eu(new mu(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Cu(t))return this;var n=ku(t),r=this.children.get(n);return null!==r?r.subtree(_u(t)):new e(null)}},{key:"set",value:function(t,n){if(Cu(t))return new e(n,this.children);var r=ku(t),i=(this.children.get(r)||new e(null)).set(_u(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Cu(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ku(t),r=this.children.get(n);if(r){var i,a=r.remove(_u(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Cu(e))return this.value;var t=ku(e),n=this.children.get(t);return n?n.get(_u(e)):null}},{key:"setTree",value:function(t,n){if(Cu(t))return n;var r,i=ku(t),a=(this.children.get(i)||new e(null)).setTree(_u(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(gu(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Eu(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,gu(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Cu(e))return null;var i=ku(e),a=this.children.get(i);return a?a.findOnPath_(_u(e),Eu(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,gu(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Cu(t))return this;this.value&&r(n,this.value);var i=ku(t),a=this.children.get(i);return a?a.foreachOnPath_(_u(t),Eu(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(gu(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Eu(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Fs(t,(function(e,t){n=n.set(new mu(e),t)})),n}}]),e}(),el=function(){function e(t){d(this,e),this.writeTree_=t}return y(e,null,[{key:"empty",value:function(){return new e(new Jc(null))}}]),e}();function tl(e,t,n){if(Cu(t))return new el(new Jc(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Iu(i,t);return a=a.updateChild(o,n),new el(e.writeTree_.set(i,a))}var s=new Jc(n),u=e.writeTree_.setTree(t,s);return new el(u)}function nl(e,t,n){var r=e;return Fs(n,(function(e,n){r=tl(r,Eu(t,e),n)})),r}function rl(e,t){if(Cu(t))return el.empty();var n=e.writeTree_.setTree(t,new Jc(null));return new el(n)}function il(e,t){return null!=al(e,t)}function al(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Iu(n.path,t)):null}function ol(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ic,(function(e,n){t.push(new Fu(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Fu(e,n.value))})),t}function sl(e,t){if(Cu(t))return e;var n=al(e,t);return new el(null!=n?new Jc(n):e.writeTree_.subtree(t))}function ul(e){return e.writeTree_.isEmpty()}function cl(e,t){return ll(gu(),e.writeTree_,t)}function ll(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ki(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ll(Eu(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Eu(e,".priority"),r)),n}function fl(e,t){return Sl(t,e)}function hl(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ki(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&dl(s,r.path)?i=!1:Au(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=vl(e.allWrites,pl,gu()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=rl(e.visibleWrites,r.path):Fs(r.children,(function(t){e.visibleWrites=rl(e.visibleWrites,Eu(r.path,t))}));return!0}return!1}function dl(e,t){if(e.snap)return Au(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Au(Eu(e.path,n),t))return!0;return!1}function pl(e){return e.visible}function vl(e,t,n){for(var r=el.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)Au(n,o)?r=tl(r,s=Iu(n,o),a.snap):Au(o,n)&&(s=Iu(o,n),r=tl(r,gu(),a.snap.getChild(s)));else{if(!a.children)throw Gi("WriteRecord should have .snap or .children");if(Au(n,o))r=nl(r,s=Iu(n,o),a.children);else if(Au(o,n))if(Cu(s=Iu(o,n)))r=nl(r,gu(),a.children);else{var u=ka(a.children,ku(s));if(u){var c=u.getChild(_u(s));r=tl(r,gu(),c)}}}}}return r}function yl(e,t,n,r,i){if(r||i){var a=sl(e.visibleWrites,t);if(!i&&ul(a))return n;if(i||null!=n||il(a,gu())){return cl(vl(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Au(e.path,t)||Au(t,e.path))}),t),n||lc.EMPTY_NODE)}return null}var o=al(e.visibleWrites,t);if(null!=o)return o;var s=sl(e.visibleWrites,t);return ul(s)?n:null!=n||il(s,gu())?cl(s,n||lc.EMPTY_NODE):null}function ml(e,t,n,r){return yl(e.writeTree,e.treePath,t,n,r)}function gl(e,t){return function(e,t,n){var r=lc.EMPTY_NODE,i=al(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ic,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=sl(e.visibleWrites,t);return n.forEachChild(ic,(function(e,t){var n=cl(sl(a,new mu(e)),t);r=r.updateImmediateChild(e,n)})),ol(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return ol(sl(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function kl(e,t,n,r){return function(e,t,n,r,i){Ki(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Eu(t,n);if(il(e.visibleWrites,a))return null;var o=sl(e.visibleWrites,a);return ul(o)?i.getChild(n):cl(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function bl(e,t){return function(e,t){return al(e.visibleWrites,t)}(e.writeTree,Eu(e.treePath,t))}function _l(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=sl(e.visibleWrites,t),c=al(u,gu());if(null!=c)s=c;else{if(null==n)return[];s=cl(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function wl(e,t,n){return function(e,t,n,r){var i=Eu(t,n),a=al(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?cl(sl(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function xl(e,t){return Sl(Eu(e.treePath,t),e.writeTree)}function Sl(e,t){return{treePath:e,writeTree:t}}var El=function(){function e(){d(this,e),this.changeMap=new Map}return y(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ki("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ki(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,bc(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,kc(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,gc(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Gi("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,bc(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Cl=new(function(){function e(){d(this,e)}return y(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Il=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return y(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Wc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wl(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Xc(this.viewCache_),i=_l(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function Tl(e,t,n,r,i){var a,o,s=new El;if(n.type===Lc.OVERWRITE){var u=n;u.source.fromUser?a=Dl(e,t,u.path,u.snap,r,i,s):(Ki(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Cu(u.path),a=Al(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===Lc.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=Eu(n,r);Ol(t,ku(c))&&(s=Dl(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=Eu(n,r);Ol(t,ku(c))||(s=Dl(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Ki(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Pl(e,t,c.path,c.children,r,i,o,s))}else if(n.type===Lc.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=bl(r,n))return t;var s,u=new Il(r,t,i),c=t.eventCache.getNode();if(Cu(n)||".priority"===ku(n)){var l;if(t.serverCache.isFullyInitialized())l=ml(r,Xc(t));else{var f=t.serverCache.getNode();Ki(f instanceof lc,"serverChildren would be complete if leaf node"),l=gl(r,f)}s=e.filter.updateFullNode(c,l,a)}else{var h=ku(n),d=wl(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,_u(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,lc.EMPTY_NODE,_u(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=ml(r,Xc(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=bl(r,gu()),Qc(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=bl(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Cu(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Al(e,t,n,u.getNode().getChild(n),i,a,s,o);if(Cu(n)){var c=new Jc(null);return u.getNode().forEachChild(Vu,(function(e,t){c=c.set(new mu(e),t)})),Pl(e,t,n,c,i,a,s,o)}return t}var l=new Jc(null);return r.foreach((function(e,t){var r=Eu(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Pl(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==Lc.LISTEN_COMPLETE)throw Gi("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Yc(t,a.getNode(),a.isFullyInitialized()||Cu(n),a.isFiltered());return Nl(e,o,n,r,Cl,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=$c(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(mc($c(t)))}}(t,a,f),{viewCache:a,changes:f}}function Nl(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=bl(r,n))return t;if(Cu(n))if(Ki(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Xc(t),l=gl(r,c instanceof lc?c:lc.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=ml(r,Xc(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=ku(n);if(".priority"===h){Ki(1===bu(n),"Can't have a priority with additional path components");var d=u.getNode(),p=kl(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=_u(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var m=kl(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(h).updateChild(y,m):u.getNode().getImmediateChild(h)}else v=wl(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,y,i,a):u.getNode()}}return Qc(t,o,u.isFullyInitialized()||Cu(n),e.filter.filtersNodes())}function Al(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Cu(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=ku(n);if(!c.isCompleteForPath(n)&&bu(n)>1)return t;var d=_u(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,Cl,null)}var v=Yc(t,u,c.isFullyInitialized()||Cu(n),l.filtersNodes());return Nl(e,v,n,i,new Il(i,v,a),s)}function Dl(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new Il(i,t,a);if(Cu(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Qc(t,u,!0,e.filter.filtersNodes());else{var f=ku(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Qc(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=_u(n),p=c.getNode().getImmediateChild(f);if(Cu(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===wu(d)&&v.getChild(Su(d)).isEmpty()?v:v.updateChild(d,r):lc.EMPTY_NODE}if(p.equals(h))s=t;else s=Qc(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function Ol(e,t){return e.eventCache.isCompleteForChild(t)}function Rl(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Pl(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Cu(n)?r:new Jc(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Rl(0,t.serverCache.getNode().getImmediateChild(n),r);c=Al(e,c,new mu(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!u){var f=Rl(0,t.serverCache.getNode().getImmediateChild(n),r);c=Al(e,c,new mu(n),f,i,a,o,s)}})),c}var jl,Ll=function(){function e(t,n){d(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new _c(i.getIndex()),o=(r=i).loadsAllData()?new _c(r.getIndex()):r.hasLimit()?new xc(r):new wc(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(lc.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(lc.EMPTY_NODE,u.getNode(),null),f=new Wc(c,s.isFullyInitialized(),a.filtersNodes()),h=new Wc(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Gc(h,f),this.eventGenerator_=new Hc(this.query_)}return y(e,[{key:"query",get:function(){return this.query_}}]),e}();function Ml(e,t){var n=Xc(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Cu(t)&&!n.getImmediateChild(ku(t)).isEmpty())?n.getChild(t):null}function Fl(e){return 0===e.eventRegistrations_.length}function Ul(e,t,n){var r=[];if(n){Ki(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function Bl(e,t,n,r){t.type===Lc.MERGE&&null!==t.source.queryId&&(Ki(Xc(e.viewCache_),"We should always have a full cache before handling merges"),Ki($c(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=Tl(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ki(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ki(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ki(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Vl(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Vl(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Kc(e,i,"child_removed",t,r,n),Kc(e,i,"child_added",t,r,n),Kc(e,i,"child_moved",a,r,n),Kc(e,i,"child_changed",t,r,n),Kc(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var zl,ql=y((function e(){d(this,e),this.views=new Map}));function Zl(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ki(null!=a,"SyncTree gave us an op for an invalid query."),Bl(a,t,n,r)}var o,s=[],u=N(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(Bl(c,t,n,r))}}catch(UB){u.e(UB)}finally{u.f()}return s}function Wl(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=ml(n,i?r:null),u=!1;s?u=!0:r instanceof lc?(s=gl(n,r),u=!1):(s=lc.EMPTY_NODE,u=!1);var c=Gc(new Wc(s,u,!1),new Wc(r,i,!1));return new Ll(t,c)}return o}function Hl(e,t,n,r,i,a){var o=Wl(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ic,(function(e,t){r.push(gc(e,t))})),n.isFullyInitialized()&&r.push(mc(n.getNode())),Vl(e,r,n.getNode(),t)}(o,n)}function Kl(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],s=Xl(e);if("default"===i){var c,l=N(e.views.entries());try{for(l.s();!(c=l.n()).done;){var f=(0,u.Z)(c.value,2),h=f[0],d=f[1];o=o.concat(Ul(d,n,r)),Fl(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(UB){l.e(UB)}finally{l.f()}}else{var p=e.views.get(i);p&&(o=o.concat(Ul(p,n,r)),Fl(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return s&&!Xl(e)&&a.push(new(Ki(jl,"Reference.ts has not been loaded"),jl)(t._repo,t._path)),{removed:a,events:o}}function Gl(e){var t,n=[],r=N(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(UB){r.e(UB)}finally{r.f()}return n}function Ql(e,t){var n,r=null,i=N(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Ml(a,t)}}catch(UB){i.e(UB)}finally{i.f()}return r}function Yl(e,t){if(t._queryParams.loadsAllData())return Jl(e);var n=t._queryIdentifier;return e.views.get(n)}function $l(e,t){return null!=Yl(e,t)}function Xl(e){return null!=Jl(e)}function Jl(e){var t,n=N(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(UB){n.e(UB)}finally{n.f()}return null}var ef=1,tf=y((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new Jc(null),this.pendingWriteTree_={visibleWrites:el.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function nf(e,t,n,r,i){return function(e,t,n,r,i){Ki(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=tl(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?hf(e,new qc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function rf(e,t,n,r){!function(e,t,n,r){Ki(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=nl(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Jc.fromObject(n);return hf(e,new Zc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function af(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(hl(e.pendingWriteTree_,t)){var i=new Jc(null);return null!=r.snap?i=i.set(gu(),!0):Fs(r.children,(function(e){i=i.set(new mu(e),!0)})),hf(e,new Vc(r.path,i,n))}return[]}function of(e,t,n){return hf(e,new qc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function sf(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||$l(o,t))){var u=Kl(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=u.removed;if(s=u.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),f=e.syncPointTree_.findOnPath(a,(function(e,t){return Xl(t)}));if(l&&!f){var h=e.syncPointTree_.subtree(a);if(!h.isEmpty())for(var d=function(e){return e.fold((function(e,t,n){if(t&&Xl(t))return[Jl(t)];var r=[];return t&&(r=Gl(t)),Fs(n,(function(e,t){r=r.concat(t)})),r}))}(h),p=0;p<d.length;++p){var v=d[p],y=v.query,m=vf(e,v);e.listenProvider_.startListening(_f(y),yf(e,y),m.hashFn,m.onComplete)}}if(!f&&c.length>0&&!r)if(l){e.listenProvider_.stopListening(_f(t),null)}else c.forEach((function(t){var n=e.queryToTagMap.get(mf(t));e.listenProvider_.stopListening(_f(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=mf(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,c)}return s}function uf(e,t,n,r){var i=gf(e,r);if(null!=i){var a=kf(i),o=a.path,s=a.queryId,u=Iu(o,t);return bf(e,o,new qc(Uc(s),u,n))}return[]}function cf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=Iu(e,i);a=a||Ql(t,n),o=o||Xl(t)}));var s,u=e.syncPointTree_.get(i);(u?(o=o||Xl(u),a=a||Ql(u,gu())):(u=new ql,e.syncPointTree_=e.syncPointTree_.set(i,u)),null!=a)?s=!0:(s=!1,a=lc.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((function(e,t){var n=Ql(t,gu());n&&(a=a.updateImmediateChild(e,n))})));var c=$l(u,t);if(!c&&!t._queryParams.loadsAllData()){var l=mf(t);Ki(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var f=ef++;e.queryToTagMap.set(l,f),e.tagToQueryMap.set(f,l)}var h=Hl(u,t,n,fl(e.pendingWriteTree_,i),a,s);if(!c&&!o&&!r){var d=Yl(u,t);h=h.concat(function(e,t,n){var r=t._path,i=yf(e,t),a=vf(e,n),o=e.listenProvider_.startListening(_f(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)Ki(!Xl(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!Cu(e)&&t&&Xl(t))return[Jl(t).query];var r=[];return t&&(r=r.concat(Gl(t).map((function(e){return e.query})))),Fs(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(_f(l),yf(e,l))}return o}(e,t,d))}return h}function lf(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Ql(n,Iu(e,t));if(r)return r}));return yl(r,t,i,n,!0)}function ff(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=Iu(e,n);r=r||Ql(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Ql(i,gu()):(i=new ql,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new Wc(r,!0,!1):null;return function(e){return $c(e.viewCache_)}(Wl(i,t,fl(e.pendingWriteTree_,t._path),a?o.getNode():lc.EMPTY_NODE,a))}function hf(e,t){return df(t,e.syncPointTree_,null,fl(e.pendingWriteTree_,gu()))}function df(e,t,n,r){if(Cu(e.path))return pf(e,t,n,r);var i=t.get(gu());null==n&&null!=i&&(n=Ql(i,gu()));var a=[],o=ku(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=xl(r,o);a=a.concat(df(s,u,c,l))}return i&&(a=a.concat(Zl(i,e,r,n))),a}function pf(e,t,n,r){var i=t.get(gu());null==n&&null!=i&&(n=Ql(i,gu()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=xl(r,t),u=e.operationForChild(t);u&&(a=a.concat(pf(u,i,o,s)))})),i&&(a=a.concat(Zl(i,e,r,n))),a}function vf(e,t){var n=t.query,r=yf(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||lc.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=gf(e,n);if(r){var i=kf(r),a=i.path,o=i.queryId,s=Iu(a,t);return bf(e,a,new zc(Uc(o),s))}return[]}(e,n._path,r):function(e,t){return hf(e,new zc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return sf(e,n,null,i)}}}function yf(e,t){var n=mf(t);return e.queryToTagMap.get(n)}function mf(e){return e._path.toString()+"$"+e._queryIdentifier}function gf(e,t){return e.tagToQueryMap.get(t)}function kf(e){var t=e.indexOf("$");return Ki(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new mu(e.substr(0,t))}}function bf(e,t,n){var r=e.syncPointTree_.get(t);return Ki(r,"Missing sync point for query tag that we're tracking"),Zl(r,n,fl(e.pendingWriteTree_,t),null)}function _f(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Ki(zl,"Reference.ts has not been loaded"),zl)(e._repo,e._path):e}var wf=function(){function e(t){d(this,e),this.node_=t}return y(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),xf=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return y(e,[{key:"getImmediateChild",value:function(t){var n=Eu(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return lf(this.syncTree_,this.path_)}}]),e}(),Sf=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},Ef=function(e,t,n){return e&&"object"===typeof e?(Ki(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Cf(e[".sv"],t,n):"object"===typeof e[".sv"]?If(e[".sv"],t):void Ki(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Cf=function(e,t,n){if("timestamp"===e)return n.timestamp;Ki(!1,"Unexpected server value: "+e)},If=function(e,t,n){e.hasOwnProperty("increment")||Ki(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ki(!1,"Unexpected increment value: "+r);var i=t.node();if(Ki(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Tf=function(e,t,n,r){return Af(t,new xf(n,e),r)},Nf=function(e,t,n){return Af(e,new wf(t),n)};function Af(e,t,n){var r,i=e.getPriority().val(),a=Ef(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Ef(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new ec(s,dc(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new ec(a))),u.forEachChild(ic,(function(e,i){var a=Af(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var Df=y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function Of(e,t){for(var n=t instanceof mu?t:new mu(t),r=e,i=ku(n);null!==i;){var a=ka(r.node.children,i)||{children:{},childCount:0};r=new Df(i,r,a),i=ku(n=_u(n))}return r}function Rf(e){return e.node.value}function Pf(e,t){e.node.value=t,Uf(e)}function jf(e){return e.node.childCount>0}function Lf(e,t){Fs(e.node.children,(function(n,r){t(new Df(n,e,r))}))}function Mf(e,t,n,r){n&&!r&&t(e),Lf(e,(function(e){Mf(e,t,!0,r)})),n&&r&&t(e)}function Ff(e){return new mu(null===e.parent?e.name:Ff(e.parent)+"/"+e.name)}function Uf(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Rf(e)&&!jf(e)}(n),i=ga(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Uf(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Uf(e))}(e.parent,e.name,e)}var Bf=/[\[\].#$\/\u0000-\u001F\u007F]/,Vf=/[\[\].#$\u0000-\u001F\u007F]/,zf=10485760,qf=function(e){return"string"===typeof e&&0!==e.length&&!Bf.test(e)},Zf=function(e){return"string"===typeof e&&0!==e.length&&!Vf.test(e)},Wf=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!As(e)||e&&"object"===typeof e&&ga(e,".sv")},Hf=function(e,t,n,r){r&&void 0===t||Kf(Na(e,"value"),t,n)},Kf=function e(t,n,r){var i=r instanceof mu?new Du(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Ru(i));if("function"===typeof n)throw new Error(t+"contains a function "+Ru(i)+" with contents = "+n.toString());if(As(n))throw new Error(t+"contains "+n.toString()+" "+Ru(i));if("string"===typeof n&&n.length>zf/3&&Oa(n)>zf)throw new Error(t+"contains a string greater than "+zf+" utf8 bytes "+Ru(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Fs(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!qf(n)))throw new Error(t+" contains an invalid key ("+n+") "+Ru(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Oa(t),Ou(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Oa(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Ru(i)+" in addition to actual children.")}},Gf=function(e,t,n,r){if(!r||void 0!==t){var i=Na(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];Fs(t,(function(e,t){var r=new mu(e);if(Kf(i,t,Eu(n,r)),".priority"===wu(r)&&!Wf(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=xu(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!qf(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Tu);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Au(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Qf=function(e,t,n){if(!n||void 0!==t){if(As(t))throw new Error(Na(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Wf(t))throw new Error(Na(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Yf=function(e,t,n,r){if((!r||void 0!==n)&&!qf(n))throw new Error(Na(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},$f=function(e,t,n,r){if((!r||void 0!==n)&&!Zf(n))throw new Error(Na(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xf=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$f(e,t,n,r)},Jf=function(e,t){if(".info"===ku(t))throw new Error(e+" failed = Can't modify data under /.info/")},eh=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!qf(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zf(e)}(n))throw new Error(Na(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},th=y((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function nh(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Nu(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function rh(e,t,n){nh(e,n),ah(e,(function(e){return Nu(e,t)}))}function ih(e,t,n){nh(e,n),ah(e,(function(e){return Au(e,t)||Au(t,e)}))}function ah(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(oh(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function oh(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();ws&&Es("event: "+n.toString()),zs(r)}}}var sh="repo_interrupt",uh=25,ch=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new th,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oc(),this.transactionQueueTree_=new Df,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return y(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function lh(e,t,n){if(e.stats_=ru(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ac(e.repoInfo_,(function(t,n,r,i){dh(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return ph(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ya(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Lu(e.repoInfo_,t,(function(t,n,r,i){dh(e,t,n,r,i)}),(function(t){ph(e,t)}),(function(t){!function(e,t){Fs(t,(function(t,n){vh(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return nu[n]||(nu[n]=t()),nu[n]}(e.repoInfo_,(function(){return new Fc(e.stats_,e.server_)})),e.infoData_=new Dc,e.infoSyncTree_=new tf({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=of(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),vh(e,"connected",!1),e.serverSyncTree_=new tf({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);ih(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function fh(e){var t=e.infoData_.getNode(new mu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hh(e){return Sf({timestamp:fh(e)})}function dh(e,t,n,r,i){e.dataUpdateCount++;var a=new mu(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=_a(n,(function(e){return dc(e)}));o=function(e,t,n,r){var i=gf(e,r);if(i){var a=kf(i),o=a.path,s=a.queryId,u=Iu(o,t),c=Jc.fromObject(n);return bf(e,o,new Zc(Uc(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=dc(n);o=uf(e.serverSyncTree_,a,u,i)}else if(r){var c=_a(n,(function(e){return dc(e)}));o=function(e,t,n){var r=Jc.fromObject(n);return hf(e,new Zc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=dc(n);o=of(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=Ch(e,a)),ih(e.eventQueue_,f,o)}function ph(e,t){vh(e,"connected",t),!1===t&&function(e){wh(e,"onDisconnectEvents");var t=hh(e),n=Oc();jc(e.onDisconnect_,gu(),(function(r,i){var a=Tf(r,i,e.serverSyncTree_,t);Rc(n,r,a)}));var r=[];jc(n,gu(),(function(t,n){r=r.concat(of(e.serverSyncTree_,t,n));var i=Dh(e,t);Ch(e,i)})),e.onDisconnect_=Oc(),ih(e.eventQueue_,gu(),r)}(e)}function vh(e,t,n){var r=new mu("/.info/"+t),i=dc(n);e.infoData_.updateSnapshot(r,i);var a=of(e.infoSyncTree_,r,i);ih(e.eventQueue_,r,a)}function yh(e){return e.nextWriteId_++}function mh(e,t,n,r,i){wh(e,"set",{path:t.toString(),value:n,priority:r});var a=hh(e),o=dc(n,r),s=lf(e.serverSyncTree_,t),u=Nf(o,s,a),c=yh(e),l=nf(e.serverSyncTree_,t,u,c,!0);nh(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||Ns("set at "+t+" failed: "+n);var o=af(e.serverSyncTree_,c,!a);ih(e.eventQueue_,t,o),xh(e,i,n,r)}));var f=Dh(e,t);Ch(e,f),ih(e.eventQueue_,f,[])}function gh(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&Pc(e.onDisconnect_,t),xh(e,n,r,i)}))}function kh(e,t,n,r){var i=dc(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&Rc(e.onDisconnect_,t,i),xh(e,r,n,a)}))}function bh(e,t,n){var r;r=".info"===ku(t._path)?sf(e.infoSyncTree_,t,n):sf(e.serverSyncTree_,t,n),rh(e.eventQueue_,t._path,r)}function _h(e){e.persistentConnection_&&e.persistentConnection_.interrupt(sh)}function wh(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Es.apply(void 0,[t].concat(r))}function xh(e,t,n,r){t&&zs((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Sh(e,t,n){return lf(e.serverSyncTree_,t,n)||lc.EMPTY_NODE}function Eh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Ah(e,t),Rf(t)){var n=Th(e,t);Ki(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Sh(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ki(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Iu(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){wh(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(af(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Ah(e,Of(e.transactionQueueTree_,t)),Eh(e,e.transactionQueueTree_),ih(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)zs(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Ns("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Ch(e,t)}}),o)}(e,Ff(t),n)}else jf(t)&&Lf(t,(function(t){Eh(e,t)}))}function Ch(e,t){var n=Ih(e,t),r=Ff(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,c=t[a],l=Iu(n,c.path),f=!1;if(Ki(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,s=c.abortReason,i=i.concat(af(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=uh)f=!0,s="maxretry",i=i.concat(af(e.serverSyncTree_,c.currentWriteId,!0));else{var h=Sh(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){Kf("transaction failed: Data returned ",d,c.path);var p=dc(d);"object"===typeof d&&null!=d&&ga(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,y=hh(e),m=Nf(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=m,c.currentWriteId=yh(e),o.splice(o.indexOf(v),1),i=(i=i.concat(nf(e.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(af(e.serverSyncTree_,v,!0))}else f=!0,s="nodata",i=i.concat(af(e.serverSyncTree_,c.currentWriteId,!0))}ih(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);Ah(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)zs(r[c]);Eh(e,e.transactionQueueTree_)}(e,Th(e,n),r),r}function Ih(e,t){var n,r=e.transactionQueueTree_;for(n=ku(t);null!==n&&void 0===Rf(r);)r=Of(r,n),n=ku(t=_u(t));return r}function Th(e,t){var n=[];return Nh(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Nh(e,t,n){var r=Rf(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Lf(t,(function(t){Nh(e,t,n)}))}function Ah(e,t){var n=Rf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Pf(t,n.length>0?n:void 0)}Lf(t,(function(t){Ah(e,t)}))}function Dh(e,t){var n=Ff(Ih(e,t)),r=Of(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Oh(e,t)})),Oh(e,r),Mf(r,(function(t){Oh(e,t)})),n}function Oh(e,t){var n=Rf(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ki(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ki(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(af(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Pf(t,void 0):n.length=a+1,ih(e.eventQueue_,Ff(t),i);for(var s=0;s<r.length;s++)zs(r[s])}}var Rh=function(e,t){var n=Ph(e),r=n.namespace;"firebase.com"===n.domain&&Ts(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Ts("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ns("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Xs(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new mu(n.pathString)}},Ph=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=N(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ns("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(UB){r.e(UB)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},jh="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Lh=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=jh.charAt(n%64),n=Math.floor(n/64);Ki(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=jh.charAt(t[r]);return Ki(20===o.length,"nextPushId: Length should be 20."),o}}(),Mh=function(){function e(t,n,r,i){d(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return y(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+ya(this.snapshot.exportVal())}}]),e}(),Fh=function(){function e(t,n,r){d(this,e),this.eventRegistration=t,this.error=n,this.path=r}return y(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Uh=function(){function e(t,n){d(this,e),this.snapshotCallback=t,this.cancelCallback=n}return y(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Ki(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Bh=function(){function e(t,n){d(this,e),this._repo=t,this._path=n}return y(e,[{key:"cancel",value:function(){var e=new aa;return gh(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Jf("OnDisconnect.remove",this._path);var e=new aa;return kh(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Jf("OnDisconnect.set",this._path),Hf("OnDisconnect.set",e,this._path,!1);var t=new aa;return kh(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Jf("OnDisconnect.setWithPriority",this._path),Hf("OnDisconnect.setWithPriority",e,this._path,!1),Qf("OnDisconnect.setWithPriority",t,!1);var n=new aa;return function(e,t,n,r,i){var a=dc(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&Rc(e.onDisconnect_,t,a),xh(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Jf("OnDisconnect.update",this._path),Gf("OnDisconnect.update",e,this._path,!1);var t=new aa;return function(e,t,n,r){if(ba(n))return Es("onDisconnect().update() called with empty data.  Don't do anything."),void xh(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&Fs(n,(function(n,r){var i=dc(r);Rc(e.onDisconnect_,Eu(t,n),i)})),xh(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Vh=function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return y(e,[{key:"key",get:function(){return Cu(this._path)?null:wu(this._path)}},{key:"ref",get:function(){return new Wh(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Nc(this._queryParams),t=Ls(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Nc(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ra(t))instanceof e))return!1;var n=this._repo===t._repo,r=Nu(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function zh(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function qh(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Vu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Ds)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Os)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===ic){if(null!=t&&!Wf(t)||null!=n&&!Wf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ki(e.getIndex()instanceof pc||e.getIndex()===yc,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Zh(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Wh=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,r,new Sc,!1)}return y(n,[{key:"parent",get:function(){var e=Su(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Vh),Hh=function(){function e(t,n,r){d(this,e),this._node=t,this.ref=n,this._index=r}return y(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new mu(t),r=Qh(this.ref,t);return new e(this._node.getChild(n),r,ic)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Qh(n.ref,r),ic))}))}},{key:"hasChild",value:function(e){var t=new mu(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Kh(e,t){return(e=Ra(e))._checkNotDeleted("ref"),void 0!==t?Qh(e._root,t):e._root}function Gh(e,t){(e=Ra(e))._checkNotDeleted("refFromURL");var n=Rh(t,e._repo.repoInfo_.nodeAdmin);eh("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Ts("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Kh(e,n.path.toString())}function Qh(e,t){return null===ku((e=Ra(e))._path)?Xf("child","path",t,!1):$f("child","path",t,!1),new Wh(e._repo,Eu(e._path,t))}function Yh(e,t){e=Ra(e),Jf("set",e._path),Hf("set",t,e._path,!1);var n=new aa;return mh(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function $h(e,t){Gf("update",t,e._path,!1);var n=new aa;return function(e,t,n,r){wh(e,"update",{path:t.toString(),value:n});var i=!0,a=hh(e),o={};if(Fs(n,(function(n,r){i=!1,o[n]=Tf(Eu(t,n),dc(r),e.serverSyncTree_,a)})),i)Es("update() called with empty data.  Don't do anything."),xh(0,r,"ok",void 0);else{var s=yh(e),u=rf(e.serverSyncTree_,t,o,s);nh(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||Ns("update at "+t+" failed: "+n);var o=af(e.serverSyncTree_,s,!a),u=o.length>0?Ch(e,t):t;ih(e.eventQueue_,u,o),xh(0,r,n,i)})),Fs(n,(function(n){var r=Dh(e,Eu(t,n));Ch(e,r)})),ih(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Xh(e){e=Ra(e);var t=new Uh((function(){})),n=new Jh(t);return function(e,t,n){var r=ff(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=dc(r).withIndex(t._queryParams.getIndex());if(cf(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=of(e.serverSyncTree_,t._path,a);else{var o=yf(e.serverSyncTree_,t);i=uf(e.serverSyncTree_,t._path,a,o)}return ih(e.eventQueue_,t._path,i),sf(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return wh(e,"get for query "+ya(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new Hh(t,new Wh(e._repo,e._path),e._queryParams.getIndex())}))}var Jh=function(){function e(t){d(this,e),this.callbackContext=t}return y(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Mh("value",this,new Hh(e.snapshotNode,new Wh(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Fh(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),ed=function(){function e(t,n){d(this,e),this.eventType=t,this.callbackContext=n}return y(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new Fh(this,e,t):null}},{key:"createEvent",value:function(e,t){Ki(null!=e.childName,"Child events should have a childName.");var n=Qh(new Wh(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Mh(e.type,this,new Hh(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function td(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){bh(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Uh(n,a||void 0),c="value"===t?new Jh(u):new ed(t,u);return function(e,t,n){var r;r=".info"===ku(t._path)?cf(e.infoSyncTree_,t,n):cf(e.serverSyncTree_,t,n),rh(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return bh(e._repo,e,c)}}function nd(e,t,n,r){return td(e,"value",t,n,r)}function rd(e,t,n,r){return td(e,"child_added",t,n,r)}function id(e,t,n,r){return td(e,"child_changed",t,n,r)}function ad(e,t,n,r){return td(e,"child_moved",t,n,r)}function od(e,t,n,r){return td(e,"child_removed",t,n,r)}function sd(e,t,n){var r=null,i=n?new Uh(n):null;"value"===t?r=new Jh(i):t&&(r=new ed(t,i)),bh(e._repo,e,r)}var ud=y((function e(){d(this,e)})),cd=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Hf("endAt",this._value,e._path,!0);var t=Cc(e._queryParams,this._value,this._key);if(Zh(t),qh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vh(e._repo,e._path,t,e._orderByCalled)}}]),n}(ud);var ld=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Hf("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Vu||n?Cc(e,t,n):Cc(e,t,Ds)).endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Zh(t),qh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vh(e._repo,e._path,t,e._orderByCalled)}}]),n}(ud);var fd=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Hf("startAt",this._value,e._path,!0);var t=Ec(e._queryParams,this._value,this._key);if(Zh(t),qh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vh(e._repo,e._path,t,e._orderByCalled)}}]),n}(ud);var hd=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){Hf("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return(r=e.index_===Vu||n?Ec(e,t,n):Ec(e,t,Os)).startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Zh(t),qh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vh(e._repo,e._path,t,e._orderByCalled)}}]),n}(ud);var dd=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vh(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(ud);var pd=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._limit=e,r}return y(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vh(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(ud);var vd=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this))._path=e,r}return y(n,[{key:"_apply",value:function(e){zh(e,"orderByChild");var t=new mu(this._path);if(Cu(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new pc(t),r=Ic(e._queryParams,n);return qh(r),new Vh(e._repo,e._path,r,!0)}}]),n}(ud);var yd=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){zh(e,"orderByKey");var t=Ic(e._queryParams,Vu);return qh(t),new Vh(e._repo,e._path,t,!0)}}]),n}(ud);var md=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){zh(e,"orderByPriority");var t=Ic(e._queryParams,ic);return qh(t),new Vh(e._repo,e._path,t,!0)}}]),n}(ud);var gd=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_apply",value:function(e){zh(e,"orderByValue");var t=Ic(e._queryParams,yc);return qh(t),new Vh(e._repo,e._path,t,!0)}}]),n}(ud);var kd=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._value=e,i._key=r,i}return y(n,[{key:"_apply",value:function(e){if(Hf("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new cd(this._value,this._key)._apply(new fd(this._value,this._key)._apply(e))}}]),n}(ud);function bd(e){for(var t=Ra(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){Ki(!jl,"__referenceConstructor has already been defined"),jl=e}(Wh),function(e){Ki(!zl,"__referenceConstructor has already been defined"),zl=e}(Wh);var _d="FIREBASE_DATABASE_EMULATOR_HOST",wd={},xd=!1;function Sd(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Ts("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Es("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=Rh(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[_d]),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=Rh(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new Hs(Hs.OWNER):new Ws(e.name,e.options,t);eh("Invalid Firebase Database URL",s),Cu(s.path)||Ts("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=wd[t.name];i||(i={},wd[t.name]=i);var a=i[e.toURLString()];a&&Ts("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new ch(e,xd,n,r),i[e.toURLString()]=a,a}(u,e,l,new Zs(e.name,n));return new Ed(f,e)}var Ed=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return y(e,[{key:"_repo",get:function(){return this._instanceStarted||(lh(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Wh(this._repo,gu())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=wd[t];n&&n[e.key]===e||Ts("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),_h(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Ts("Cannot call "+e+" on a deleted database.")}}]),e}();function Cd(){lu.IS_TRANSPORT_INITIALIZED&&Ns("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Id(){Cd(),ou.forceDisallow()}function Td(){Cd(),cu.forceDisallow(),ou.forceAllow()}function Nd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Ra(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Ts("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ts('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Hs(Hs.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:oa(r.mockUserToken,e.app.options.projectId);a=new Hs(o)}!function(e,t,n,r){e.repoInfo_=new Xs("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,a)}function Ad(e){var t;(e=Ra(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(sh)}function Dd(e,t){Ss(e,t)}var Od={".sv":"timestamp"};var Rd=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Pd(e,t,n){var r;if(e=Ra(e),Jf("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new aa,o=nd(e,(function(){}));return function(e,t,n,r,i,a){wh(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:ks(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=Sh(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Kf("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=Of(e.transactionQueueTree_,t),f=Rf(l)||[];f.push(o),Pf(l,f),"object"===typeof u&&null!==u&&ga(u,".priority")?(c=ka(u,".priority"),Ki(Wf(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(lf(e.serverSyncTree_,t)||lc.EMPTY_NODE).getPriority().val();var h=hh(e),d=dc(u,c),p=Nf(d,s,h);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=yh(e);var v=nf(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);ih(e.eventQueue_,t,v),Eh(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new Hh(r,new Wh(e._repo,e._path),ic),a.resolve(new Rd(n,i)))}),o,i),a.promise}Lu.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Lu.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){hs(Ao),xo(new Pa("database",(function(e,t){var n=t.instanceIdentifier;return Sd(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Lo(cs,ls,e),Lo(cs,ls,"esm2017")}();var jd=new Wa("@firebase/database-compat"),Ld=function(e){var t="FIREBASE WARNING: "+e;jd.warn(t)},Md=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"cancel",value:function(e){Ta("OnDisconnect.cancel",0,1,arguments.length),Aa("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Ta("OnDisconnect.remove",0,1,arguments.length),Aa("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Ta("OnDisconnect.set",1,2,arguments.length),Aa("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Ta("OnDisconnect.setWithPriority",2,3,arguments.length),Aa("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Ta("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Ld("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Aa("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Fd=function(){function e(t,n){d(this,e),this.committed=t,this.snapshot=n}return y(e,[{key:"toJSON",value:function(){return Ta("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Ud=function(){function e(t,n){d(this,e),this._database=t,this._delegate=n}return y(e,[{key:"val",value:function(){return Ta("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Ta("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Ta("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Ta("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Ta("DataSnapshot.child",0,1,arguments.length),t=String(t),$f("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Ta("DataSnapshot.hasChild",1,1,arguments.length),$f("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Ta("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Ta("DataSnapshot.forEach",1,1,arguments.length),Aa("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Ta("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Ta("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Ta("DataSnapshot.ref",0,0,arguments.length),new Vd(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Bd=function(){function e(t,n){d(this,e),this.database=t,this._delegate=n}return y(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Ta("Query.on",2,4,arguments.length),Aa("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new Ud(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return nd(this._delegate,u,c),n;case"child_added":return rd(this._delegate,u,c),n;case"child_removed":return od(this._delegate,u,c),n;case"child_changed":return id(this._delegate,u,c),n;case"child_moved":return ad(this._delegate,u,c),n;default:throw new Error(Na("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Ta("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Na(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Aa("Query.off","callback",t,!0),Da("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,sd(this._delegate,e,r)}else sd(this._delegate,e)}},{key:"get",value:function(){var e=this;return Xh(this._delegate).then((function(t){return new Ud(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Ta("Query.once",1,4,arguments.length),Aa("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new aa,u=function(e,t){var r=new Ud(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":nd(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":rd(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":od(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":id(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":ad(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(Na("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return Ta("Query.limitToFirst",1,1,arguments.length),new e(this.database,bd(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new dd(e)}(t)))}},{key:"limitToLast",value:function(t){return Ta("Query.limitToLast",1,1,arguments.length),new e(this.database,bd(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pd(e)}(t)))}},{key:"orderByChild",value:function(t){return Ta("Query.orderByChild",1,1,arguments.length),new e(this.database,bd(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return $f("orderByChild","path",e,!1),new vd(e)}(t)))}},{key:"orderByKey",value:function(){return Ta("Query.orderByKey",0,0,arguments.length),new e(this.database,bd(this._delegate,new yd))}},{key:"orderByPriority",value:function(){return Ta("Query.orderByPriority",0,0,arguments.length),new e(this.database,bd(this._delegate,new md))}},{key:"orderByValue",value:function(){return Ta("Query.orderByValue",0,0,arguments.length),new e(this.database,bd(this._delegate,new gd))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Ta("Query.startAt",0,2,arguments.length),new e(this.database,bd(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Yf("startAt","key",t,!0),new fd(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Ta("Query.startAfter",0,2,arguments.length),new e(this.database,bd(this._delegate,function(e,t){return Yf("startAfter","key",t,!0),new hd(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Ta("Query.endAt",0,2,arguments.length),new e(this.database,bd(this._delegate,function(e,t){return Yf("endAt","key",t,!0),new cd(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Ta("Query.endBefore",0,2,arguments.length),new e(this.database,bd(this._delegate,function(e,t){return Yf("endBefore","key",t,!0),new ld(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Ta("Query.equalTo",1,2,arguments.length),new e(this.database,bd(this._delegate,function(e,t){return Yf("equalTo","key",t,!0),new kd(e,t)}(t,n)))}},{key:"toString",value:function(){return Ta("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Ta("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Ta("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Vd(this.database,new Wh(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Aa(e,"cancel",r.cancel,!0),r.context=n,Da(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Na(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Vd=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,new Vh(r._repo,r._path,new Sc,!1))).database=e,i._delegate=r,i}return y(n,[{key:"getKey",value:function(){return Ta("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Ta("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Qh(this._delegate,e))}},{key:"getParent",value:function(){Ta("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Ta("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Ta("Reference.set",1,2,arguments.length),Aa("Reference.set","onComplete",t,!0);var n=Yh(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Ta("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Ld("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Jf("Reference.update",this._delegate._path),Aa("Reference.update","onComplete",t,!0);var i=$h(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Ta("Reference.setWithPriority",2,3,arguments.length),Aa("Reference.setWithPriority","onComplete",n,!0);var r=function(e,t,n){if(Jf("setWithPriority",e._path),Hf("setWithPriority",t,e._path,!1),Qf("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new aa;return mh(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Ta("Reference.remove",0,1,arguments.length),Aa("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,Jf("remove",t._path),Yh(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var r=this;Ta("Reference.transaction",1,3,arguments.length),Aa("Reference.transaction","transactionUpdate",e,!1),Aa("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Na(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var i=Pd(this._delegate,e,{applyLocally:n}).then((function(e){return new Fd(e.committed,new Ud(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Ta("Reference.setPriority",1,2,arguments.length),Aa("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=Ra(e),Jf("setPriority",e._path),Qf("setPriority",t,!1);var n=new aa;return mh(e._repo,Eu(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Ta("Reference.push",0,2,arguments.length),Aa("Reference.push","onComplete",t,!0);var i=function(e,t){e=Ra(e),Jf("push",e._path),Hf("push",t,e._path,!0);var n,r=fh(e._repo),i=Lh(r),a=Qh(e,i),o=Qh(e,i);return n=null!=t?Yh(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Jf("Reference.onDisconnect",this._delegate._path),new Md(new Bh(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Bd),zd=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:Id,forceLongPolling:Td}}return y(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Nd(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Ta("database.ref",0,1,arguments.length),e instanceof Vd){var t=Gh(this._delegate,e.toString());return new Vd(this,t)}var n=Kh(this._delegate,e);return new Vd(this,n)}},{key:"refFromURL",value:function(e){Ta("database.refFromURL",1,1,arguments.length);var t=Gh(this._delegate,e);return new Vd(this,t)}},{key:"goOffline",value:function(){return Ta("database.goOffline",0,0,arguments.length),function(e){(e=Ra(e))._checkNotDeleted("goOffline"),_h(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Ta("database.goOnline",0,0,arguments.length),Ad(this._delegate)}}]),e}();zd.ServerValue={TIMESTAMP:Od,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var qd,Zd=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;hs(r);var u=new La("auth-internal",new Ua("database-standalone"));return u.setComponent(new Pa("auth-internal",(function(){return i}),"PRIVATE")),{instance:new zd(Sd(t,u,void 0,n,s),t),namespace:a}}}),Wd=zd.ServerValue;(qd=us).INTERNAL.registerComponent(new Pa("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new zd(i,r)}),"PUBLIC").setServiceProps({Reference:Vd,Query:Bd,Database:zd,DataSnapshot:Ud,enableLogging:Dd,INTERNAL:Zd,ServerValue:Wd}).setMultipleInstances(!0)),qd.registerVersion("@firebase/database-compat","0.3.4");var Hd,Kd="firebasestorage.googleapis.com",Gd="storageBucket",Qd=function(e){g(n,e);var t=x(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,Yd(e),"Firebase Storage: ".concat(r," (").concat(Yd(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(w(i),n.prototype),i}return y(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Yd(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(ha);function Yd(e){return"storage/"+e}function $d(){return new Qd(Hd.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Xd(){return new Qd(Hd.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jd(){return new Qd(Hd.CANCELED,"User canceled the upload/download.")}function ep(){return new Qd(Hd.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function tp(e){return new Qd(Hd.INVALID_ARGUMENT,e)}function np(){return new Qd(Hd.APP_DELETED,"The Firebase app was deleted.")}function rp(e){return new Qd(Hd.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ip(e,t){return new Qd(Hd.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ap(e){throw new Qd(Hd.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Hd||(Hd={}));var op,sp=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Qd(Hd.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Kd?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Qd(Hd.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),up=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function cp(e){return"string"===typeof e||e instanceof String}function lp(e){return fp()&&e instanceof Blob}function fp(){return"undefined"!==typeof Blob&&!ca()}function hp(e,t,n,r){if(r<t)throw tp("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw tp("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function dp(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function pp(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function vp(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(op||(op={}));var yp=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=$d();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?np():Jd());else i(Xd())}};this.canceled_?t(0,new mp(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new mp(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===op.NO_ERROR,a=r.getStatus();if(!n||vp(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===op.ABORT;t(!1,new mp(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new mp(s,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),mp=y((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function gp(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function kp(){for(var e=gp(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(fp())return new Blob(n);throw new Qd(Hd.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function bp(e){if("undefined"===typeof atob)throw t="base-64",new Qd(Hd.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var _p={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},wp=y((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function xp(e,t){switch(e){case _p.RAW:return new wp(Sp(t));case _p.BASE64:case _p.BASE64URL:return new wp(Ep(e,t));case _p.DATA_URL:return new wp(function(e){var t=new Cp(e);return t.base64?Ep(_p.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw ip(_p.DATA_URL,"Malformed data URL.")}return Sp(t)}(t.rest)}(t),function(e){var t=new Cp(e);return t.contentType}(t))}throw $d()}function Sp(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Ep(e,t){switch(e){case _p.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ip(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _p.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw ip(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=bp(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw ip(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Cp=y((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw ip(_p.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var Ip=function(){function e(t,n){d(this,e);var r=0,i="";lp(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(lp(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(fp()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(kp.apply(null,i))}var a=n.map((function(e){return cp(e)?xp(_p.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function Tp(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Np(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ap(e,t){return t}var Dp=y((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Ap})),Op=null;function Rp(){if(Op)return Op;var e=[];e.push(new Dp("bucket")),e.push(new Dp("generation")),e.push(new Dp("metageneration")),e.push(new Dp("name","fullPath",!0));var t=new Dp("name");t.xform=function(e,t){return function(e){return!cp(e)||e.length<2?e:Np(e)}(t)},e.push(t);var n=new Dp("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Dp("timeCreated")),e.push(new Dp("updated")),e.push(new Dp("md5Hash",null,!0)),e.push(new Dp("cacheControl",null,!0)),e.push(new Dp("contentDisposition",null,!0)),e.push(new Dp("contentEncoding",null,!0)),e.push(new Dp("contentLanguage",null,!0)),e.push(new Dp("contentType",null,!0)),e.push(new Dp("metadata","customMetadata",!0)),Op=e}function Pp(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new sp(n,r);return t._makeStorageReference(i)}})}(r,e),r}function jp(e,t,n){var r=Tp(t);return null===r?null:Pp(e,r,n)}function Lp(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var Mp="prefixes",Fp="items";function Up(e,t,n){var r=Tp(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Mp]){var i,a=N(n[Mp]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new sp(t,o));r.prefixes.push(s)}}catch(UB){a.e(UB)}finally{a.f()}}if(n[Fp]){var u,c=N(n[Fp]);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new sp(t,l.name));r.items.push(f)}}catch(UB){c.e(UB)}finally{c.f()}}return r}(e,t,r)}var Bp=y((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Vp(e){if(!e)throw $d()}function zp(e,t){return function(n,r){var i=jp(e,r,t);return Vp(null!==i),i}}function qp(e,t){return function(n,r){var i=jp(e,r,t);return Vp(null!==i),function(e,t,n,r){var i=Tp(t);if(null===i)return null;if(!cp(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return dp("/b/"+o(i)+"/o/"+o(a),n,r)+pp({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Zp(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Qd(Hd.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Qd(Hd.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Qd(Hd.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Qd(Hd.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Wp(e){var t=Zp(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Qd(Hd.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Hp(e,t,n){var r=dp(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Bp(r,"GET",zp(e,n),i);return a.errorHandler=Wp(t),a}function Kp(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=dp(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Bp(o,"GET",function(e,t){return function(n,r){var i=Up(e,t,r);return Vp(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=Zp(t),u}function Gp(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Qp(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Gp(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Lp(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=Ip.getBlob(c,r,l);if(null===f)throw ep();var h={name:u.fullPath},d=dp(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Bp(d,"POST",zp(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Zp(t),v}var Yp=y((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function $p(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Vp(!1)}return Vp(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Xp=262144;function Jp(e,t,n,r,i,a,o,s){var u=new Yp(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Qd(Hd.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw ep();var v=t.maxUploadRetryTime,y=new Bp(n,"POST",(function(e,n){var i,o=$p(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?zp(t,a)(e,n):null,new Yp(s,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=s||null,y.errorHandler=Zp(e),y}var ev={STATE_CHANGED:"state_changed"},tv={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nv(e){switch(e){case"running":case"pausing":case"canceling":return tv.RUNNING;case"paused":return tv.PAUSED;case"success":return tv.SUCCESS;case"canceled":return tv.CANCELED;default:return tv.ERROR}}var rv=y((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function iv(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var av=null,ov=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=op.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=op.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=op.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw ap("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw ap("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw ap("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw ap("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw ap("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),sv=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(ov);function uv(){return av?av():new sv}var cv=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Rp(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(Hd.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(vp(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Xd()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(Hd.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return y(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=(0,u.Z)(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Gp(t,r,i),s={name:o.fullPath},u=dp(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Lp(o,n),f=e.maxUploadRetryTime,h=new Bp(u,"POST",(function(e){var t;$p(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Vp(!1)}return Vp(cp(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=Zp(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,uv,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Bp(n,"POST",(function(e){var t=$p(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Vp(!1)}n||Vp(!1);var i=Number(n);return Vp(!isNaN(i)),new Yp(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Zp(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,uv,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Xp*this._chunkMultiplier,n=new Yp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Jp(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,uv,i,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Xp*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Hp(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,uv,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Qp(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,uv,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Jd(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=nv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new rv(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(nv(this._state)){case tv.SUCCESS:iv(this._resolve.bind(null,this.snapshot))();break;case tv.CANCELED:case tv.ERROR:iv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(nv(this._state)){case tv.RUNNING:case tv.PAUSED:e.next&&iv(e.next.bind(e,this.snapshot))();break;case tv.SUCCESS:e.complete&&iv(e.complete.bind(e))();break;default:e.error&&iv(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),lv=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof sp?n:sp.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new sp(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Np(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new sp(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw rp(e)}}]),e}();function fv(e,t,n){return hv.apply(this,arguments)}function hv(){return(hv=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={pageToken:r},e.next=3,dv(t,s);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,h(u.prefixes)),(a=n.items).push.apply(a,h(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,fv(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dv(e,t){null!=t&&"number"===typeof t.maxResults&&hp("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Kp(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,uv)}function pv(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=dp(t.fullServerUrl(),e.host,e._protocol),a=Lp(n,r),o=e.maxOperationRetryTime,s=new Bp(i,"PATCH",zp(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=Wp(t),s}(e.storage,e._location,t,Rp());return e.storage.makeRequestWithTokens(n,uv)}function vv(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=dp(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Bp(r,"GET",qp(e,n),i);return a.errorHandler=Wp(t),a}(e.storage,e._location,Rp());return e.storage.makeRequestWithTokens(t,uv).then((function(e){if(null===e)throw new Qd(Hd.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function yv(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=dp(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Bp(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Wp(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,uv)}function mv(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new sp(e._location.bucket,n);return new lv(e.storage,r)}function gv(e,t){if(e instanceof _v){var n=e;if(null==n._bucket)throw new Qd(Hd.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Gd+"' property when initializing the app?");var r=new lv(n,n._bucket);return null!=t?gv(r,t):r}return void 0!==t?mv(e,t):e}function kv(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof _v)return function(e,t){return new lv(e,t)}(e,t);throw tp("To use ref(service, url), the first argument must be a Storage instance.")}return gv(e,t)}function bv(e,t){var n=null===t||void 0===t?void 0:t[Gd];return null==n?null:sp.makeFromBucketSpec(n,e)}var _v=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Kd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?sp.makeFromBucketSpec(i,this._host):bv(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=sp.makeFromBucketSpec(this._url,e):this._bucket=bv(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){hp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){hp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new lv(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new up(np());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=pp(e.urlParams),u=e.url+s,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new yp(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=(0,u.Z)(r,2),a=i[0],s=i[1],e.abrupt("return",this._makeRequest(t,n,a,s).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),wv="@firebase/storage",xv="0.11.2",Sv="storage";function Ev(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new cv(e,new Ip(t),n)}(e=Ra(e),t,n)}function Cv(e){return function(e){e._throwIfRoot("getMetadata");var t=Hp(e.storage,e._location,Rp());return e.storage.makeRequestWithTokens(t,uv)}(e=Ra(e))}function Iv(e){return function(e){var t={prefixes:[],items:[]};return fv(e,t).then((function(){return t}))}(e=Ra(e))}function Tv(e,t){return kv(e=Ra(e),t)}function Nv(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:oa(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Av(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new _v(r,i,a,n,Ao)}xo(new Pa(Sv,Av,"PUBLIC").setMultipleInstances(!0)),Lo(wv,xv,""),Lo(wv,xv,"esm2017");var Dv=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return y(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Ov=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return y(e,[{key:"snapshot",get:function(){return new Dv(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Dv(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Dv(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Dv(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Rv=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return y(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Pv(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Pv(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Pv=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return y(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return mv(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Ov(Ev(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_p.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=xp(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Ov(new cv(this._delegate,new Ip(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return Iv(this._delegate).then((function(t){return new Rv(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return dv(e=Ra(e),t)}(this._delegate,e||void 0).then((function(e){return new Rv(e,t.storage)}))}},{key:"getMetadata",value:function(){return Cv(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return pv(e=Ra(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return vv(Ra(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),yv(Ra(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw rp(e)}}]),e}(),jv=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return y(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Lv(e))throw tp("ref() expected a child path but got a URL, use refFromURL instead.");return new Pv(Tv(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Lv(e))throw tp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{sp.makeFromUrl(e,this._delegate.host)}catch(t){throw tp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pv(Tv(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Nv(this._delegate,e,t,n)}}]),e}();function Lv(e){return/^[A-Za-z]+:\/\//.test(e)}function Mv(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new jv(r,i)}!function(e){var t={TaskState:tv,TaskEvent:ev,StringFormat:_p,Storage:jv,Reference:Pv};e.INTERNAL.registerComponent(new Pa("storage-compat",Mv,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(us);var Fv,Uv="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bv={},Vv=Vv||{},zv=Uv||self;function qv(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Zv(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Wv="closure_uid_"+(1e9*Math.random()>>>0),Hv=0;function Kv(e,t,n){return e.call.apply(e.bind,arguments)}function Gv(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Qv(e,t,n){return(Qv=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kv:Gv).apply(null,arguments)}function Yv(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function $v(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Xv(){this.s=this.s,this.o=this.o}Xv.prototype.s=!1,Xv.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Wv)&&e[Wv]||(e[Wv]=++Hv))},Xv.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Jv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function ey(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ty(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(qv(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function ny(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ny.prototype.h=function(){this.defaultPrevented=!0};var ry=function(){if(!zv.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{zv.addEventListener("test",(function(){}),t),zv.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function iy(e){return/^[\s\xa0]*$/.test(e)}function ay(){var e=zv.navigator;return e&&(e=e.userAgent)?e:""}function oy(e){return-1!=ay().indexOf(e)}function sy(e){return sy[" "](e),e}sy[" "]=function(){};var uy,cy,ly=oy("Opera"),fy=oy("Trident")||oy("MSIE"),hy=oy("Edge"),dy=hy||fy,py=oy("Gecko")&&!(-1!=ay().toLowerCase().indexOf("webkit")&&!oy("Edge"))&&!(oy("Trident")||oy("MSIE"))&&!oy("Edge"),vy=-1!=ay().toLowerCase().indexOf("webkit")&&!oy("Edge");function yy(){var e=zv.document;return e?e.documentMode:void 0}e:{var my="",gy=function(){var e=ay();return py?/rv:([^\);]+)(\)|;)/.exec(e):hy?/Edge\/([\d\.]+)/.exec(e):fy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):vy?/WebKit\/(\S+)/.exec(e):ly?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(gy&&(my=gy?gy[1]:""),fy){var ky=yy();if(null!=ky&&ky>parseFloat(my)){uy=String(ky);break e}}uy=my}if(zv.document&&fy){var by=yy();cy=by||(parseInt(uy,10)||void 0)}else cy=void 0;var _y=cy;function wy(e,t){if(ny.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(py){e:{try{sy(t.nodeName);var i=!0;break e}catch(Qr){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:xy[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&wy.$.h.call(this)}}$v(wy,ny);var xy={2:"touch",3:"pen",4:"mouse"};wy.prototype.h=function(){wy.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Sy="closure_listenable_"+(1e6*Math.random()|0),Ey=0;function Cy(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Ey,this.fa=this.ia=!1}function Iy(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Ty(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Ny(e){var t={};for(var n in e)t[n]=e[n];return t}var Ay="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dy(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ay.length;a++)n=Ay[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Oy(e){this.src=e,this.g={},this.h=0}function Ry(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Jv(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Iy(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Py(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Oy.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Py(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Cy(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var jy="closure_lm_"+(1e6*Math.random()|0),Ly={};function My(e,t,n,r,i){if(r&&r.once)return Uy(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)My(e,t[a],n,r,i);return null}return n=Hy(n),e&&e[Sy]?e.O(t,n,Zv(r)?!!r.capture:!!r,i):Fy(e,t,n,!1,r,i)}function Fy(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Zv(i)?!!i.capture:!!i,s=Zy(e);if(s||(e[jy]=s=new Oy(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=qy;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ry||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(zy(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Uy(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Uy(e,t[a],n,r,i);return null}return n=Hy(n),e&&e[Sy]?e.P(t,n,Zv(r)?!!r.capture:!!r,i):Fy(e,t,n,!0,r,i)}function By(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)By(e,t[a],n,r,i);else r=Zv(r)?!!r.capture:!!r,n=Hy(n),e&&e[Sy]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Py(a=e.g[t],n,r,i))&&(Iy(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Zy(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Py(t,n,r,i)),(n=-1<e?t[e]:null)&&Vy(n))}function Vy(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Sy])Ry(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(zy(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Zy(t))?(Ry(n,e),0==n.h&&(n.src=null,t[jy]=null)):Iy(e)}}}function zy(e){return e in Ly?Ly[e]:Ly[e]="on"+e}function qy(e,t){if(e.fa)e=!0;else{t=new wy(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Vy(e),e=n.call(r,t)}return e}function Zy(e){return(e=e[jy])instanceof Oy?e:null}var Wy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hy(e){return"function"===typeof e?e:(e[Wy]||(e[Wy]=function(t){return e.handleEvent(t)}),e[Wy])}function Ky(){Xv.call(this),this.i=new Oy(this),this.S=this,this.J=null}function Gy(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ny(t,e);else if(t instanceof ny)t.target=t.target||e;else{var i=t;Dy(t=new ny(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Qy(o,r,!0,t)&&i}if(i=Qy(o=t.g=e,r,!0,t)&&i,i=Qy(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Qy(o=t.g=n[a],r,!1,t)&&i}function Qy(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Ry(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}$v(Ky,Xv),Ky.prototype[Sy]=!0,Ky.prototype.removeEventListener=function(e,t,n,r){By(this,e,t,n,r)},Ky.prototype.N=function(){if(Ky.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Iy(n[r]);delete t.g[e],t.h--}}this.J=null},Ky.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ky.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Yy=zv.JSON.stringify,$y=function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Xy(){var e=om,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Jy=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=em.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),em=new $y((function(){return new tm}),(function(e){return e.reset()})),tm=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function nm(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function rm(e){zv.setTimeout((function(){throw e}),0)}var im,am=!1,om=new Jy,sm=function(){var e=zv.Promise.resolve(void 0);im=function(){e.then(um)}},um=function(){for(var e;e=Xy();){try{e.h.call(e.g)}catch(n){rm(n)}var t=em;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}am=!1};function cm(e,t){Ky.call(this),this.h=e||1,this.g=t||zv,this.j=Qv(this.qb,this),this.l=Date.now()}function lm(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function fm(e,t,n){if("function"===typeof e)n&&(e=Qv(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Qv(e.handleEvent,e)}return 2147483647<Number(t)?-1:zv.setTimeout(e,t||0)}function hm(e){e.g=fm((function(){e.g=null,e.i&&(e.i=!1,hm(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}$v(cm,Ky),(Fv=cm.prototype).ga=!1,Fv.T=null,Fv.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Gy(this,"tick"),this.ga&&(lm(this),this.start()))}},Fv.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fv.N=function(){cm.$.N.call(this),lm(this),delete this.g};var dm=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:hm(this)}},{key:"N",value:function(){We(k(n.prototype),"N",this).call(this),this.g&&(zv.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Xv);function pm(e){Xv.call(this),this.h=e,this.g={}}$v(pm,Xv);var vm=[];function ym(e,t,n,r){Array.isArray(n)||(n&&(vm[0]=n.toString()),n=vm);for(var i=0;i<n.length;i++){var a=My(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function mm(e){Ty(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Vy(e)}),e),e.g={}}function gm(){this.g=!0}function km(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Yy(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}pm.prototype.N=function(){pm.$.N.call(this),mm(this)},pm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gm.prototype.Ea=function(){this.g=!1},gm.prototype.info=function(){};var bm={},_m=null;function wm(){return _m=_m||new Ky}function xm(e){ny.call(this,bm.Ta,e)}function Sm(e){var t=wm();Gy(t,new xm(t))}function Em(e,t){ny.call(this,bm.STAT_EVENT,e),this.stat=t}function Cm(e){var t=wm();Gy(t,new Em(t,e))}function Im(e,t){ny.call(this,bm.Ua,e),this.size=t}function Tm(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return zv.setTimeout((function(){e()}),t)}bm.Ta="serverreachability",$v(xm,ny),bm.STAT_EVENT="statevent",$v(Em,ny),bm.Ua="timingevent",$v(Im,ny);var Nm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Am={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dm(){}function Om(e){return e.h||(e.h=e.i())}function Rm(){}Dm.prototype.h=null;var Pm,jm={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Lm(){ny.call(this,"d")}function Mm(){ny.call(this,"c")}function Fm(){}function Um(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new pm(this),this.P=Vm,e=dy?125:void 0,this.V=new cm(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bm}function Bm(){this.i=null,this.g="",this.h=!1}$v(Lm,ny),$v(Mm,ny),$v(Fm,Dm),Fm.prototype.g=function(){return new XMLHttpRequest},Fm.prototype.i=function(){return{}},Pm=new Fm;var Vm=45e3,zm={},qm={};function Zm(e,t,n){e.L=1,e.v=cg(ig(t)),e.s=n,e.S=!0,Wm(e,null)}function Wm(e,t){e.G=Date.now(),Qm(e),e.A=ig(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),wg(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Bm,e.g=xk(e.l,n?t:null,!e.s),0<e.O&&(e.M=new dm(Qv(e.Pa,e,e.g),e.O)),ym(e.U,e.g,"readystatechange",e.nb),t=e.I?Ny(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Sm(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Hm(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Km(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Gm(e,n))==qm){4==t&&(e.o=4,Cm(14),i=!1),km(e.j,e.m,null,"[Incomplete Response]");break}if(r==zm){e.o=4,Cm(15),km(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}km(e.j,e.m,r,null),eg(e,r)}Hm(e)&&r!=qm&&r!=zm&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Cm(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),vk(t),t.M=!0,Cm(11))):(km(e.j,e.m,n,"[Invalid Chunked Response]"),Jm(e),Xm(e))}function Gm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qm:(n=Number(t.substring(n,r)),isNaN(n)?zm:(r+=1)+n>t.length?qm:(t=t.slice(r,r+n),e.C=r+n,t))}function Qm(e){e.Y=Date.now()+e.P,Ym(e,e.P)}function Ym(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Tm(Qv(e.lb,e),t)}function $m(e){e.B&&(zv.clearTimeout(e.B),e.B=null)}function Xm(e){0==e.l.H||e.J||gk(e.l,e)}function Jm(e){$m(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,lm(e.V),mm(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function eg(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ng(n.i,e)))if(!e.K&&Ng(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;mk(n),sk(n)}pk(n),Cm(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Tm(Qv(n.ib,n),6e3));if(1>=Tg(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else bk(n,11)}else if((e.K||n.g==e)&&mk(n),!iy(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var s=a[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Ag(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ug(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=wk(r,r.J?r.pa:null,r.Y),d.K){Dg(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&($m(p),Qm(p)),r.g=d}else dk(r);0<n.j.length&&ck(n)}else"stop"!=a[0]&&"close"!=a[0]||bk(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?bk(n,7):ok(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Sm()}catch(a){}}function tg(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(qv(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(qv(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(qv(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Fv=Um.prototype).setTimeout=function(e){this.P=e},Fv.nb=function(e){e=e.target;var t=this.M;t&&3==ek(e)?t.l():this.Pa(e)},Fv.Pa=function(e){try{if(e==this.g)e:{var t=ek(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||dy||this.g&&(this.h.h||this.g.ja()||tk(this.g)))){this.J||4!=t||7==n||Sm(),$m(this);var r=this.g.da();this.ca=r;t:if(Hm(this)){var i=tk(this.g);e="";var a=i.length,o=4==ek(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Jm(this),Xm(this);var s="";break t}this.h.i=new zv.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!iy(u)){var l=u;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Cm(12),Jm(this),Xm(this);break e}km(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eg(this,r)}this.S?(Km(this,t,s),dy&&this.i&&3==t&&(ym(this.U,this.V,"tick",this.mb),this.V.start())):(km(this.j,this.m,s,null),eg(this,s)),4==t&&Jm(this),this.i&&!this.J&&(4==t?gk(this.l,this):(this.i=!1,Qm(this)))}else(function(e){var t={};e=(e.g&&2<=ek(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!iy(e[n])){var r=nm(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.o=3,Cm(12)):(this.o=0,Cm(13)),Jm(this),Xm(this)}}}catch(t){}},Fv.mb=function(){if(this.g){var e=ek(this.g),t=this.g.ja();this.C<t.length&&($m(this),Km(this,e,t),this.i&&4!=e&&Qm(this))}},Fv.cancel=function(){this.J=!0,Jm(this)},Fv.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Sm(),Cm(17)),Jm(this),this.o=2,Xm(this)):Ym(this,this.Y-e)};var ng=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rg(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof rg){this.h=e.h,ag(this,e.j),this.s=e.s,this.g=e.g,og(this,e.m),this.l=e.l;var t=e.i,n=new gg;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),sg(this,n),this.o=e.o}else e&&(t=String(e).match(ng))?(this.h=!1,ag(this,t[1]||"",!0),this.s=lg(t[2]||""),this.g=lg(t[3]||"",!0),og(this,t[4]),this.l=lg(t[5]||"",!0),sg(this,t[6]||"",!0),this.o=lg(t[7]||"")):(this.h=!1,this.i=new gg(null,this.h))}function ig(e){return new rg(e)}function ag(e,t,n){e.j=n?lg(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function og(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function sg(e,t,n){t instanceof gg?(e.i=t,function(e,t){t&&!e.j&&(kg(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(bg(this,t),wg(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=fg(t,yg)),e.i=new gg(t,e.h))}function ug(e,t,n){e.i.set(t,n)}function cg(e){return ug(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function lg(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function fg(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,hg),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hg(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rg.prototype.toString=function(){var e=[],t=this.j;t&&e.push(fg(t,dg,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(fg(t,dg,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(fg(n,"/"==n.charAt(0)?vg:pg,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",fg(n,mg)),e.join("")};var dg=/[#\/\?@]/g,pg=/[#\?:]/g,vg=/[#\?]/g,yg=/[#\?@]/g,mg=/#/g;function gg(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kg(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function bg(e,t){kg(e),t=xg(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _g(e,t){return kg(e),t=xg(e,t),e.g.has(t)}function wg(e,t,n){bg(e,t),0<n.length&&(e.i=null,e.g.set(xg(e,t),ey(n)),e.h+=n.length)}function xg(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Fv=gg.prototype).add=function(e,t){kg(this),this.i=null,e=xg(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Fv.forEach=function(e,t){kg(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Fv.ta=function(){kg(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Fv.Z=function(e){kg(this);var t=[];if("string"===typeof e)_g(this,e)&&(t=t.concat(this.g.get(xg(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Fv.set=function(e,t){return kg(this),this.i=null,_g(this,e=xg(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Fv.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Fv.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Sg=y((function e(t,n){d(this,e),this.g=t,this.map=n}));function Eg(e){this.l=e||Cg,zv.PerformanceNavigationTiming?e=0<(e=zv.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(zv.g&&zv.g.Ka&&zv.g.Ka()&&zv.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Cg=10;function Ig(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Tg(e){return e.h?1:e.g?e.g.size:0}function Ng(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ag(e,t){e.g?e.g.add(t):e.h=t}function Dg(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Og(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=N(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(UB){r.e(UB)}finally{r.f()}return n}return ey(e.i)}Eg.prototype.cancel=function(){if(this.i=Og(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=N(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(UB){t.e(UB)}finally{t.f()}this.g.clear()}};var Rg,Pg=function(){function e(){d(this,e)}return y(e,[{key:"stringify",value:function(e){return zv.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return zv.JSON.parse(e,void 0)}}]),e}();function jg(){this.g=new Pg}function Lg(e,t,n){var r=n||"";try{tg(e,(function(e,n){var i=e;Zv(e)&&(i=Yy(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Mg(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(Qr){}}function Fg(e){this.l=e.fc||null,this.j=e.ob||!1}function Ug(e,t){Ky.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Bg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$v(Fg,Dm),Fg.prototype.g=function(){return new Ug(this.l,this.j)},Fg.prototype.i=(Rg={},function(){return Rg}),$v(Ug,Ky);var Bg=0;function Vg(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function zg(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qg(e)}function qg(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Fv=Ug.prototype).open=function(e,t){if(this.readyState!=Bg)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qg(this)},Fv.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||zv).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Fv.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zg(this)),this.readyState=Bg},Fv.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qg(this)),this.g&&(this.readyState=3,qg(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof zv.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Vg(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Fv.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zg(this):qg(this),3==this.readyState&&Vg(this)}},Fv.Za=function(e){this.g&&(this.response=this.responseText=e,zg(this))},Fv.Ya=function(e){this.g&&(this.response=e,zg(this))},Fv.ka=function(){this.g&&zg(this)},Fv.setRequestHeader=function(e,t){this.v.append(e,t)},Fv.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Fv.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ug.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Zg=zv.JSON.parse;function Wg(e){Ky.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Hg,this.L=this.M=!1}$v(Wg,Ky);var Hg="",Kg=/^https?$/i,Gg=["POST","PUT"];function Qg(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Yg(e),Xg(e)}function Yg(e){e.F||(e.F=!0,Gy(e,"complete"),Gy(e,"error"))}function $g(e){if(e.h&&"undefined"!=typeof Vv&&(!e.C[1]||4!=ek(e)||2!=e.da()))if(e.v&&4==ek(e))fm(e.La,0,e);else if(Gy(e,"readystatechange"),4==ek(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(ng)[1]||null;!a&&zv.self&&zv.self.location&&(a=zv.self.location.protocol.slice(0,-1)),i=!Kg.test(a?a.toLowerCase():"")}t=i}if(t)Gy(e,"complete"),Gy(e,"success");else{e.m=6;try{var o=2<ek(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Yg(e)}}finally{Xg(e)}}}function Xg(e,t){if(e.g){Jg(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Gy(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Jg(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(zv.clearTimeout(e.A),e.A=null)}function ek(e){return e.g?e.g.readyState:0}function tk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Hg:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Nn){return null}}function nk(e){var t="";return Ty(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function rk(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=nk(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ug(e,t,n))}function ik(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ak(e){this.Ga=0,this.j=[],this.l=new gm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ik("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ik("baseRetryDelayMs",5e3,e),this.hb=ik("retryDelaySeedMs",1e4,e),this.eb=ik("forwardChannelMaxRetries",2,e),this.xa=ik("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Eg(e&&e.concurrentRequestLimit),this.Ja=new jg,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ok(e){if(uk(e),3==e.H){var t=e.W++,n=ig(e.I);if(ug(n,"SID",e.K),ug(n,"RID",t),ug(n,"TYPE","terminate"),fk(e,n),(t=new Um(e,e.l,t)).L=2,t.v=cg(ig(n)),n=!1,zv.navigator&&zv.navigator.sendBeacon)try{n=zv.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&zv.Image&&((new Image).src=t.v,n=!0),n||(t.g=xk(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Qm(t)}_k(e)}function sk(e){e.g&&(vk(e),e.g.cancel(),e.g=null)}function uk(e){sk(e),e.u&&(zv.clearTimeout(e.u),e.u=null),mk(e),e.i.cancel(),e.m&&("number"===typeof e.m&&zv.clearTimeout(e.m),e.m=null)}function ck(e){if(!Ig(e.i)&&!e.m){e.m=!0;var t=e.Na;im||sm(),am||(im(),am=!0),om.add(t,e),e.C=0}}function lk(e,t){var n;n=t?t.m:e.W++;var r=ig(e.I);ug(r,"SID",e.K),ug(r,"RID",n),ug(r,"AID",e.V),fk(e,r),e.o&&e.s&&rk(r,e.o,e.s),n=new Um(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=hk(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ag(e.i,n),Zm(n,r,t)}function fk(e,t){e.na&&Ty(e.na,(function(e,n){ug(t,n,e)})),e.h&&tg({},(function(e,n){ug(t,n,e)}))}function hk(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Qv(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=a))a=Math.max(0,i[u].g-100),s=!1;else try{Lg(l,o,"req"+c+"_")}catch(Zn){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function dk(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;im||sm(),am||(im(),am=!0),om.add(t,e),e.A=0}}function pk(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Tm(Qv(e.Ma,e),kk(e,e.A)),e.A++,!0)}function vk(e){null!=e.B&&(zv.clearTimeout(e.B),e.B=null)}function yk(e){e.g=new Um(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=ig(e.wa);ug(t,"RID","rpc"),ug(t,"SID",e.K),ug(t,"AID",e.V),ug(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ug(t,"TO",e.qa),ug(t,"TYPE","xmlhttp"),fk(e,t),e.o&&e.s&&rk(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=cg(ig(t)),n.s=null,n.S=!0,Wm(n,e)}function mk(e){null!=e.v&&(zv.clearTimeout(e.v),e.v=null)}function gk(e,t){var n=null;if(e.g==t){mk(e),vk(e),e.g=null;var r=2}else{if(!Ng(e.i,t))return;n=t.F,Dg(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Gy(r=wm(),new Im(r,n)),ck(e)}else dk(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Tg(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Tm(Qv(e.Na,e,t),kk(e,e.C)),e.C++,!0))}(e,t)||2==r&&pk(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:bk(e,5);break;case 4:bk(e,10);break;case 3:bk(e,6);break;default:bk(e,2)}}function kk(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function bk(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Qv(e.pb,e);n||(n=new rg("//www.google.com/images/cleardot.gif"),zv.location&&"http"==zv.location.protocol||ag(n,"https"),cg(n)),function(e,t){var n=new gm;if(zv.Image){var r=new Image;r.onload=Yv(Mg,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Yv(Mg,n,r,"TestLoadImage: error",!1,t),r.onabort=Yv(Mg,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Yv(Mg,n,r,"TestLoadImage: timeout",!1,t),zv.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Cm(2);e.H=0,e.h&&e.h.za(t),_k(e),uk(e)}function _k(e){if(e.H=0,e.ma=[],e.h){var t=Og(e.i);0==t.length&&0==e.j.length||(ty(e.ma,t),ty(e.ma,e.j),e.i.i.length=0,ey(e.j),e.j.length=0),e.h.ya()}}function wk(e,t,n){var r=n instanceof rg?ig(n):new rg(n);if(""!=r.g)t&&(r.g=t+"."+r.g),og(r,r.m);else{var i=zv.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new rg(null);r&&ag(a,r),t&&(a.g=t),i&&og(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ug(r,n,t),ug(r,"VER",e.ra),fk(e,r),r}function xk(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Wg(new Fg({ob:!0})):new Wg(e.va)).Oa(e.J),t}function Sk(){}function Ek(){if(fy&&!(10<=Number(_y)))throw Error("Environmental error: no available transport.")}function Ck(e,t){Ky.call(this),this.g=new ak(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!iy(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!iy(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Nk(this)}function Ik(e){Lm.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tk(){Mm.call(this),this.status=1}function Nk(e){this.g=e}function Ak(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Dk(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Ok(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Fv=Wg.prototype).Oa=function(e){this.M=e},Fv.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pm.g(),this.C=this.u?Om(this.u):Om(Pm),this.g.onreadystatechange=Qv(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Qg(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=N(r.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,r.get(s))}}catch(UB){o.e(UB)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=zv.FormData&&e instanceof zv.FormData,!(0<=Jv(Gg,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=N(n);try{for(l.s();!(c=l.n()).done;){var f=(0,u.Z)(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(UB){l.e(UB)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Jg(this),0<this.B&&((this.L=function(e){return fy&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qv(this.ua,this)):this.A=fm(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Qg(this,s)}},Fv.ua=function(){"undefined"!=typeof Vv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gy(this,"timeout"),this.abort(8))},Fv.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Gy(this,"complete"),Gy(this,"abort"),Xg(this))},Fv.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xg(this,!0)),Wg.$.N.call(this)},Fv.La=function(){this.s||(this.G||this.v||this.l?$g(this):this.kb())},Fv.kb=function(){$g(this)},Fv.isActive=function(){return!!this.g},Fv.da=function(){try{return 2<ek(this)?this.g.status:-1}catch(Rg){return-1}},Fv.ja=function(){try{return this.g?this.g.responseText:""}catch(Rg){return""}},Fv.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Zg(t)}},Fv.Ia=function(){return this.m},Fv.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Fv=ak.prototype).ra=8,Fv.H=1,Fv.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Um(this,this.l,e),n=this.s;if(this.U&&(n?Dy(n=Ny(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=hk(this,t,r),ug(i=ig(this.I),"RID",e),ug(i,"CVER",22),this.F&&ug(i,"X-HTTP-Session-Id",this.F),fk(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(nk(n)))+"&"+r:this.o&&rk(i,this.o,n)),Ag(this.i,t),this.bb&&ug(i,"TYPE","init"),this.P?(ug(i,"$req",r),ug(i,"SID","null"),t.aa=!0,Zm(t,i,null)):Zm(t,i,r),this.H=2}}else 3==this.H&&(e?lk(this,e):0==this.j.length||Ig(this.i)||lk(this))},Fv.Ma=function(){if(this.u=null,yk(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Tm(Qv(this.jb,this),e)}},Fv.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Cm(10),sk(this),yk(this))},Fv.ib=function(){null!=this.v&&(this.v=null,sk(this),pk(this),Cm(19))},Fv.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Cm(2)):(this.l.info("Failed to ping google.com"),Cm(1))},Fv.isActive=function(){return!!this.h&&this.h.isActive(this)},(Fv=Sk.prototype).Ba=function(){},Fv.Aa=function(){},Fv.za=function(){},Fv.ya=function(){},Fv.isActive=function(){return!0},Fv.Va=function(){},Ek.prototype.g=function(e,t){return new Ck(e,t)},$v(Ck,Ky),Ck.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Cm(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=wk(e,null,e.Y),ck(e)},Ck.prototype.close=function(){ok(this.g)},Ck.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Yy(e),e=n);t.j.push(new Sg(t.fb++,e)),3==t.H&&ck(t)},Ck.prototype.N=function(){this.g.h=null,delete this.j,ok(this.g),delete this.g,Ck.$.N.call(this)},$v(Ik,Lm),$v(Tk,Mm),$v(Nk,Sk),Nk.prototype.Ba=function(){Gy(this.g,"a")},Nk.prototype.Aa=function(e){Gy(this.g,new Ik(e))},Nk.prototype.za=function(e){Gy(this.g,new Tk)},Nk.prototype.ya=function(){Gy(this.g,"b")},$v(Ak,(function(){this.blockSize=-1})),Ak.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ak.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Dk(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Dk(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Dk(this,r),i=0;break}}this.h=i,this.i+=t},Ak.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Rk={};function Pk(e){return-128<=e&&128>e?function(e,t){var n=Rk;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ok([0|e],0>e?-1:0)})):new Ok([0|e],0>e?-1:0)}function jk(e){if(isNaN(e)||!isFinite(e))return Mk;if(0>e)return zk(jk(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Lk;return new Ok(t,0)}var Lk=4294967296,Mk=Pk(0),Fk=Pk(1),Uk=Pk(16777216);function Bk(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Vk(e){return-1==e.h}function zk(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ok(n,~e.h).add(Fk)}function qk(e,t){return e.add(zk(t))}function Zk(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Wk(e,t){this.g=e,this.h=t}function Hk(e,t){if(Bk(t))throw Error("division by zero");if(Bk(e))return new Wk(Mk,Mk);if(Vk(e))return t=Hk(zk(e),t),new Wk(zk(t.g),zk(t.h));if(Vk(t))return t=Hk(e,zk(t)),new Wk(zk(t.g),t.h);if(30<e.g.length){if(Vk(e)||Vk(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Fk,r=t;0>=r.X(e);)n=Kk(n),r=Kk(r);var i=Gk(n,1),a=Gk(r,1);for(r=Gk(r,2),n=Gk(n,2);!Bk(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Gk(r,1),n=Gk(n,1)}return t=qk(e,i.R(t)),new Wk(i,t)}for(i=Mk;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=jk(n)).R(t);Vk(o)||0<o.X(e);)o=(a=jk(n-=r)).R(t);Bk(a)&&(a=Fk),i=i.add(a),e=qk(e,o)}return new Wk(i,e)}function Kk(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ok(n,e.h)}function Gk(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Ok(i,e.h)}(Fv=Ok.prototype).ea=function(){if(Vk(this))return-zk(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Lk+r)*t,t*=Lk}return e},Fv.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Bk(this))return"0";if(Vk(this))return"-"+zk(this).toString(e);for(var t=jk(Math.pow(e,6)),n=this,r="";;){var i=Hk(n,t).g,a=((0<(n=qk(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Bk(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Fv.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Fv.X=function(e){return Vk(e=qk(this,e))?-1:Bk(e)?0:1},Fv.abs=function(){return Vk(this)?zk(this):this},Fv.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Ok(n,-2147483648&n[n.length-1]?-1:0)},Fv.R=function(e){if(Bk(this)||Bk(e))return Mk;if(Vk(this))return Vk(e)?zk(this).R(zk(e)):zk(zk(this).R(e));if(Vk(e))return zk(this.R(zk(e)));if(0>this.X(Uk)&&0>e.X(Uk))return jk(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),s=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=o*u,Zk(n,2*r+2*i),n[2*r+2*i+1]+=a*u,Zk(n,2*r+2*i+1),n[2*r+2*i+1]+=o*s,Zk(n,2*r+2*i+1),n[2*r+2*i+2]+=a*s,Zk(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ok(n,0)},Fv.gb=function(e){return Hk(this,e).h},Fv.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ok(n,this.h&e.h)},Fv.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ok(n,this.h|e.h)},Fv.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ok(n,this.h^e.h)},Ek.prototype.createWebChannel=Ek.prototype.g,Ck.prototype.send=Ck.prototype.u,Ck.prototype.open=Ck.prototype.m,Ck.prototype.close=Ck.prototype.close,Nm.NO_ERROR=0,Nm.TIMEOUT=8,Nm.HTTP_ERROR=6,Am.COMPLETE="complete",Rm.EventType=jm,jm.OPEN="a",jm.CLOSE="b",jm.ERROR="c",jm.MESSAGE="d",Ky.prototype.listen=Ky.prototype.O,Wg.prototype.listenOnce=Wg.prototype.P,Wg.prototype.getLastError=Wg.prototype.Sa,Wg.prototype.getLastErrorCode=Wg.prototype.Ia,Wg.prototype.getStatus=Wg.prototype.da,Wg.prototype.getResponseJson=Wg.prototype.Wa,Wg.prototype.getResponseText=Wg.prototype.ja,Wg.prototype.send=Wg.prototype.ha,Wg.prototype.setWithCredentials=Wg.prototype.Oa,Ak.prototype.digest=Ak.prototype.l,Ak.prototype.reset=Ak.prototype.reset,Ak.prototype.update=Ak.prototype.j,Ok.prototype.add=Ok.prototype.add,Ok.prototype.multiply=Ok.prototype.R,Ok.prototype.modulo=Ok.prototype.gb,Ok.prototype.compare=Ok.prototype.X,Ok.prototype.toNumber=Ok.prototype.ea,Ok.prototype.toString=Ok.prototype.toString,Ok.prototype.getBits=Ok.prototype.D,Ok.fromNumber=jk,Ok.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return zk(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=jk(Math.pow(n,8)),i=Mk,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=jk(Math.pow(n,o)),i=i.R(o).add(jk(s))):i=(i=i.R(r)).add(jk(s))}return i};var Qk=Bv.createWebChannelTransport=function(){return new Ek},Yk=Bv.getStatEventTarget=function(){return wm()},$k=Bv.ErrorCode=Nm,Xk=Bv.EventType=Am,Jk=Bv.Event=bm,eb=Bv.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tb=Bv.FetchXmlHttpFactory=Fg,nb=Bv.WebChannel=Rm,rb=Bv.XhrIo=Wg,ib=Bv.Md5=Ak,ab=Bv.Integer=Ok,ob="@firebase/firestore",sb=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();sb.UNAUTHENTICATED=new sb(null),sb.GOOGLE_CREDENTIALS=new sb("google-credentials-uid"),sb.FIRST_PARTY=new sb("first-party-uid"),sb.MOCK_USER=new sb("mock-user");var ub="9.22.2",cb=new Wa("@firebase/firestore");function lb(){return cb.logLevel}function fb(e){if(cb.logLevel<=Fa.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pb);cb.debug.apply(cb,["Firestore (".concat(ub,"): ").concat(e)].concat(h(i)))}}function hb(e){if(cb.logLevel<=Fa.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pb);cb.error.apply(cb,["Firestore (".concat(ub,"): ").concat(e)].concat(h(i)))}}function db(e){if(cb.logLevel<=Fa.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pb);cb.warn.apply(cb,["Firestore (".concat(ub,"): ").concat(e)].concat(h(i)))}}function pb(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function vb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ub,") INTERNAL ASSERTION FAILED: ")+e;throw hb(t),new Error(t)}function yb(e,t){e||vb()}function mb(e,t){return e}var gb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kb=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(ha),bb=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),_b=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),wb=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(sb.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),xb=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Sb=function(){function e(t){d(this,e),this.t=t,this.currentUser=sb.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new bb;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new bb,e.enqueueRetryable((function(){return i(n.currentUser)}))};var u=function(){var t=a;e.enqueueRetryable((0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){fb("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(fb("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bb)}}),0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(fb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(yb("string"==typeof n.accessToken),new _b(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return yb(null===e||"string"==typeof e),new sb(e)}}]),e}(),Eb=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=sb.FIRST_PARTY,this.g=new Map}return y(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Cb=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new Eb(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(sb.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ib=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Tb=function(){function e(t){d(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&fb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,fb("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){fb("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):fb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(yb("string"==typeof t.token),e.T=t.token,new Ib(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Nb(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ab=function(){function e(){d(this,e)}return y(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Nb(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Db(e,t){return e<t?-1:e>t?1:0}function Ob(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Rb(e){return e+"\0"}var Pb=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new kb(gb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new kb(gb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new kb(gb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kb(gb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Db(this.nanoseconds,e.nanoseconds):Db(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),jb=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Pb(0,0))}},{key:"max",value:function(){return new e(new Pb(253402300799,999999999))}}]),e}(),Lb=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&vb(),void 0===r?r=t.length-n:r>t.length-n&&vb(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Mb=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new kb(gb.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,h(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Lb),Fb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ub=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Fb.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new kb(gb.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new kb(gb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new kb(gb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new kb(gb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Lb),Bb=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Mb.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Mb.fromString(t))}},{key:"fromName",value:function(t){return new e(Mb.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Mb.emptyPath())}},{key:"comparator",value:function(e,t){return Mb.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Mb(t.slice()))}}]),e}(),Vb=y((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function zb(e){return e.fields.find((function(e){return 2===e.kind}))}function qb(e){return e.fields.filter((function(e){return 2!==e.kind}))}Vb.UNKNOWN_ID=-1;var Zb=y((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Wb=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,Gb.min())}}]),e}();function Hb(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=jb.fromTimestamp(1e9===r?new Pb(n+1,0):new Pb(n,r));return new Gb(i,Bb.empty(),t)}function Kb(e){return new Gb(e.readTime,e.key,-1)}var Gb=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(jb.min(),Bb.empty(),-1)}},{key:"max",value:function(){return new e(jb.max(),Bb.empty(),-1)}}]),e}();function Qb(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Bb.comparator(e.documentKey,t.documentKey))?n:Db(e.largestBatchId,t.largestBatchId)}var Yb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$b=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Xb(e){return Jb.apply(this,arguments)}function Jb(){return(Jb=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===gb.FAILED_PRECONDITION&&t.message===Yb){e.next=2;break}throw t;case 2:fb("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var e_=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&vb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=N(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(UB){i.e(UB)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),t_=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new bb,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new i_(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=c_(e.target.error);r.v.reject(new i_(t,n))}}return y(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(fb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new o_(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new i_(n,t)}}}]),e}(),n_=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(sa())&&hb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"$",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return fb("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new i_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new kb(gb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new kb(gb.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new i_(t,n))},i.onupgradeneeded=function(e){fb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){fb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,r,i){var a,s,u,c,l=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,s=0,u=(0,o.Z)().mark((function e(){var n,u,c,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++s,e.prev=1,e.next=4,l.$(t);case 4:return l.db=e.sent,n=t_.open(l.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),e_.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,f="FirebaseError"!==c.name&&s<3,fb("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),l.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return fb("SimpleDb","Removing database:",e),s_(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!fa())return!1;if(e.C())return!0;var t=sa(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/social-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),r_=function(){function e(t){d(this,e),this.L=t,this.q=!1,this.U=null}return y(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return s_(this.L.delete())}}]),e}(),i_=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,gb.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(kb);function a_(e){return"IndexedDbTransactionError"===e.name}var o_=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(fb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(fb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),s_(n)}},{key:"add",value:function(e){return fb("SimpleDb","ADD",this.store.name,e,e),s_(this.store.add(e))}},{key:"get",value:function(e){var t=this;return s_(this.store.get(e)).next((function(n){return void 0===n&&(n=null),fb("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return fb("SimpleDb","DELETE",this.store.name,e),s_(this.store.delete(e))}},{key:"count",value:function(){return fb("SimpleDb","COUNT",this.store.name),s_(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new e_((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new e_((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){fb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new e_((function(n,r){t.onerror=function(e){var t=c_(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new e_((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new r_(i),o=t(i.primaryKey,i.value,a);if(o instanceof e_){var s=o.catch((function(e){return a.done(),e_.reject(e)}));n.push(s)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return e_.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function s_(e){return new e_((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=c_(e.target.error);n(t)}}))}var u_=!1;function c_(e){var t=n_.S(sa());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new kb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return u_||(u_=!0,setTimeout((function(){throw r}),0)),r}}return e}var l_=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return y(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;fb("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=fb,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!a_(e.t4)){e.next=17;break}fb("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Xb(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),f_=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"nt",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n=this,r=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return e_.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return fb("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return fb("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Kb(t);Qb(r,n)>0&&(n=r)})),new Gb(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),h_=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function d_(e){return null==e}function p_(e){return 0===e&&1/e==-1/0}function v_(e){return"number"==typeof e&&Number.isInteger(e)&&!p_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function y_(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=g_(t)),t=m_(e.get(n),t);return g_(t)}function m_(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function g_(e){return e+"\x01\x01"}function k_(e){var t=e.length;if(yb(t>=2),2===t)return yb("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Mb.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&vb(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:vb()}a=o+2}return new Mb(r)}h_.ct=-1;var b_=["userId","batchId"];function __(e,t){return[e,y_(t)]}function w_(e,t,n){return[e,y_(t),n]}var x_={},S_=["prefixPath","collectionGroup","readTime","documentId"],E_=["prefixPath","collectionGroup","documentId"],C_=["collectionGroup","readTime","prefixPath","documentId"],I_=["canonicalId","targetId"],T_=["targetId","path"],N_=["path","targetId"],A_=["collectionId","parent"],D_=["indexId","uid"],O_=["uid","sequenceNumber"],R_=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P_=["indexId","uid","orderedDocumentKey"],j_=["userId","collectionPath","documentId"],L_=["userId","collectionPath","largestBatchId"],M_=["userId","collectionGroup","largestBatchId"],F_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),U_=[].concat(h(F_),["documentOverlays"]),B_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],V_=B_,z_=[].concat(V_,["indexConfiguration","indexState","indexEntries"]),q_=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return y(n)}($b);function Z_(e,t){var n=mb(e);return n_.M(n.ht,t)}function W_(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function H_(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function K_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var G_=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Y_.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Y_.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Y_.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Q_(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Q_(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Q_(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Q_(this.root,e,this.comparator,!0)}}]),e}(),Q_=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Y_=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw vb();if(this.right.isRed())throw vb();var e=this.left.check();if(e!==this.right.check())throw vb();return e+(this.isRed()?0:1)}}]),e}();Y_.EMPTY=null,Y_.RED=!0,Y_.BLACK=!1,Y_.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw vb()}},{key:"value",get:function(){throw vb()}},{key:"color",get:function(){throw vb()}},{key:"left",get:function(){throw vb()}},{key:"right",get:function(){throw vb()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Y_(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var $_=function(){function e(t){d(this,e),this.comparator=t,this.data=new G_(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new X_(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new X_(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),X_=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function J_(e){return e.hasNext()?e.getNext():void 0}var ew=function(){function e(t){d(this,e),this.fields=t,t.sort(Ub.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new $_(Ub.comparator),i=N(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(UB){i.e(UB)}finally{i.f()}var o,s=N(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(UB){s.e(UB)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=N(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(UB){n.e(UB)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ob(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),tw=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return y(n)}(E(Error));var nw=function(e){function t(e){d(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Db(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new tw("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();nw.EMPTY_BYTE_STRING=new nw("");var rw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iw(e){if(yb(!!e),"string"==typeof e){var t=0,n=rw.exec(e);if(yb(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:aw(e.seconds),nanos:aw(e.nanos)}}function aw(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ow(e){return"string"==typeof e?nw.fromBase64String(e):nw.fromUint8Array(e)}function sw(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uw(e){var t=e.mapValue.fields.__previous_value__;return sw(t)?uw(t):t}function cw(e){var t=iw(e.mapValue.fields.__local_write_time__.timestampValue);return new Pb(t.seconds,t.nanos)}var lw=y((function e(t,n,r,i,a,o,s,u,c){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=c})),fw=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),hw={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dw={nullValue:"NULL_VALUE"};function pw(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sw(e)?4:Tw(e)?9007199254740991:10:vb()}function vw(e,t){if(e===t)return!0;var n=pw(e);if(n!==pw(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cw(e).isEqual(cw(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=iw(e.timestampValue),r=iw(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ow(e.bytesValue).isEqual(ow(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return aw(e.geoPointValue.latitude)===aw(t.geoPointValue.latitude)&&aw(e.geoPointValue.longitude)===aw(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return aw(e.integerValue)===aw(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=aw(e.doubleValue),r=aw(t.doubleValue);return n===r?p_(n)===p_(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ob(e.arrayValue.values||[],t.arrayValue.values||[],vw);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(W_(n)!==W_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vw(n[i],r[i])))return!1;return!0}(e,t);default:return vb()}}function yw(e,t){return void 0!==(e.values||[]).find((function(e){return vw(e,t)}))}function mw(e,t){if(e===t)return 0;var n=pw(e),r=pw(t);if(n!==r)return Db(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Db(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=aw(e.integerValue||e.doubleValue),r=aw(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gw(e.timestampValue,t.timestampValue);case 4:return gw(cw(e),cw(t));case 5:return Db(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ow(e),r=ow(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Db(n[i],r[i]);if(0!==a)return a}return Db(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Db(aw(e.latitude),aw(t.latitude));return 0!==n?n:Db(aw(e.longitude),aw(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=mw(n[i],r[i]);if(a)return a}return Db(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===hw.mapValue&&t===hw.mapValue)return 0;if(e===hw.mapValue)return 1;if(t===hw.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Db(r[o],a[o]);if(0!==s)return s;var u=mw(n[r[o]],i[a[o]]);if(0!==u)return u}return Db(r.length,a.length)}(e.mapValue,t.mapValue);default:throw vb()}}function gw(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Db(e,t);var n=iw(e),r=iw(t),i=Db(n.seconds,r.seconds);return 0!==i?i:Db(n.nanos,r.nanos)}function kw(e){return bw(e)}function bw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=iw(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ow(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Bb.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=N(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=bw(a)}}catch(UB){i.e(UB)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=N(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(bw(e.fields[a]))}}catch(UB){i.e(UB)}finally{i.f()}return n+"}"}(e.mapValue):vb();var t,n}function _w(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ww(e){return!!e&&"integerValue"in e}function xw(e){return!!e&&"arrayValue"in e}function Sw(e){return!!e&&"nullValue"in e}function Ew(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Cw(e){return!!e&&"mapValue"in e}function Iw(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return H_(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Iw(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Iw(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Tw(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nw(e){return"nullValue"in e?dw:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?_w(fw.empty(),Bb.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:vb()}function Aw(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?_w(fw.empty(),Bb.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?hw:vb()}function Dw(e,t){var n=mw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ow(e,t){var n=mw(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Rw=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Cw(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iw(t)}},{key:"setAll",value:function(e){var t=this,n=Ub.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Iw(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Cw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return vw(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Cw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){H_(t,(function(t,n){return e[t]=n}));var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(UB){i.e(UB)}finally{i.f()}}},{key:"clone",value:function(){return new e(Iw(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Pw(e){var t=[];return H_(e.fields,(function(e,n){var r=new Ub([e]);if(Cw(n)){var i=Pw(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=N(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(UB){o.e(UB)}finally{o.f()}}}else t.push(r)})),new ew(t)}var jw=function(){function e(t,n,r,i,a,o,s){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(jb.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Rw.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Rw.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=jb.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,jb.min(),jb.min(),jb.min(),Rw.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,jb.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,jb.min(),jb.min(),Rw.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,jb.min(),jb.min(),Rw.empty(),2)}}]),e}(),Lw=y((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function Mw(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Bb.comparator(Bb.fromName(o.referenceValue),n.key):mw(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Fw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!vw(e.position[n],t.position[n]))return!1;return!0}var Uw=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function Bw(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Vw=y((function e(){d(this,e)})),zw=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(mw(t,this.value)):null!==t&&pw(this.value)===pw(t)&&this.matchesComparison(mw(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vb()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Xw(e,t,r):"array-contains"===t?new nx(e,r):"in"===t?new rx(e,r):"not-in"===t?new ix(e,r):"array-contains-any"===t?new ax(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Jw(e,n):new ex(e,n)}}]),n}(Vw),qw=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return y(n,[{key:"matches",value:function(e){return Zw(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=N(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(UB){n.e(UB)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Vw);function Zw(e){return"and"===e.op}function Ww(e){return"or"===e.op}function Hw(e){return Kw(e)&&Zw(e)}function Kw(e){var t,n=N(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof qw)return!1}}catch(UB){n.e(UB)}finally{n.f()}return!0}function Gw(e){if(e instanceof zw)return e.field.canonicalString()+e.op.toString()+kw(e.value);if(Hw(e))return e.filters.map((function(e){return Gw(e)})).join(",");var t=e.filters.map((function(e){return Gw(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Qw(e,t){return e instanceof zw?function(e,t){return t instanceof zw&&e.op===t.op&&e.field.isEqual(t.field)&&vw(e.value,t.value)}(e,t):e instanceof qw?function(e,t){return t instanceof qw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Qw(n,t.filters[r])}),!0)}(e,t):void vb()}function Yw(e,t){var n=e.filters.concat(t);return qw.create(n,e.op)}function $w(e){return e instanceof zw?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(kw(e.value))}(e):e instanceof qw?function(e){return e.op.toString()+" {"+e.getFilters().map($w).join(" ,")+"}"}(e):"Filter"}var Xw=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=Bb.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=Bb.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(zw),Jw=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=tx("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zw),ex=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=tx("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zw);function tx(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Bb.fromName(e.referenceValue)}))}var nx=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return xw(t)&&yw(t.arrayValue,this.value)}}]),n}(zw),rx=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&yw(this.value.arrayValue,t)}}]),n}(zw),ix=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(yw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!yw(this.value.arrayValue,t)}}]),n}(zw),ax=function(e){g(n,e);var t=x(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!xw(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return yw(t.value.arrayValue,e)}))}}]),n}(zw),ox=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function sx(e){return new ox(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ux(e){var t=mb(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Gw(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),d_(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return kw(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return kw(e)})).join(",")),t.dt=n}return t.dt}function cx(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Bw(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Qw(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Fw(e.startAt,t.startAt)&&Fw(e.endAt,t.endAt)}function lx(e){return Bb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function fx(e,t){return e.filters.filter((function(e){return e instanceof zw&&e.field.isEqual(t)}))}function hx(e,t,n){var r,i=dw,a=!0,o=N(fx(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=dw,c=!0;switch(s.op){case"<":case"<=":u=Nw(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=dw}Dw({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(UB){o.e(UB)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Dw({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function dx(e,t,n){var r,i=hw,a=!0,o=N(fx(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=hw,c=!0;switch(s.op){case">=":case">":u=Aw(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=hw}Ow({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(UB){o.e(UB)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ow({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var px=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function vx(e,t,n,r,i,a,o,s){return new px(e,t,n,r,i,a,o,s)}function yx(e){return new px(e)}function mx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gx(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kx(e){var t,n=N(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(UB){n.e(UB)}finally{n.f()}return null}function bx(e){return null!==e.collectionGroup}function _x(e){var t=mb(e);if(null===t.wt){t.wt=[];var n=kx(t),r=gx(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Uw(n)),t.wt.push(new Uw(Ub.keyField(),"asc"));else{var i,a=!1,o=N(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(UB){o.e(UB)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Uw(Ub.keyField(),u))}}}return t.wt}function wx(e){var t=mb(e);if(!t._t)if("F"===t.limitType)t._t=sx(t.path,t.collectionGroup,_x(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=N(_x(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Uw(a.field,o))}}catch(UB){i.e(UB)}finally{i.f()}var s=t.endAt?new Lw(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Lw(t.startAt.position,t.startAt.inclusive):null;t._t=sx(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t._t}function xx(e,t){t.getFirstInequalityField(),kx(e);var n=e.filters.concat([t]);return new px(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Sx(e,t,n){return new px(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ex(e,t){return cx(wx(e),wx(t))&&e.limitType===t.limitType}function Cx(e){return"".concat(ux(wx(e)),"|lt:").concat(e.limitType)}function Ix(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return $w(e)})).join(", "),"]")),d_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return kw(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return kw(e)})).join(",")),"Target(".concat(t,")")}(wx(e)),"; limitType=").concat(e.limitType,")")}function Tx(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Bb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=N(_x(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(UB){r.e(UB)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=N(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(UB){r.e(UB)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Mw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,_x(e),t))&&!(e.endAt&&!function(e,t,n){var r=Mw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,_x(e),t))}(e,t)}function Nx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ax(e){return function(t,n){var r,i=!1,a=N(_x(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Dx(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(UB){a.e(UB)}finally{a.f()}return 0}}function Dx(e,t,n){var r=e.field.isKeyField()?Bb.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?mw(r,i):vb()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return vb()}}var Ox=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=(0,u.Z)(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(UB){i.e(UB)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){H_(this.inner,(function(t,n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=(0,u.Z)(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(UB){i.e(UB)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return K_(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Rx=new G_(Bb.comparator);function Px(){return Rx}var jx=new G_(Bb.comparator);function Lx(){for(var e=jx,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Mx(e){var t=jx;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Fx(){return Bx()}function Ux(){return Bx()}function Bx(){return new Ox((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Vx=new G_(Bb.comparator),zx=new $_(Bb.comparator);function qx(){for(var e=zx,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Zx=new $_(Db);function Wx(){return Zx}function Hx(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:p_(t)?"-0":t}}function Kx(e){return{integerValue:""+e}}function Gx(e,t){return v_(t)?Kx(t):Hx(e,t)}var Qx=y((function e(){d(this,e),this._=void 0}));function Yx(e,t,n){return e instanceof Jx?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&sw(t)&&(t=uw(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof eS?tS(e,t):e instanceof nS?rS(e,t):function(e,t){var n=Xx(e,t),r=aS(n)+aS(e.gt);return ww(n)&&ww(e.gt)?Kx(r):Hx(e.serializer,r)}(e,t)}function $x(e,t,n){return e instanceof eS?tS(e,t):e instanceof nS?rS(e,t):n}function Xx(e,t){return e instanceof iS?ww(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Jx=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(Qx),eS=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Qx);function tS(e,t){var n,r=oS(t),i=N(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return vw(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(UB){i.e(UB)}finally{i.f()}return{arrayValue:{values:r}}}var nS=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(Qx);function rS(e,t){var n,r=oS(t),i=N(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!vw(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(UB){i.e(UB)}finally{i.f()}return{arrayValue:{values:r}}}var iS=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return y(n)}(Qx);function aS(e){return aw(e.integerValue||e.doubleValue)}function oS(e){return xw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var sS=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var uS=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),cS=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function lS(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var fS=y((function e(){d(this,e)}));function hS(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new SS(e.key,cS.none()):new mS(e.key,e.data,cS.none());var n,r=e.data,i=Rw.empty(),a=new $_(Ub.comparator),o=N(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(UB){o.e(UB)}finally{o.f()}return new gS(e.key,i,new ew(a.toArray()),cS.none())}function dS(e,t,n){e instanceof mS?function(e,t,n){var r=e.value.clone(),i=bS(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gS?function(e,t,n){if(lS(e.precondition,t)){var r=bS(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(kS(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function pS(e,t,n,r){return e instanceof mS?function(e,t,n,r){if(!lS(e.precondition,t))return n;var i=e.value.clone(),a=_S(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof gS?function(e,t,n,r){if(!lS(e.precondition,t))return n;var i=_S(e.fieldTransforms,r,t),a=t.data;return a.setAll(kS(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return lS(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vS(e,t){var n,r=null,i=N(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Xx(a.transform,o||null);null!=s&&(null===r&&(r=Rw.empty()),r.set(a.field,s))}}catch(UB){i.e(UB)}finally{i.f()}return r||null}function yS(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ob(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof eS&&t instanceof eS||e instanceof nS&&t instanceof nS?Ob(e.elements,t.elements,vw):e instanceof iS&&t instanceof iS?vw(e.gt,t.gt):e instanceof Jx&&t instanceof Jx}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var mS=function(e){g(n,e);var t=x(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fS),gS=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(fS);function kS(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bS(e,t,n){var r=new Map;yb(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,$x(o,s,n[i]))}return r}function _S(e,t,n){var r,i=new Map,a=N(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Yx(s,u,t))}}catch(UB){a.e(UB)}finally{a.f()}return i}var wS,xS,SS=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fS),ES=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fS),CS=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&dS(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=N(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=pS(i,e,t,this.localWriteTime))}}catch(UB){r.e(UB)}finally{r.f()}var a,o=N(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=pS(s,e,t,this.localWriteTime))}}catch(UB){o.e(UB)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ux();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=hS(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(jb.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),qx())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ob(this.mutations,e.mutations,(function(e,t){return yS(e,t)}))&&Ob(this.baseMutations,e.baseMutations,(function(e,t){return yS(e,t)}))}}]),e}(),IS=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){yb(t.mutations.length===r.length);for(var i=Vx,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),TS=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),NS=y((function e(t,n){d(this,e),this.count=t,this.unchangedNames=n}));function AS(e){switch(e){default:return vb();case gb.CANCELLED:case gb.UNKNOWN:case gb.DEADLINE_EXCEEDED:case gb.RESOURCE_EXHAUSTED:case gb.INTERNAL:case gb.UNAVAILABLE:case gb.UNAUTHENTICATED:return!1;case gb.INVALID_ARGUMENT:case gb.NOT_FOUND:case gb.ALREADY_EXISTS:case gb.PERMISSION_DENIED:case gb.FAILED_PRECONDITION:case gb.ABORTED:case gb.OUT_OF_RANGE:case gb.UNIMPLEMENTED:case gb.DATA_LOSS:return!0}}function DS(e){if(void 0===e)return hb("GRPC error has no .code"),gb.UNKNOWN;switch(e){case wS.OK:return gb.OK;case wS.CANCELLED:return gb.CANCELLED;case wS.UNKNOWN:return gb.UNKNOWN;case wS.DEADLINE_EXCEEDED:return gb.DEADLINE_EXCEEDED;case wS.RESOURCE_EXHAUSTED:return gb.RESOURCE_EXHAUSTED;case wS.INTERNAL:return gb.INTERNAL;case wS.UNAVAILABLE:return gb.UNAVAILABLE;case wS.UNAUTHENTICATED:return gb.UNAUTHENTICATED;case wS.INVALID_ARGUMENT:return gb.INVALID_ARGUMENT;case wS.NOT_FOUND:return gb.NOT_FOUND;case wS.ALREADY_EXISTS:return gb.ALREADY_EXISTS;case wS.PERMISSION_DENIED:return gb.PERMISSION_DENIED;case wS.FAILED_PRECONDITION:return gb.FAILED_PRECONDITION;case wS.ABORTED:return gb.ABORTED;case wS.OUT_OF_RANGE:return gb.OUT_OF_RANGE;case wS.UNIMPLEMENTED:return gb.UNIMPLEMENTED;case wS.DATA_LOSS:return gb.DATA_LOSS;default:return vb()}}(xS=wS||(wS={}))[xS.OK=0]="OK",xS[xS.CANCELLED=1]="CANCELLED",xS[xS.UNKNOWN=2]="UNKNOWN",xS[xS.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xS[xS.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xS[xS.NOT_FOUND=5]="NOT_FOUND",xS[xS.ALREADY_EXISTS=6]="ALREADY_EXISTS",xS[xS.PERMISSION_DENIED=7]="PERMISSION_DENIED",xS[xS.UNAUTHENTICATED=16]="UNAUTHENTICATED",xS[xS.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xS[xS.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xS[xS.ABORTED=10]="ABORTED",xS[xS.OUT_OF_RANGE=11]="OUT_OF_RANGE",xS[xS.UNIMPLEMENTED=12]="UNIMPLEMENTED",xS[xS.INTERNAL=13]="INTERNAL",xS[xS.UNAVAILABLE=14]="UNAVAILABLE",xS[xS.DATA_LOSS=15]="DATA_LOSS";var OS=function(){function e(){d(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return y(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return RS}},{key:"getOrCreateInstance",value:function(){return null===RS&&(RS=new e),RS}}]),e}(),RS=null;function PS(){return new TextEncoder}var jS=new ab([4294967295,4294967295],0);function LS(e){var t=PS().encode(e),n=new ib;return n.update(t),new Uint8Array(n.digest())}function MS(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new ab([n,r],0),new ab([i,a],0)]}var FS=function(){function e(t,n,r){if(d(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new US("Invalid padding: ".concat(n));if(r<0)throw new US("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new US("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new US("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=ab.fromNumber(this.It)}return y(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(ab.fromNumber(n)));return 1===r.compare(jS)&&(r=new ab([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=MS(LS(e)),n=(0,u.Z)(t,2),r=n[0],i=n[1],a=0;a<this.hashCount;a++){var o=this.Et(r,i,a);if(!this.At(o))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=MS(LS(e)),n=(0,u.Z)(t,2),r=n[0],i=n[1],a=0;a<this.hashCount;a++){var o=this.Et(r,i,a);this.Rt(o)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),US=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return y(n)}(E(Error)),BS=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,VS.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(jb.min(),i,new G_(Db),Px(),qx())}}]),e}(),VS=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,qx(),qx(),qx())}}]),e}(),zS=y((function e(t,n,r,i){d(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),qS=y((function e(t,n){d(this,e),this.targetId=t,this.Vt=n})),ZS=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nw.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),WS=function(){function e(){d(this,e),this.St=0,this.Dt=GS(),this.Ct=nw.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return y(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=qx(),t=qx(),n=qx();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:vb()}})),new VS(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=GS()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),HS=function(){function e(t){d(this,e),this.Gt=t,this.Qt=new Map,this.jt=Px(),this.zt=KS(),this.Wt=new G_(Db)}return y(e,[{key:"Ht",value:function(e){var t,n=N(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(UB){n.e(UB)}finally{n.f()}var i,a=N(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(UB){a.e(UB)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:vb()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(lx(a))if(0===r){var o=new Bb(a.path);this.Yt(n,o,jw.newNoDocument(o,jb.min()))}else yb(1===r);else{var s=this.ie(n);if(s!==r){var u=this.re(e,s);if(0!==u){this.ee(n);var c=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=OS.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,s,u,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==l?void 0:l.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),c}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,s=r.bits,u=s.bitmap,c=void 0===u?"":u,l=s.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=ow(c).toUint8Array()}catch(e){if(e instanceof tw)return db("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new FS(a,f,d)}catch(e){return db(e instanceof US?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&lx(a.target)){var o=new Bb(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,jw.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=qx();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new BS(e,n,this.Wt,this.jt,r);return this.jt=Px(),this.zt=KS(),this.Wt=new G_(Db),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new WS,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new $_(Db),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||fb("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new WS),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function KS(){return new G_(Bb.comparator)}function GS(){return new G_(Bb.comparator)}var QS={asc:"ASCENDING",desc:"DESCENDING"},YS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$S={and:"AND",or:"OR"},XS=y((function e(t,n){d(this,e),this.databaseId=t,this.useProto3Json=n}));function JS(e,t){return e.useProto3Json||d_(t)?t:{value:t}}function eE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function tE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nE(e,t){return eE(e,t.toTimestamp())}function rE(e){return yb(!!e),jb.fromTimestamp(function(e){var t=iw(e);return new Pb(t.seconds,t.nanos)}(e))}function iE(e,t){return function(e){return new Mb(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function aE(e){var t=Mb.fromString(e);return yb(TE(t)),t}function oE(e,t){return iE(e.databaseId,t.path)}function sE(e,t){var n=aE(t);if(n.get(1)!==e.databaseId.projectId)throw new kb(gb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new kb(gb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bb(fE(n))}function uE(e,t){return iE(e.databaseId,t)}function cE(e){var t=aE(e);return 4===t.length?Mb.emptyPath():fE(t)}function lE(e){return new Mb(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fE(e){return yb(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function hE(e,t,n){return{name:oE(e,t),fields:n.value.mapValue.fields}}function dE(e,t,n){var r=sE(e,t.name),i=rE(t.updateTime),a=t.createTime?rE(t.createTime):jb.min(),o=new Rw({mapValue:{fields:t.fields}}),s=jw.newFoundDocument(r,i,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function pE(e,t){return"found"in t?function(e,t){yb(!!t.found),t.found.name,t.found.updateTime;var n=sE(e,t.found.name),r=rE(t.found.updateTime),i=t.found.createTime?rE(t.found.createTime):jb.min(),a=new Rw({mapValue:{fields:t.found.fields}});return jw.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){yb(!!t.missing),yb(!!t.readTime);var n=sE(e,t.missing),r=rE(t.readTime);return jw.newNoDocument(n,r)}(e,t):vb()}function vE(e,t){var n;if(t instanceof mS)n={update:hE(e,t.key,t.value)};else if(t instanceof SS)n={delete:oE(e,t.key)};else if(t instanceof gS)n={update:hE(e,t.key,t.data),updateMask:IE(t.fieldMask)};else{if(!(t instanceof ES))return vb();n={verify:oE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Jx)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof eS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nS)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof iS)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw vb()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:vb()}(e,t.precondition)),n}function yE(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?cS.updateTime(rE(e.updateTime)):void 0!==e.exists?cS.exists(e.exists):cS.none()}(t.currentDocument):cS.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)yb("REQUEST_TIME"===t.setToServerValue),n=new Jx;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new eS(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nS(i)}else"increment"in t?n=new iS(e,t.increment):vb();var a=Ub.fromServerFormat(t.fieldPath);return new sS(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=sE(e,t.update.name),a=new Rw({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ew(t.map((function(e){return Ub.fromServerFormat(e)})))}(t.updateMask);return new gS(i,a,o,n,r)}return new mS(i,a,n,r)}if(t.delete){var s=sE(e,t.delete);return new SS(s,n)}if(t.verify){var u=sE(e,t.verify);return new ES(u,n)}return vb()}function mE(e,t){return{documents:[uE(e,t.path)]}}function gE(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=uE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=uE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return CE(qw.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:SE(e.field),direction:_E(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=JS(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function kE(e){var t=cE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yb(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=bE(e);return t instanceof qw&&Hw(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Uw(EE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return d_(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Lw(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Lw(n,t)}(n.endAt)),vx(t,i,s,o,u,"F",c,l)}function bE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=EE(e.unaryFilter.field);return zw.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=EE(e.unaryFilter.field);return zw.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=EE(e.unaryFilter.field);return zw.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=EE(e.unaryFilter.field);return zw.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vb()}}(e):void 0!==e.fieldFilter?function(e){return zw.create(EE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vb()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qw.create(e.compositeFilter.filters.map((function(e){return bE(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vb()}}(e.compositeFilter.op))}(e):vb()}function _E(e){return QS[e]}function wE(e){return YS[e]}function xE(e){return $S[e]}function SE(e){return{fieldPath:e.canonicalString()}}function EE(e){return Ub.fromServerFormat(e.fieldPath)}function CE(e){return e instanceof zw?function(e){if("=="===e.op){if(Ew(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NAN"}};if(Sw(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ew(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NOT_NAN"}};if(Sw(e.value))return{unaryFilter:{field:SE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:SE(e.field),op:wE(e.op),value:e.value}}}(e):e instanceof qw?function(e){var t=e.getFilters().map((function(e){return CE(e)}));return 1===t.length?t[0]:{compositeFilter:{op:xE(e.op),filters:t}}}(e):vb()}function IE(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function TE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var NE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jb.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:jb.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:nw.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),AE=y((function e(t){d(this,e),this.fe=t}));function DE(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:OE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:oE(e,t.key),fields:t.data.value.mapValue.fields,updateTime:eE(e,t.version.toTimestamp()),createTime:eE(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:RE(t.version)};else{if(!t.isUnknownDocument())return vb();r.unknownDocument={path:n.path.toArray(),version:RE(t.version)}}return r}function OE(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function RE(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function PE(e){var t=new Pb(e.seconds,e.nanoseconds);return jb.fromTimestamp(t)}function jE(e,t){for(var n=(t.baseMutations||[]).map((function(t){return yE(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return yE(e.fe,t)})),s=Pb.fromMillis(t.localWriteTimeMs);return new CS(t.batchId,s,n,o)}function LE(e){var t,n,r=PE(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?PE(e.lastLimboFreeSnapshotVersion):jb.min();return void 0!==e.query.documents?(yb(1===(n=e.query).documents.length),t=wx(yx(cE(n.documents[0])))):t=function(e){return wx(kE(e))}(e.query),new NE(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,nw.fromBase64String(e.resumeToken))}function ME(e,t){var n,r=RE(t.snapshotVersion),i=RE(t.lastLimboFreeSnapshotVersion);n=lx(t.target)?mE(e.fe,t.target):gE(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ux(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function FE(e){var t=kE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Sx(t,t.limit,"L"):t}function UE(e,t){return new TS(t.largestBatchId,yE(e.fe,t.overlayMutation))}function BE(e,t){var n=t.path.lastSegment();return[e,y_(t.path.popLast()),n]}function VE(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:RE(r.readTime),documentKey:y_(r.documentKey.path),largestBatchId:r.largestBatchId}}var zE=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return qE(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:PE(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return qE(e).put({bundleId:(n=t).id,createTime:RE(rE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ZE(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:FE(t.bundledQuery),readTime:PE(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ZE(e).put(function(e){return{name:e.name,readTime:RE(rE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function qE(e){return Z_(e,"bundles")}function ZE(e){return Z_(e,"namedQueries")}var WE=function(){function e(t,n){d(this,e),this.serializer=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return HE(e).get(BE(this.userId,t)).next((function(e){return e?UE(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Fx();return e_.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new TS(t,a);i.push(r.we(e,o))})),e_.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(y_(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(HE(e).J("collectionPathOverlayIndex",i))})),e_.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Fx(),a=y_(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return HE(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=UE(r.serializer,a);i.set(o.getKey(),o)}}catch(UB){n.e(UB)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Fx(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return HE(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=UE(a.serializer,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return HE(e).put(function(e,t,n){var r=BE(t,n.mutation.key),i=(0,u.Z)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:vE(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function HE(e){return Z_(e,"documentOverlays")}var KE=function(){function e(){d(this,e)}return y(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(aw(e.integerValue));else if("doubleValue"in e){var n=aw(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),p_(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ow(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Tw(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):vb()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(UB){i.e(UB)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Bb.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function GE(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function QE(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=GE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}KE.Ve=new KE;var YE=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(UB){n.e(UB)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(UB){n.e(UB)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=QE(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=QE(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),$E=function(){function e(t){d(this,e),this.je=t}return y(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),XE=function(){function e(t){d(this,e),this.je=t}return y(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),JE=function(){function e(){d(this,e),this.je=new YE,this.ze=new $E(this.je),this.We=new XE(this.je)}return y(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),eC=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function tC(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=nC(e.arrayValue,t.arrayValue))?n:0!==(n=nC(e.directionalValue,t.directionalValue))?n:Bb.comparator(e.documentKey,t.documentKey)}function nC(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var rC=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=N(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(UB){r.e(UB)}finally{r.f()}}return y(e,[{key:"tn",value:function(e){yb(e.collectionGroup===this.collectionId);var t=zb(e);if(void 0!==t&&!this.en(t))return!1;for(var n=qb(e),r=new Set,i=0,a=0;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){var o=n[i];if(!this.nn(this.Ze,o)||!this.sn(this.Ye[a++],o))return!1}++i}for(;i<n.length;++i){var s=n[i];if(a>=this.Ye.length||!this.sn(this.Ye[a++],s))return!1}return!0}},{key:"en",value:function(e){var t,n=N(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(UB){n.e(UB)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function iC(e){var t,n;if(yb(e instanceof zw||e instanceof qw),e instanceof zw){if(e instanceof rx){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return zw.create(e.field,"==",t)})))||[];return qw.create(r,"or")}return e}var i=e.filters.map((function(e){return iC(e)}));return qw.create(i,e.op)}function aC(e){if(0===e.getFilters().length)return[];var t=cC(iC(e));return yb(uC(t)),oC(t)||sC(t)?[t]:t.getFilters()}function oC(e){return e instanceof zw}function sC(e){return e instanceof qw&&Hw(e)}function uC(e){return oC(e)||sC(e)||function(e){if(e instanceof qw&&Ww(e)){var t,n=N(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!oC(r)&&!sC(r))return!1}}catch(UB){n.e(UB)}finally{n.f()}return!0}return!1}(e)}function cC(e){if(yb(e instanceof zw||e instanceof qw),e instanceof zw)return e;if(1===e.filters.length)return cC(e.filters[0]);var t=e.filters.map((function(e){return cC(e)})),n=qw.create(t,e.op);return uC(n=hC(n))?n:(yb(n instanceof qw),yb(Zw(n)),yb(n.filters.length>1),n.filters.reduce((function(e,t){return lC(e,t)})))}function lC(e,t){var n;return yb(e instanceof zw||e instanceof qw),yb(t instanceof zw||t instanceof qw),n=e instanceof zw?t instanceof zw?function(e,t){return qw.create([e,t],"and")}(e,t):fC(e,t):t instanceof zw?fC(t,e):function(e,t){if(yb(e.filters.length>0&&t.filters.length>0),Zw(e)&&Zw(t))return Yw(e,t.getFilters());var n=Ww(e)?e:t,r=Ww(e)?t:e,i=n.filters.map((function(e){return lC(e,r)}));return qw.create(i,"or")}(e,t),hC(n)}function fC(e,t){if(Zw(t))return Yw(t,e.getFilters());var n=t.filters.map((function(t){return lC(e,t)}));return qw.create(n,"or")}function hC(e){if(yb(e instanceof zw||e instanceof qw),e instanceof zw)return e;var t=e.getFilters();if(1===t.length)return hC(t[0]);if(Kw(e))return e;var n=t.map((function(e){return hC(e)})),r=[];return n.forEach((function(t){t instanceof zw?r.push(t):t instanceof qw&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:qw.create(r,e.op)}var dC=function(){function e(){d(this,e),this.rn=new pC}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),e_.resolve()}},{key:"getCollectionParents",value:function(e,t){return e_.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return e_.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return e_.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return e_.resolve(null)}},{key:"getIndexType",value:function(e,t){return e_.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return e_.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return e_.resolve(null)}},{key:"getMinOffset",value:function(e,t){return e_.resolve(Gb.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return e_.resolve(Gb.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return e_.resolve()}},{key:"updateIndexEntries",value:function(e,t){return e_.resolve()}}]),e}(),pC=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $_(Mb.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new $_(Mb.comparator)).toArray()}}]),e}(),vC=new Uint8Array(0),yC=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.on=new pC,this.un=new Ox((function(e){return ux(e)}),(function(e,t){return cx(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:y_(i)};return mC(e).put(a)}return e_.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Rb(t),""],!1,!0);return mC(e).j(r).next((function(e){var r,i=N(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(k_(a.parent))}}catch(UB){i.e(UB)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=kC(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=bC(e);return a.next((function(e){o.put(VE(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=kC(e),r=bC(e),i=gC(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=gC(e),i=!0,a=new Map;return e_.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=qx(),o=[];return e_.forEach(a,(function(i,a){var s;fb("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ux(t)));var u=function(e,t){var n=zb(t);if(void 0===n)return null;var r,i=N(fx(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(UB){i.e(UB)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=N(qb(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=N(fx(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(UB){s.e(UB)}finally{s.f()}}}catch(UB){i.e(UB)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=N(qb(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?hx(e,o.fieldPath,e.startAt):dx(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(UB){a.e(UB)}finally{a.f()}return new Lw(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=N(qb(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?dx(e,o.fieldPath,e.endAt):hx(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(UB){a.e(UB)}finally{a.f()}return new Lw(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,u,h,l.inclusive,d,f.inclusive,p);return e_.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Bb.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return e_.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:aC(qw.create(e.filters,"and")).map((function(t){return sx(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,i.length),c=u/(null!=t?t.length:1),l=[],f=function(){var u=t?s.dn(t[d/c]):vC,f=s.wn(e,u,n[d%c],r),p=s._n(e,u,i[d%c],a),v=o.map((function(t){return s.wn(e,u,t,!0)}));l.push.apply(l,h(s.createRange(f,p,v)))},d=0;d<u;++d)f();return l}},{key:"wn",value:function(e,t,n,r){var i=new eC(e,Bb.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new eC(e,Bb.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new rC(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=N(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(UB){i.e(UB)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return e_.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new $_(Ub.comparator),r=!1,i=N(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=N(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?r=!0:n=n.add(s.field))}}catch(UB){o.e(UB)}finally{o.f()}}}catch(UB){i.e(UB)}finally{i.f()}var u,c=N(e.orderBy);try{for(c.s();!(u=c.n()).done;){var l=u.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(UB){c.e(UB)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new JE,i=N(qb(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.He(a.kind);KE.Ve._e(o,s)}}catch(UB){i.e(UB)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new JE;return KE.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new JE;return KE.Ve._e(_w(this.databaseId,t),n.He(function(e){var t=qb(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new JE);var i,a=0,o=N(qb(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=N(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.yn(t,u.fieldPath)&&xw(c))r=this.pn(r,u,c);else{var h=f.He(u.kind);KE.Ve._e(c,h)}}}catch(UB){l.e(UB)}finally{l.f()}}}catch(UB){o.e(UB)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=h(e),a=[],o=N(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=N(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new JE;f.seed(l.Qe()),KE.Ve._e(u,f.He(t.kind)),a.push(f)}}catch(UB){c.e(UB)}finally{c.f()}}}catch(UB){o.e(UB)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof zw&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=kC(e),i=bC(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return e_.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Wb(t.sequenceNumber,new Gb(PE(t.readTime),new Bb(k_(t.documentKey)),t.largestBatchId)):Wb.empty(),r=e.fields.map((function(e){var t=(0,u.Z)(e,2),n=t[0],r=t[1];return new Zb(Ub.fromServerFormat(n),r)}));return new Vb(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Db(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=kC(e),a=bC(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return e_.forEach(t,(function(t){return a.put(VE(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return e_.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?e_.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),e_.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?e_.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return gC(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return gC(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=gC(e),i=new $_(tC);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new eC(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new $_(tC),r=this.mn(t,e);if(null==r)return n;var i=zb(t);if(null!=i){var a=e.data.field(i.fieldPath);if(xw(a)){var o,s=N(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new eC(t.indexId,e.key,this.dn(u),r))}}catch(UB){s.e(UB)}finally{s.f()}}}else n=n.add(new eC(t.indexId,e.key,vC,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;fb("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=J_(a),u=J_(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=J_(o)):l?(i(s),s=J_(a)):(s=J_(a),u=J_(o))}}(r,i,tC,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),e_.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return bC(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return tC(e,t)})).filter((function(e,t,n){return!t||0!==tC(e,n[t-1])}));var r=[];r.push(e);var i,a=N(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=tC(o,e),u=tC(o,t);if(0===s)r[0]=e.Je();else if(s>0&&u<0)r.push(o),r.push(o.Je());else if(u>0)break}}catch(UB){a.e(UB)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,vC,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,vC,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return tC(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(_C)}},{key:"getMinOffset",value:function(e,t){var n=this;return e_.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||vb()}))})).next(_C)}}]),e}();function mC(e){return Z_(e,"collectionParents")}function gC(e){return Z_(e,"indexEntries")}function kC(e){return Z_(e,"indexConfiguration")}function bC(e){return Z_(e,"indexState")}function _C(e){yb(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Qb(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Gb(t.readTime,t.documentKey,n)}var wC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xC=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function SC(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){yb(1===s)})));var c,l=[],f=N(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=w_(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(UB){f.e(UB)}finally{f.f()}return e_.waitFor(a).next((function(){return l}))}function EC(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw vb();t=e.noDocument}return JSON.stringify(t).length}xC.DEFAULT_COLLECTION_PERCENTILE=10,xC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xC.DEFAULT=new xC(41943040,xC.DEFAULT_COLLECTION_PERCENTILE,xC.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xC.DISABLED=new xC(-1,0,0);var CC=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return TC(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=NC(e),o=TC(e);return o.add({}).next((function(s){yb("number"==typeof s);var u,c=new CS(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return vE(e.fe,t)})),i=n.mutations.map((function(t){return vE(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new $_((function(e,t){return Db(e.canonicalString(),t.canonicalString())})),d=N(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=w_(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,x_))}}catch(UB){d.e(UB)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[s]=c.keys()})),e_.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return TC(e).get(t).next((function(e){return e?(yb(e.userId===n.userId),jE(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?e_.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return TC(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(yb(t.batchId>=r),a=jE(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return TC(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return TC(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return jE(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=__(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return NC(e).X({range:i},(function(r,i,o){var s=(0,u.Z)(r,3),c=s[0],l=s[1],f=s[2],h=k_(l);if(c===n.userId&&t.path.isEqual(h))return TC(e).get(f).next((function(e){if(!e)throw vb();yb(e.userId===n.userId),a.push(jE(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $_(Db),i=[];return t.forEach((function(t){var a=__(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=NC(e).X({range:o},(function(e,i,a){var o=(0,u.Z)(e,3),s=o[0],c=o[1],l=o[2],f=k_(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(s)})),e_.waitFor(i).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=__(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new $_(Db);return NC(e).X({range:o},(function(e,t,a){var o=(0,u.Z)(e,3),c=o[0],l=o[1],f=o[2],h=k_(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(f)):a.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(TC(e).get(t).next((function(e){if(null===e)throw vb();yb(e.userId===n.userId),r.push(jE(n.serializer,e))})))})),e_.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return SC(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),e_.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return e_.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return NC(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=k_(e[1]);i.push(a)}else r.done()})).next((function(){yb(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return IC(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return AC(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return yb(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function IC(e,t,n){var r=__(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return NC(e).X({range:a,Y:!0},(function(e,n,r){var a=(0,u.Z)(e,3),s=a[0],c=a[1];a[2];s===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function TC(e){return Z_(e,"mutations")}function NC(e){return Z_(e,"documentMutations")}function AC(e){return Z_(e,"mutationQueues")}var DC=function(){function e(t){d(this,e),this.Nn=t}return y(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),OC=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.serializer=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new DC(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return jb.fromTimestamp(new Pb(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return RC(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return yb(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return RC(e).X((function(o,s){var u=LE(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return e_.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return RC(e).X((function(e,n){var r=LE(n);t(r)}))}},{key:"$n",value:function(e){return PC(e).get("targetGlobalKey").next((function(e){return yb(null!==e),e}))}},{key:"On",value:function(e,t){return PC(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return RC(e).put(ME(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ux(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return RC(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=LE(n);cx(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=jC(e);return t.forEach((function(t){var o=y_(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),e_.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=jC(e);return e_.forEach(t,(function(t){var a=y_(t.path);return e_.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=jC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=jC(e),i=qx();return r.X({range:n,Y:!0},(function(e,t,n){var r=k_(e[1]),a=new Bb(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=y_(t.path),r=IDBKeyRange.bound([n],[Rb(n)],!1,!0),i=0;return jC(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=(0,u.Z)(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"le",value:function(e,t){return RC(e).get(t).next((function(e){return e?LE(e):null}))}}]),e}();function RC(e){return Z_(e,"targets")}function PC(e){return Z_(e,"targetGlobal")}function jC(e){return Z_(e,"targetDocuments")}function LC(e,t){var n=(0,u.Z)(e,2),r=n[0],i=n[1],a=(0,u.Z)(t,2),o=a[0],s=a[1],c=Db(r,o);return 0===c?Db(i,s):c}var MC=function(){function e(t){d(this,e),this.Ln=t,this.buffer=new $_(LC),this.qn=0}return y(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();LC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),FC=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;fb("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!a_(e.t0)){e.next=12;break}fb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Xb(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),UC=function(){function e(t,n){d(this,e),this.jn=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return e_.resolve(h_.ct);var r=new MC(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(fb("LruGarbageCollector","Garbage collection skipped; disabled"),e_.resolve(wC)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(fb("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),wC):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(fb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),lb()<=Fa.DEBUG&&fb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),e_.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function BC(e,t){return new UC(e,t)}var VC=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=BC(this,n)}return y(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return zC(e,n)}},{key:"removeReference",value:function(e,t,n){return zC(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return zC(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return AC(e).Z((function(r){return IC(e,r,t).next((function(e){return e&&(n=!0),e_.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,jb.min()),jC(e).delete([0,y_(o.path)])}))}));i.push(u)}})).next((function(){return e_.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return zC(e,t)}},{key:"Yn",value:function(e,t){var n,r=jC(e),i=h_.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var a=(0,u.Z)(e,2),o=a[0],s=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==h_.ct&&t(new Bb(k_(n)),i),i=c,n=s):i=h_.ct})).next((function(){i!==h_.ct&&t(new Bb(k_(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function zC(e,t){return jC(e).put(function(e,t){return{targetId:0,path:y_(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var qC=function(){function e(){d(this,e),this.changes=new Ox((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,jw.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?e_.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ZC=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return GC(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return GC(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],OE(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=jw.newInvalidDocument(t);return GC(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(QC(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:jw.newInvalidDocument(t)};return GC(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(QC(t))},(function(e,i){r={document:n.ts(t,i),size:EC(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Px();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=Px(),i=new G_(Bb.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,EC(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return e_.resolve();var r=new $_($C);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(QC(r.first()),QC(r.last())),a=r.getIterator(),o=a.getNext();return GC(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Bb.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&$C(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(QC(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),OE(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return GC(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=Px(),o=N(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=i.ts(Bb.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(Tx(t,u)||r.has(u.key))&&(a=a.insert(u.key,u))}}catch(UB){o.e(UB)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Px(),o=YC(t,n),s=YC(t,Gb.max());return GC(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.ts(Bb.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new HC(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return KC(e).get("remoteDocumentGlobalKey").next((function(e){return yb(!!e),e}))}},{key:"Zn",value:function(e,t){return KC(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=dE(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Bb.fromSegments(t.noDocument.path),i=PE(t.noDocument.readTime);n=jw.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return vb();var a=Bb.fromSegments(t.unknownDocument.path),o=PE(t.unknownDocument.version);n=jw.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Pb(e[0],e[1]);return jb.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(jb.min()))return n}return jw.newInvalidDocument(e)}}]),e}();function WC(e){return new ZC(e)}var HC=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new Ox((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new $_((function(e,t){return Db(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.us.get(a);if(n.push(t.os.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=DE(t.os.serializer,o);i=i.add(a.path.popLast());var c=EC(u);r+=c-s.size,n.push(t.os.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=DE(t.os.serializer,o.convertToNoDocument(jb.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),e_.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(qC);function KC(e){return Z_(e,"remoteDocumentGlobal")}function GC(e){return Z_(e,"remoteDocumentsV14")}function QC(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function YC(e,t){var n=t.documentKey.path.toArray();return[e,OE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $C(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Db(n[a],r[a]))return i;return(i=Db(n.length,r.length))||((i=Db(n[n.length-2],r[r.length-2]))||Db(n[n.length-1],r[r.length-1]))}var XC=y((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),JC=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&pS(r.mutation,e,ew.empty(),Pb.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,qx()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qx(),i=Fx();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Lx();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Fx();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,qx())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Px(),a=Bx(),o=Bx();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof gS)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),pS(o.mutation,t,o.mutation.getFieldMask(),Pb.now())):a.set(t.key,ew.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new XC(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Bx(),i=new G_((function(e,t){return e-t})),a=qx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=N(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ew.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||qx()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(UB){a.e(UB)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=Ux();c.forEach((function(e){if(!a.has(e)){var n=hS(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return e_.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Bb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):e_.resolve(Fx()),s=-1,u=a;return o.next((function(t){return e_.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?e_.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,qx())})).next((function(e){return{batchId:s,changes:Mx(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Bb(t)).next((function(e){var t=Lx();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Lx();return this.indexManager.getCollectionParents(e,i).next((function(o){return e_.forEach(o,(function(o){var s=function(e,t){return new px(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,jw.newInvalidDocument(r)))}));var n=Lx();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&pS(a.mutation,i,ew.empty(),Pb.now()),Tx(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),eI=function(){function e(t){d(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return e_.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:rE(n.createTime)}),e_.resolve()}},{key:"getNamedQuery",value:function(e,t){return e_.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:FE(e.bundledQuery),readTime:rE(e.readTime)}}(t)),e_.resolve()}}]),e}(),tI=function(){function e(){d(this,e),this.overlays=new G_(Bb.comparator),this.ls=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return e_.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Fx();return e_.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),e_.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),e_.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Fx(),i=t.length+1,a=new Bb(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return e_.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new G_((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=Fx(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Fx(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return e_.resolve(u)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new TS(t,n));var a=this.ls.get(t);void 0===a&&(a=qx(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),nI=function(){function e(){d(this,e),this.fs=new $_(rI.ds),this.ws=new $_(rI._s)}return y(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new rI(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new rI(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Bb(new Mb([])),r=new rI(n,e),i=new rI(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Bb(new Mb([])),n=new rI(t,e),r=new rI(t,e+1),i=qx();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new rI(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),rI=function(){function e(t,n){d(this,e),this.key=t,this.As=n}return y(e,null,[{key:"ds",value:function(e,t){return Bb.comparator(e.key,t.key)||Db(e.As,t.As)}},{key:"_s",value:function(e,t){return Db(e.As,t.As)||Bb.comparator(e.key,t.key)}}]),e}(),iI=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new $_(rI.ds)}return y(e,[{key:"checkEmpty",value:function(e){return e_.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new CS(i,t,n,r);this.mutationQueue.push(a);var o,s=N(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new rI(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(UB){s.e(UB)}finally{s.f()}return e_.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return e_.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return e_.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return e_.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return e_.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new rI(t,0),i=new rI(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),e_.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $_(Db);return t.forEach((function(e){var t=new rI(e,0),i=new rI(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),e_.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Bb.isDocumentKey(i)||(i=i.child(""));var a=new rI(new Bb(i),0),o=new $_(Db);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),e_.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;yb(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return e_.forEach(t.mutations,(function(i){var a=new rI(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new rI(t,0),r=this.Rs.firstAfterOrEqual(n);return e_.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,e_.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),aI=function(){function e(t){d(this,e),this.Ds=t,this.docs=new G_(Bb.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return e_.resolve(n?n.document.mutableCopy():jw.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Px();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():jw.newInvalidDocument(e))})),e_.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Px(),a=t.path,o=new Bb(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),c=u.key,l=u.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Qb(Kb(l),n)<=0||(r.has(l.key)||Tx(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return e_.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){vb()}},{key:"Cs",value:function(e,t){return e_.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new oI(this)}},{key:"getSize",value:function(e){return e_.resolve(this.size)}}]),e}(),oI=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).os=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),e_.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(qC),sI=function(){function e(t){d(this,e),this.persistence=t,this.xs=new Ox((function(e){return ux(e)}),cx),this.lastRemoteSnapshotVersion=jb.min(),this.highestTargetId=0,this.Ns=0,this.ks=new nI,this.targetCount=0,this.Ms=DC.kn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),e_.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return e_.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return e_.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),e_.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),e_.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new DC(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,e_.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),e_.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,e_.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),e_.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return e_.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return e_.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),e_.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),e_.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),e_.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return e_.resolve(n)}},{key:"containsKey",value:function(e,t){return e_.resolve(this.ks.containsKey(t))}}]),e}(),uI=function(){function e(t,n){var r=this;d(this,e),this.$s={},this.overlays={},this.Os=new h_(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new sI(this),this.indexManager=new dC,this.remoteDocumentCache=new aI((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new AE(n),this.qs=new eI(this.serializer)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new tI,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new iI(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;fb("MemoryPersistence","Starting transaction:",e);var i=new cI(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return e_.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),cI=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}($b),lI=function(){function e(t){d(this,e),this.persistence=t,this.Qs=new nI,this.js=null}return y(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw vb()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),e_.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),e_.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),e_.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return e_.forEach(this.Ws,(function(r){var i=Bb.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,jb.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return e_.or([function(){return e_.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),fI=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new t_("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b_,{unique:!0}),e.createObjectStore("documentMutations")}(e),hI(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=e_.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hI(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:jb.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",b_,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return e_.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:j_});t.createIndex("collectionPathOverlayIndex",L_,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",M_,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:S_});t.createIndex("documentKeyIndex",E_),t.createIndex("collectionGroupIndex",C_)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:D_}).createIndex("sequenceNumberIndex",O_,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:R_}).createIndex("documentKeyIndex",P_,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=EC(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return e_.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return e_.forEach(r,(function(r){yb(r.userId===n.userId);var i=jE(t.serializer,r);return SC(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Mb(n),o=function(e){return[0,y_(e)]}(a);r.push(t.get(o).next((function(n){return n?e_.resolve():function(n){return t.put({targetId:0,path:y_(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return e_.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:A_});var n=t.store("collectionParents"),r=new pC,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:y_(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Mb(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=(0,u.Z)(e,3),r=(n[0],n[1]),a=(n[2],k_(r));return i(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=LE(r),a=ME(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Bb(Mb.fromString(i.document.name).popFirst(5)):i.noDocument?Bb.fromSegments(i.noDocument.path):i.unknownDocument?Bb.fromSegments(i.unknownDocument.path):vb()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return e_.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=WC(this.serializer),a=new uI(lI.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:qx();jE(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),e_.forEach(r,(function(e,r){var o=new sb(r),s=WE.de(n.serializer,o),u=a.getIndexManager(o),c=CC.de(o,n.serializer,u,a.referenceDelegate);return new JC(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new q_(t,h_.ct),e).next()}))}))}}]),e}();function hI(e){e.createObjectStore("targetDocuments",{keyPath:T_}).createIndex("documentTargetsIndex",N_,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",I_,{unique:!0}),e.createObjectStore("targetGlobal")}var dI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pI=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=s,this.ri=c,this.oi=l,this.ui=f,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new kb(gb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new VC(this,i),this.di=n+"main",this.serializer=new AE(u),this.wi=new n_(this.di,this.ui,new fI(this.serializer)),this.Bs=new OC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=WC(this.serializer),this.qs=new zE,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===l&&hb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new kb(gb.FAILED_PRECONDITION,dI);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new h_(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=(0,s.Z)((0,o.Z)().mark((function n(r){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=(0,s.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return yI(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(a_(t))return fb("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return fb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return vI(e).get("owner").next((function(e){return e_.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return yI(e).delete(this.clientId)}},{key:"bi",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Z_(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return e_.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=N(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(UB){n.e(UB)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?e_.resolve(!0):vI(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new kb(gb.FAILED_PRECONDITION,dI);return!1}}return!(!t.networkEnabled||!t.inForeground)||yI(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&fb("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new q_(e,h_.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return yI(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return CC.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new yC(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return WE.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;fb("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.ui)?z_:14===i?V_:13===i?B_:12===i?U_:11===i?F_:void vb();return this.wi.runTransaction(e,o,s,(function(i){return a=new q_(i,r.Os?r.Os.next():h_.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw hb("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new kb(gb.FAILED_PRECONDITION,Yb);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return vI(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new kb(gb.FAILED_PRECONDITION,dI)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vI(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=vI(e);return n.get("owner").next((function(e){return t.Ri(e)?(fb("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):e_.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(hb("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!ca()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return fb("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return hb("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){hb("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return n_.D()}}]),e}();function vI(e){return Z_(e,"owner")}function yI(e){return Z_(e,"clientMetadata")}function mI(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gI=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return y(e,null,[{key:"Li",value:function(t,n){var r,i=qx(),a=qx(),o=N(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(UB){o.e(UB)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),kI=function(){function e(){d(this,e),this.qi=!1}return y(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(mx(t))return e_.resolve(null);var r=wx(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Sx(t,null,"F"),r=wx(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=qx.apply(void 0,h(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Sx(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return mx(t)||r.isEqual(jb.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(lb()<=Fa.DEBUG&&fb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ix(t)),i.Wi(e,o,t,Hb(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new $_(Ax(e));return t.forEach((function(t,r){Tx(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return lb()<=Fa.DEBUG&&fb("QueryEngine","Using full collection scan to execute query:",Ix(t)),this.Ui.getDocumentsMatchingQuery(e,t,Gb.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),bI=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new G_(Db),this.Yi=new Ox((function(e){return ux(e)}),cx),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return y(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new JC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function _I(e,t,n,r){return new bI(e,t,n,r)}function wI(e,t){return xI.apply(this,arguments)}function xI(){return(xI=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=qx(),u=N(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=N(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(UB){f.e(UB)}finally{f.f()}}}catch(UB){u.e(UB)}finally{u.f()}var d,p=N(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=N(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(UB){m.e(UB)}finally{m.f()}}}catch(UB){p.e(UB)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SI(e,t){var n=mb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=e_.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);yb(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=qx(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function EI(e){var t=mb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function CI(e,t){var n=mb(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(nw.EMPTY_BYTE_STRING,jb.min()).withLastLimboFreeSnapshotVersion(jb.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var s=Px(),u=qx();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(II(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!r.isEqual(jb.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return e_.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=i,e}))}function II(e,t,n){var r=qx(),i=qx();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Px();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(jb.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):fb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function TI(e,t){var n=mb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function NI(e,t){var n=mb(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,e_.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new NE(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function AI(e,t,n){return DI.apply(this,arguments)}function DI(){return(DI=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=mb(t),a=i.Ji.get(n),s=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",s,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),a_(e.t1)){e.next=12;break}throw e.t1;case 12:fb("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function OI(e,t,n){var r=mb(e),i=jb.min(),a=qx();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=mb(e),i=r.Yi.get(n);return void 0!==i?e_.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,wx(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:jb.min(),n?a:qx())})).next((function(e){return jI(r,Nx(t),e),{documents:e,ir:a}}))}))}function RI(e,t){var n=mb(e),r=mb(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function PI(e,t){var n=mb(e),r=n.Xi.get(t)||jb.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Hb(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return jI(n,t,e),e}))}function jI(e,t,n){var r=e.Xi.get(t)||jb.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function LI(e,t,n,r){return MI.apply(this,arguments)}function MI(){return MI=(0,s.Z)((0,o.Z)().mark((function e(t,n,r,i){var a,s,u,c,l,f,h,d,p,v;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=mb(t),s=qx(),u=Px(),c=N(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.rr(f.metadata.name),f.document&&(s=s.add(h)),(d=n.ur(f)).setReadTime(n.cr(f.metadata.readTime)),u=u.insert(h,d)}catch(UB){c.e(UB)}finally{c.f()}return p=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,NI(a,function(e){return wx(yx(Mb.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return II(e,p,u).next((function(t){return p.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return a.Bs.addMatchingKeys(e,s,v.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),MI.apply(this,arguments)}function FI(e,t){return UI.apply(this,arguments)}function UI(){return UI=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:qx(),e.next=3,NI(t,wx(FE(n.bundledQuery)));case 3:return i=e.sent,a=mb(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=rE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(nw.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),UI.apply(this,arguments)}function BI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function VI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function zI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var qI=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new kb(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(hb("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ZI=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kb(i.error.code,i.error.message))),a?new e(t,i.state,r):(hb("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),WI=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Wx(),o=0;i&&o<r.activeTargetIds.length;++o)i=v_(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(hb("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),HI=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(hb("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),KI=function(){function e(){d(this,e),this.activeTargetIds=Wx()}return y(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),GI=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new G_(Db),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=BI(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new KI),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return y(e,[{key:"start",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a,s,u,c,l,f,h,d=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=N(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(BI(this.persistenceKey,i)))&&(s=WI.ar(i,a))&&(this.gr=this.gr.insert(s.clientId,s));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(c=this.br(u))&&this.Vr(c),l=N(this.yr);try{for(l.s();!(f=l.n()).done;)h=f.value,this.mr(h)}catch(UB){l.e(UB)}finally{l.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(zI(this.persistenceKey,e));if(n){var r=ZI.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(zI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return fb("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){fb("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){fb("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(fb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void hb("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,s.Z)((0,o.Z)().mark((function e(){var r,i,a,s,u,c,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(s=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(s));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}c=function(e){var t=h_.ct;if(null!=e)try{var n=JSON.parse(e);yb("number"==typeof n),t=n}catch(e){hb("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==h_.ct&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return l=t.Gr(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new qI(this.currentUser,e,t,n),i=VI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=VI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=zI(this.persistenceKey,e),i=new ZI(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return WI.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qI.ar(new sb(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return ZI.ar(r,t)}},{key:"br",value:function(e){return HI.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:fb("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Wr(o,s).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Wx();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),QI=function(){function e(){d(this,e),this.Hr=new KI,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new KI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),YI=function(){function e(){d(this,e)}return y(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),$I=function(){function e(){var t=this;d(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return y(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){fb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=N(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(UB){t.e(UB)}finally{t.f()}}},{key:"no",value:function(){fb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=N(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(UB){t.e(UB)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),XI=null;function JI(){return null===XI?XI=268435456+Math.round(2147483648*Math.random()):XI++,"0x"+XI.toString(16)}var eT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},tT=function(){function e(t){d(this,e),this.ro=t.ro,this.oo=t.oo}return y(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),nT="WebChannelConnection",rT=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return y(n,[{key:"Ao",value:function(e,t,n,r){var i=JI();return new Promise((function(a,o){var s=new rb;s.setWithCredentials(!0),s.listenOnce(Xk.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case $k.NO_ERROR:var t=s.getResponseJson();fb(nT,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case $k.TIMEOUT:fb(nT,"RPC '".concat(e,"' ").concat(i," timed out")),o(new kb(gb.DEADLINE_EXCEEDED,"Request time out"));break;case $k.HTTP_ERROR:var n=s.getStatus();if(fb(nT,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(gb).indexOf(t)>=0?t:gb.UNKNOWN}(u.status);o(new kb(c,u.message))}else o(new kb(gb.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new kb(gb.UNAVAILABLE,"Connection failed."));break;default:vb()}}finally{fb(nT,"RPC '".concat(e,"' ").concat(i," completed."))}}));var u=JSON.stringify(r);fb(nT,"RPC '".concat(e,"' ").concat(i," sending request:"),r),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=JI(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qk(),o=Yk(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new tb({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var c=i.join("");fb(nT,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),s);var l=a.createWebChannel(c,s),f=!1,h=!1,d=new tT({ro:function(t){h?fb(nT,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(fb(nT,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),fb(nT,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,nb.EventType.OPEN,(function(){h||fb(nT,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,nb.EventType.CLOSE,(function(){h||(h=!0,fb(nT,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,nb.EventType.ERROR,(function(t){h||(h=!0,db(nT,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new kb(gb.UNAVAILABLE,"The operation could not be completed")))})),p(l,nb.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];yb(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){fb(nT,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var s=o.status,u=function(e){var t=wS[e];if(void 0!==t)return DS(t)}(s),c=o.message;void 0===u&&(u=gb.INTERNAL,c="Unknown error status: "+s+" with message "+o.message),h=!0,d.wo(new kb(u,c)),l.close()}else fb(nT,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,Jk.STAT_EVENT,(function(t){t.stat===eb.PROXY?fb(nT,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===eb.NOPROXY&&fb(nT,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=JI(),o=this.To(e,t);fb("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,r,i),this.Ao(e,o,s,n).then((function(t){return fb("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw db("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ub,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=eT[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function iT(){return"undefined"!=typeof window?window:null}function aT(){return"undefined"!=typeof document?document:null}function oT(e){return new XS(e,!0)}var sT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&fb("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),uT=function(){function e(t,n,r,i,a,o,s,u){d(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new sT(t,n)}return y(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===gb.RESOURCE_EXHAUSTED?(hb(n.toString()),hb("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===gb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,u.Z)(t,2),i=r[0],a=r[1];e.Fo===n&&e.Zo(i,a)}),(function(n){t((function(){var t=new kb(gb.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No((0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return fb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(fb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),cT=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u}return y(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:vb()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(yb(void 0===t||"string"==typeof t),nw.fromBase64String(t||"")):(yb(void 0===t||t instanceof Uint8Array),nw.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?gb.UNKNOWN:DS(e.code);return new kb(t,e.message||"")}(o);n=new ZS(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=sE(e,u.document.name),l=rE(u.document.updateTime),f=u.document.createTime?rE(u.document.createTime):jb.min(),h=new Rw({mapValue:{fields:u.document.fields}}),d=jw.newFoundDocument(c,l,f,h),p=u.targetIds||[],v=u.removedTargetIds||[];n=new zS(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=sE(e,y.document),g=y.readTime?rE(y.readTime):jb.min(),k=jw.newNoDocument(m,g),b=y.removedTargetIds||[];n=new zS([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var _=t.documentRemove;_.document;var w=sE(e,_.document),x=_.removedTargetIds||[];n=new zS([],x,w,null)}else{if(!("filter"in t))return vb();t.filter;var S=t.filter;S.targetId;var E=S.count,C=void 0===E?0:E,I=S.unchangedNames,T=new NS(C,I),N=S.targetId;n=new qS(N,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return jb.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?jb.min():t.readTime?rE(t.readTime):jb.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=lE(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=lx(r)?{documents:mE(e,r)}:{query:gE(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=tE(e,t.resumeToken);var i=JS(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(jb.min())>0){n.readTime=eE(e,t.snapshotVersion.toTimestamp());var a=JS(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vb()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=lE(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(uT),lT=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).serializer=o,u.ru=!1,u}return y(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,We(k(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(yb(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(yb(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?rE(e.updateTime):rE(t);return n.isEqual(jb.min())&&(n=rE(t)),new uS(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=rE(e.commitTime);return this.listener.cu(n,t)}return yb(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=lE(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return vE(t.serializer,e)}))};this.Wo(n)}}]),n}(uT),fT=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return y(n,[{key:"fu",value:function(){if(this.lu)throw new kb(gb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,u.Z)(i,2),o=a[0],s=a[1];return r.connection.Io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===gb.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new kb(gb.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=(0,u.Z)(a,2),s=o[0],c=o[1];return i.connection.vo(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===gb.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new kb(gb.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return y((function e(){d(this,e)}))}());var hT=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return y(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(hb(t),this.mu=!1):fb("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),dT=y((function e(t,n,r,i,a){var u=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ST(u),!e.t0){e.next=5;break}return fb("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=mb(t)).vu.add(4),e.next=4,yT(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,pT(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(u);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new hT(r,i)}));function pT(e){return vT.apply(this,arguments)}function vT(){return(vT=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ST(t)){e.next=18;break}n=N(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function yT(e){return mT.apply(this,arguments)}function mT(){return(mT=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=N(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function gT(e,t){var n=mb(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),xT(n)?wT(n):JT(n).Ko()&&bT(n,t))}function kT(e,t){var n=mb(e),r=JT(n);n.Au.delete(t),r.Ko()&&_T(n,t),0===n.Au.size&&(r.Ko()?r.jo():ST(n)&&n.bu.set("Unknown"))}function bT(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jb.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}JT(e).su(t)}function _T(e,t){e.Vu.qt(t),JT(e).iu(t)}function wT(e){e.Vu=new HS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),JT(e).start(),e.bu.gu()}function xT(e){return ST(e)&&!JT(e).Uo()&&e.Au.size>0}function ST(e){return 0===mb(e).vu.size}function ET(e){e.Vu=void 0}function CT(e){return IT.apply(this,arguments)}function IT(){return(IT=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){bT(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TT(e,t){return NT.apply(this,arguments)}function NT(){return(NT=(0,s.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ET(t),xT(t)?(t.bu.Iu(n),wT(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AT(e,t,n){return DT.apply(this,arguments)}function DT(){return DT=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof ZS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=N(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(s=a.value,e.t0=t.Au.has(s),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(s,r);case 10:t.Au.delete(s),t.Vu.removeTarget(s);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),fb("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,OT(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof zS?t.Vu.Ht(n):n instanceof qS?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(jb.min())){e.next=29;break}return e.prev=14,e.next=17,EI(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(nw.EMPTY_BYTE_STRING,r.snapshotVersion)),_T(e,t);var i=new NE(r.target,t,n,r.sequenceNumber);bT(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),fb("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,OT(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),DT.apply(this,arguments)}function OT(e,t,n){return RT.apply(this,arguments)}function RT(){return(RT=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a_(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,yT(t);case 5:t.bu.set("Offline"),r||(r=function(){return EI(t.localStore)}),t.asyncQueue.enqueueRetryable((0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fb("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,pT(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PT(e,t){return t().catch((function(n){return OT(e,n,t)}))}function jT(e){return LT.apply(this,arguments)}function LT(){return(LT=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=mb(t),r=eN(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!MT(n)){e.next=19;break}return e.prev=3,e.next=6,TI(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,FT(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,OT(n,e.t0);case 17:e.next=2;break;case 19:UT(n)&&BT(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function MT(e){return ST(e)&&e.Eu.length<10}function FT(e,t){e.Eu.push(t);var n=eN(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function UT(e){return ST(e)&&!eN(e).Uo()&&e.Eu.length>0}function BT(e){eN(e).start()}function VT(e){return zT.apply(this,arguments)}function zT(){return(zT=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:eN(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qT(e){return ZT.apply(this,arguments)}function ZT(){return(ZT=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eN(t),r=N(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(UB){r.e(UB)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WT(e,t,n){return HT.apply(this,arguments)}function HT(){return(HT=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=IS.from(i,n,r),e.next=3,PT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,jT(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KT(e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,s.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&eN(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!AS(i=n.code)||i===gb.ABORTED){e.next=7;break}return r=t.Eu.shift(),eN(t).Qo(),e.next=5,PT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,jT(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:UT(t)&&BT(t);case 5:case"end":return e.stop()}}),e)}))),GT.apply(this,arguments)}function QT(e,t){return YT.apply(this,arguments)}function YT(){return(YT=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=mb(t)).asyncQueue.verifyOperationInProgress(),fb("RemoteStore","RemoteStore received new credentials"),i=ST(r),r.vu.add(3),e.next=6,yT(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,pT(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $T(e,t){return XT.apply(this,arguments)}function XT(){return(XT=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mb(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,pT(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,yT(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JT(e){return e.Su||(e.Su=function(e,t,n){var r=mb(e);return r.fu(),new cT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:CT.bind(null,e),ao:TT.bind(null,e),nu:AT.bind(null,e)}),e.Ru.push(function(){var t=(0,s.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),xT(e)?wT(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:ET(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function eN(e){return e.Du||(e.Du=function(e,t,n){var r=mb(e);return r.fu(),new lT(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:VT.bind(null,e),ao:KT.bind(null,e),au:qT.bind(null,e),cu:WT.bind(null,e)}),e.Ru.push(function(){var t=(0,s.Z)((0,o.Z)().mark((function t(n){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,jT(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(fb("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var tN=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bb,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kb(gb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function nN(e,t){if(hb("AsyncQueue","".concat(t,": ").concat(e)),a_(e))return new kb(gb.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var rN=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||Bb.comparator(e.key,n.key)}:function(e,t){return Bb.comparator(e.key,t.key)},this.keyedMap=Lx(),this.sortedSet=new G_(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),iN=function(){function e(){d(this,e),this.Cu=new G_(Bb.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):vb():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),aN=function(){function e(t,n,r,i,a,o,s,u,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ex(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,rN.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),oN=y((function e(){d(this,e),this.Nu=void 0,this.listeners=[]})),sN=y((function e(){d(this,e),this.queries=new Ox((function(e){return Cx(e)}),Ex),this.onlineState="Unknown",this.ku=new Set}));function uN(e,t){return cN.apply(this,arguments)}function cN(){return(cN=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mb(t),i=n.query,a=!1,(s=r.queries.get(i))||(a=!0,s=new oN),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:s.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=nN(e.t0,"Initialization of query '".concat(Ix(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,s),s.listeners.push(n),n.Mu(r.onlineState),s.Nu&&n.$u(s.Nu)&&pN(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function lN(e,t){return fN.apply(this,arguments)}function fN(){return(fN=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mb(t),i=n.query,a=!1,(s=r.queries.get(i))&&(u=s.listeners.indexOf(n))>=0&&(s.listeners.splice(u,1),a=0===s.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hN(e,t){var n,r=mb(e),i=!1,a=N(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=N(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(UB){l.e(UB)}finally{l.f()}u.Nu=o}}}catch(UB){a.e(UB)}finally{a.f()}i&&pN(r)}function dN(e,t,n){var r=mb(e),i=r.queries.get(t);if(i){var a,o=N(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(UB){o.e(UB)}finally{o.f()}}r.queries.delete(t)}function pN(e){e.ku.forEach((function(e){e.next()}))}var vN=function(){function e(t,n,r){d(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=N(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(UB){r.e(UB)}finally{r.f()}e=new aN(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=aN.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),yN=function(){function e(t,n){d(this,e),this.Gu=t,this.byteLength=n}return y(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),mN=function(){function e(t){d(this,e),this.serializer=t}return y(e,[{key:"rr",value:function(e){return sE(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?dE(this.serializer,e.document,!1):jw.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return rE(e)}}]),e}(),gN=function(){function e(t,n,r){d(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kN(t)}return y(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Mb.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new mN(this.serializer),i=N(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.rr(a.metadata.name),u=N(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||qx()).add(s);n.set(c,l)}}catch(UB){u.e(UB)}finally{u.f()}}}}catch(UB){i.e(UB)}finally{i.f()}return n}},{key:"complete",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LI(this.localStore,new mN(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=N(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,FI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function kN(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var bN=y((function e(t){d(this,e),this.key=t})),_N=y((function e(t){d(this,e),this.key=t})),wN=function(){function e(t,n){d(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=qx(),this.mutatedKeys=qx(),this.tc=Ax(t),this.ec=new rN(this.tc)}return y(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new iN,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Tx(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.tc(f,u)>0||c&&n.tc(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vb()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new aN(this.query,e.ec,i,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new iN,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=qx(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new _N(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new bN(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=qx();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return aN.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),xN=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),SN=y((function e(t){d(this,e),this.key=t,this.fc=!1})),EN=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Ox((function(e){return Cx(e)}),Ex),this._c=new Map,this.mc=new Set,this.gc=new G_(Bb.comparator),this.yc=new Map,this.Ic=new nI,this.Tc={},this.Ec=new Map,this.Ac=DC.Mn(),this.onlineState="Unknown",this.vc=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function CN(e,t){return IN.apply(this,arguments)}function IN(){return(IN=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kA(t),!(s=r.wc.get(n))){e.next=6;break}i=s.targetId,r.sharedClientState.addLocalQueryTarget(i),a=s.view.lc(),e.next=15;break;case 6:return e.next=8,NI(r.localStore,wx(n));case 8:return u=e.sent,c=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,TN(r,n,i,"current"===c,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&gT(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TN(e,t,n,r,i){return NN.apply(this,arguments)}function NN(){return NN=(0,s.Z)((0,o.Z)().mark((function e(t,n,r,i,a){var u,c,l,f,h,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,r,i){var a,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,OI(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return s=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,s),e.abrupt("return",(QN(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,OI(t.localStore,n,!0);case 3:return u=e.sent,c=new wN(n,u.ir),l=c.sc(u.documents),f=VS.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),h=c.applyChanges(l,t.isPrimaryClient,f),QN(t,r,h.cc),d=new xN(n,r,c),e.abrupt("return",(t.wc.set(n,d),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),NN.apply(this,arguments)}function AN(e,t){return DN.apply(this,arguments)}function DN(){return(DN=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=mb(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Ex(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,AI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),kT(r.remoteStore,i.targetId),KN(r,i.targetId)})).catch(Xb);case 9:e.next=14;break;case 11:return KN(r,i.targetId),e.next=14,AI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ON(e,t,n){return RN.apply(this,arguments)}function RN(){return RN=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bA(t),e.prev=1,e.next=4,function(e,t){var n,r,i=mb(e),a=Pb.now(),o=t.reduce((function(e,t){return e.add(t.key)}),qx());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Px(),u=qx();return i.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=N(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=vS(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new gS(c.key,l,Pw(l.value.mapValue),cS.exists(!0)))}}catch(UB){u.e(UB)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Mx(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new G_(Db)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,XN(i,a.changes);case 9:return e.next=11,jT(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),s=nN(e.t0,"Failed to persist write"),r.reject(s);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),RN.apply(this,arguments)}function PN(e,t){return jN.apply(this,arguments)}function jN(){return(jN=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),e.prev=1,e.next=4,CI(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(yb(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?yb(n.fc):e.removedDocuments.size>0&&(yb(n.fc),n.fc=!1))})),e.next=8,XN(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Xb(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function LN(e,t,n){var r=mb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=mb(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=N(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(UB){a.e(UB)}finally{a.f()}})),r&&pN(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function MN(e,t,n){return FN.apply(this,arguments)}function FN(){return(FN=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s,u,c,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=mb(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(s=a&&a.key)){e.next=14;break}return u=(u=new G_(Bb.comparator)).insert(s,jw.newNoDocument(s,jb.min())),c=qx().add(s),l=new BS(jb.min(),new Map,new G_(Db),u,c),e.next=9,PN(i,l);case 9:i.gc=i.gc.remove(s),i.yc.delete(n),$N(i),e.next=16;break;case 14:return e.next=16,AI(i.localStore,n,!1).then((function(){return KN(i,n,r)})).catch(Xb);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UN(e,t){return BN.apply(this,arguments)}function BN(){return(BN=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),i=n.batch.batchId,e.prev=1,e.next=4,SI(r.localStore,n);case 4:return a=e.sent,HN(r,i,null),WN(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,XN(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function VN(e,t,n){return zN.apply(this,arguments)}function zN(){return(zN=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mb(t),e.prev=1,e.next=4,function(e,t){var n=mb(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return yb(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,HN(i,n,r),WN(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,XN(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function qN(e,t){return ZN.apply(this,arguments)}function ZN(){return(ZN=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ST((r=mb(t)).remoteStore)||fb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=mb(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),s=nN(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(s);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function WN(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function HN(e,t,n){var r=mb(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function KN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=N(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(UB){i.e(UB)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||GN(e,t)}))}function GN(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(kT(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),$N(e))}function QN(e,t,n){var r,i=N(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof bN?(e.Ic.addReference(a.key,t),YN(e,a)):a instanceof _N?(fb("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||GN(e,a.key)):vb()}}catch(UB){i.e(UB)}finally{i.f()}}function YN(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(fb("SyncEngine","New document in limbo: "+n),e.mc.add(r),$N(e))}function $N(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Bb(Mb.fromString(t)),r=e.Ac.next();e.yc.set(r,new SN(n)),e.gc=e.gc.insert(n,r),gT(e.remoteStore,new NE(wx(yx(n.path)),r,"TargetPurposeLimboResolution",h_.ct))}}function XN(e,t,n){return JN.apply(this,arguments)}function JN(){return JN=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=mb(t),a=[],u=[],c=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){c.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=gI.Li(t.targetId,e);u.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.dc.nu(a),e.next=9,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,u,c,l,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return e_.forEach(n,(function(t){return e_.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return e_.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),a_(e.t0)){e.next=10;break}throw e.t0;case 10:fb("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=N(n);try{for(i.s();!(a=i.n()).done;)s=a.value,u=s.targetId,s.fromCache||(c=r.Ji.get(u),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.Ji=r.Ji.insert(u,f))}catch(UB){i.e(UB)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,u);case 9:case"end":return e.stop()}}),e)}))),JN.apply(this,arguments)}function eA(e,t){return tA.apply(this,arguments)}function tA(){return(tA=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=mb(t)).currentUser.isEqual(n)){e.next=11;break}return fb("SyncEngine","User change. New user:",n.toKey()),e.next=5,wI(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new kb(gb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,XN(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nA(e,t){var n=mb(e),r=n.yc.get(t);if(r&&r.fc)return qx().add(r.key);var i=qx(),a=n._c.get(t);if(!a)return i;var o,s=N(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.wc.get(u);i=i.unionWith(c.view.nc)}}catch(UB){s.e(UB)}finally{s.f()}return i}function rA(e,t){return iA.apply(this,arguments)}function iA(){return(iA=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),e.next=3,OI(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&QN(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aA(e,t){return oA.apply(this,arguments)}function oA(){return(oA=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),e.abrupt("return",PI(r.localStore,n).then((function(e){return XN(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sA(e,t,n,r){return uA.apply(this,arguments)}function uA(){return(uA=(0,s.Z)((0,o.Z)().mark((function e(t,n,r,i){var a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=mb(t),e.next=3,function(e,t){var n=mb(e),r=mb(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):e_.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(s=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,jT(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(HN(a,n,i||null),WN(a,n),function(e,t){mb(mb(e).mutationQueue).Cn(t)}(a.localStore,n)):vb();case 11:return e.next=13,XN(a,s);case 13:e.next=16;break;case 15:fb("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cA(e,t){return lA.apply(this,arguments)}function lA(){return(lA=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,u,c,l,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kA(r=mb(t)),bA(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,fA(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,$T(r.remoteStore,!0);case 9:s=N(a);try{for(s.s();!(u=s.n()).done;)c=u.value,gT(r.remoteStore,c)}catch(UB){s.e(UB)}finally{s.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return l=[],f=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return KN(r,t),AI(r.localStore,t,!0)})),kT(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,fA(r,l);case 21:return function(e){var t=mb(e);t.yc.forEach((function(e,n){kT(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new G_(Bb.comparator)}(r),r.vc=!1,e.next=25,$T(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fA(e,t,n){return hA.apply(this,arguments)}function hA(){return(hA=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s,u,c,l,f,h,d,p,v,y,m,g;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=mb(t),a=[],s=[],u=N(n),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i._c.get(l))||0===h.length){e.next=34;break}return e.next=11,NI(i.localStore,wx(h[0]));case 11:f=e.sent,d=N(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.wc.get(v),e.next=20,rA(i,y);case 20:(m=e.sent).snapshot&&s.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,RI(i.localStore,l);case 36:return g=e.sent,e.next=39,NI(i.localStore,g);case 39:return f=e.sent,e.next=42,TN(i,dA(g),l,!1,f.resumeToken);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(s),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function dA(e){return vx(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function pA(e){var t=mb(e);return mb(mb(t.localStore).persistence).$i()}function vA(e,t,n,r){return yA.apply(this,arguments)}function yA(){return(yA=(0,s.Z)((0,o.Z)().mark((function e(t,n,r,i){var a,s,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=mb(t)).vc){e.next=3;break}return e.abrupt("return",void fb("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((s=a._c.get(n))&&s.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,PI(a.localStore,Nx(s[0]));case 10:return u=e.sent,c=BS.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,nw.EMPTY_BYTE_STRING),e.next=14,XN(a,u,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,AI(a.localStore,n,!0);case 17:return KN(a,n,i),e.abrupt("break",20);case 19:vb();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mA(e,t,n){return gA.apply(this,arguments)}function gA(){return(gA=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s,u,c,l,f,h,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=kA(t)).vc){e.next=45;break}a=N(n),e.prev=3,a.s();case 5:if((s=a.n()).done){e.next=21;break}if(u=s.value,!i._c.has(u)){e.next=10;break}return fb("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,RI(i.localStore,u);case 12:return c=e.sent,e.next=15,NI(i.localStore,c);case 15:return l=e.sent,e.next=18,TN(i,dA(c),l.targetId,!1,l.resumeToken);case 18:gT(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=N(r),e.prev=30,d=(0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,AI(i.localStore,t,!1).then((function(){kT(i.remoteStore,t),KN(i,t)})).catch(Xb);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function kA(e){var t=mb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=PN.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nA.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=MN.bind(null,t),t.dc.nu=hN.bind(null,t.eventManager),t.dc.Pc=dN.bind(null,t.eventManager),t}function bA(e){var t=mb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=VN.bind(null,t),t}function _A(e,t,n){var r=mb(e);(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=mb(e),r=rE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(kN(i)),a=new gN(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:s=e.sent;case 16:if(!s){e.next=26;break}return e.next=19,a.zu(s);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:s=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return c=e.sent,e.next=31,XN(t,c.Ju,void 0);case 31:return e.next=33,function(e,t){var n=mb(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(db("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var wA=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=oT(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return _I(this.persistence,new kI,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new uI(lI.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new QI}},{key:"terminate",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),xA=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(k(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,bA(this.Vc.syncEngine);case 6:return e.next=8,jT(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return _I(this.persistence,new kI,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new FC(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new f_(t,this.persistence);return new l_(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=mI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xC.withCacheSize(this.cacheSizeBytes):xC.DEFAULT;return new pI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,iT(),aT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new QI}}]),n}(wA),SA=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var r,i=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We(k(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof GI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:sA.bind(null,r),zr:vA.bind(null,r),Wr:mA.bind(null,r),$i:pA.bind(null,r),Qr:aA.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cA(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=iT();if(!GI.D(t))throw new kb(gb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=mI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(xA),EA=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return LN(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=eA.bind(null,this.syncEngine),e.next=12,$T(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new sN}},{key:"createDatastore",value:function(e){var t,n=oT(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new rT(t));return function(e,t,n,r){return new fT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return LN(o.syncEngine,e,0)},a=$I.D()?new $I:new YI,new dT(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new EN(e,t,n,r,i,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=mb(t),fb("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,yT(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function CA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,s.Z)((0,o.Z)().mark((function r(){var i;return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var IA=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):hb("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),TA=function(){function e(t,n){var r=this;d(this,e),this.Cc=t,this.serializer=n,this.metadata=new bb,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new yN(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),NA=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new kb(gb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a,s,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),i=lE(r.serializer)+"/documents",a={documents:n.map((function(e){return oE(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return s=e.sent,u=new Map,s.forEach((function(e){var t=pE(r.serializer,e);u.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());yb(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new SS(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t,n=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Bb.fromPath(t);n.mutations.push(new ES(r,n.precondition(r)))})),e.next=7,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mb(t),i=lE(r.serializer)+"/documents",a={writes:n.map((function(e){return vE(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vb();t=jb.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new kb(gb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(jb.min())?cS.exists(!1):cS.updateTime(t):cS.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(jb.min()))throw new kb(gb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cS.updateTime(t)}return cS.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),AA=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new sT(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No((0,s.Z)((0,o.Z)().mark((function t(){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new NA(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!d_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!AS(t)}return!1}}]),e}(),DA=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=sb.UNAUTHENTICATED,this.clientId=Ab.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fb("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return fb("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new kb(gb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new bb;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,s.Z)((0,o.Z)().mark((function n(){var r;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=nN(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function OA(e,t){return RA.apply(this,arguments)}function RA(){return RA=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),fb("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,wI(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),RA.apply(this,arguments)}function PA(e,t){return jA.apply(this,arguments)}function jA(){return(jA=(0,s.Z)((0,o.Z)().mark((function e(t,n){var r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,MA(t);case 3:return r=e.sent,fb("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return QT(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return QT(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LA(e){return"FirebaseError"===e.name?e.code===gb.FAILED_PRECONDITION||e.code===gb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function MA(e){return FA.apply(this,arguments)}function FA(){return(FA=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return fb("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,OA(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),LA(n=e.t0)){e.next=13;break}throw n;case 13:return db("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,OA(t,new wA);case 16:e.next=21;break;case 18:return fb("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,OA(t,new wA);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function UA(e){return BA.apply(this,arguments)}function BA(){return(BA=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return fb("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,PA(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return fb("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,PA(t,new EA);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function VA(e){return MA(e).then((function(e){return e.persistence}))}function zA(e){return MA(e).then((function(e){return e.localStore}))}function qA(e){return UA(e).then((function(e){return e.remoteStore}))}function ZA(e){return UA(e).then((function(e){return e.syncEngine}))}function WA(e){return UA(e).then((function(e){return e.datastore}))}function HA(e){return KA.apply(this,arguments)}function KA(){return(KA=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UA(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=CN.bind(null,n.syncEngine),r.onUnlisten=AN.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bb;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new IA({next:function(a){t.enqueueAndForget((function(){return lN(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new kb(gb.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new kb(gb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new vN(yx(n.path),a,{includeMetadataChanges:!0,Ku:!0});return uN(e,o)},i.next=3,HA(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function QA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bb;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function i(){return(0,o.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new IA({next:function(n){t.enqueueAndForget((function(){return lN(e,o)})),n.fromCache&&"server"===r.source?i.reject(new kb(gb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new vN(n,a,{includeMetadataChanges:!0,Ku:!0});return uN(e,o)},i.next=3,HA(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function YA(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var $A=new Map;function XA(e,t,n){if(!n)throw new kb(gb.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function JA(e,t,n,r){if(!0===t&&!0===r)throw new kb(gb.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function eD(e){if(!Bb.isDocumentKey(e))throw new kb(gb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function tD(e){if(Bb.isDocumentKey(e))throw new kb(gb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function nD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":vb()}function rD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kb(gb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nD(e);throw new kb(gb.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function iD(e,t){if(t<=0)throw new kb(gb.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var aD=function(){function e(t){var n,r;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new kb(gb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kb(gb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}JA("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YA(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new kb(gb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new kb(gb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new kb(gb.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),oD=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aD({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new kb(gb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new kb(gb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wb;switch(e.type){case"firstParty":return new Cb(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new kb(gb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$A.get(e);t&&(fb("ComponentProvider","Removing Datastore"),$A.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function sD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=rD(e,oD))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&db("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var s,u;if("string"==typeof i.mockUserToken)s=i.mockUserToken,u=sb.MOCK_USER;else{s=oa(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new kb(gb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new sb(c)}e._authCredentials=new xb(new _b(s,u))}}var uD=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new lD(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cD=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),lD=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,yx(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new uD(this.firestore,null,new Bb(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cD);function fD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ra(e),XA("collection","path",t),e instanceof oD){var a=Mb.fromString.apply(Mb,[t].concat(r));return tD(a),new lD(e,null,a)}if(!(e instanceof uD||e instanceof lD))throw new kb(gb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Mb.fromString.apply(Mb,[t].concat(r)));return tD(o),new lD(e.firestore,null,o)}function hD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ra(e),1===arguments.length&&(t=Ab.A()),XA("doc","path",t),e instanceof oD){var a=Mb.fromString.apply(Mb,[t].concat(r));return eD(a),new uD(e,null,new Bb(a))}if(!(e instanceof uD||e instanceof lD))throw new kb(gb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Mb.fromString.apply(Mb,[t].concat(r)));return eD(o),new uD(e.firestore,e instanceof lD?e.converter:null,new Bb(o))}function dD(e,t){return e=Ra(e),t=Ra(t),(e instanceof uD||e instanceof lD)&&(t instanceof uD||t instanceof lD)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function pD(e,t){return e=Ra(e),t=Ra(t),e instanceof cD&&t instanceof cD&&e.firestore===t.firestore&&Ex(e._query,t._query)&&e.converter===t.converter}var vD=function(){function e(){var t=this;d(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new sT(this,"async_queue_retry"),this.Xc=function(){var e=aT();e&&fb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=aT();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return y(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=aT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new bb;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),a_(e.t0)){e.next=12;break}throw e.t0;case 12:fb("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw hb("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=tN.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&vb()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=N(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(UB){n.e(UB)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=N(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(UB){r.e(UB)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function yD(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=N(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(UB){i.e(UB)}finally{i.f()}return!1}(e)}var mD=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new bb,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gD=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new vD,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||bD(this),this._firestoreClient.terminate()}}]),n}(oD);function kD(e){return e._firestoreClient||bD(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bD(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new lw(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,YA(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new DA(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function _D(e,t,n){var r=new bb;return e.asyncQueue.enqueue((0,s.Z)((0,o.Z)().mark((function i(){var a;return(0,o.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,OA(e,n);case 3:return i.next=5,PA(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),LA(a=i.t0)){i.next=13;break}throw a;case 13:db("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function wD(e){return function(e){return e.asyncQueue.enqueue((0,s.Z)((0,o.Z)().mark((function t(){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,VA(e);case 2:return n=t.sent,t.next=5,qA(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=mb(e);return t.vu.delete(0),pT(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(kD(e=rD(e,gD)))}function xD(e){return function(e){return e.asyncQueue.enqueue((0,s.Z)((0,o.Z)().mark((function t(){var n,r;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,VA(e);case 2:return n=t.sent,t.next=5,qA(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=mb(t)).vu.add(0),e.next=4,yT(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(kD(e=rD(e,gD)))}function SD(e,t){var n=kD(e=rD(e,gD)),r=new mD;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new TA(e,t)}(function(e,t){if(e instanceof Uint8Array)return CA(e,t);if(e instanceof ArrayBuffer)return CA(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?PS().encode(e):e),t)}(n,oT(t));e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_A,t.next=3,ZA(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ED(e,t){return function(e,t){return e.asyncQueue.enqueue((0,s.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=mb(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,zA(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(kD(e=rD(e,gD)),t).then((function(t){return t?new cD(e,null,t.query):null}))}function CD(e){if(e._initialized||e._terminated)throw new kb(gb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ID=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(nw.fromBase64String(t))}catch(t){throw new kb(gb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(nw.fromUint8Array(t))}}]),e}(),TD=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new kb(gb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ub(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var ND=y((function e(t){d(this,e),this._methodName=t})),AD=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new kb(gb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new kb(gb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Db(this._lat,e._lat)||Db(this._long,e._long)}}]),e}(),DD=/^__.*__$/,OD=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new gS(e,this.data,this.fieldMask,t,this.fieldTransforms):new mS(e,this.data,t,this.fieldTransforms)}}]),e}(),RD=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new gS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function PD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vb()}}var jD=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return tO(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(PD(this.ca)&&DD.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),LD=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||oT(t)}return y(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new jD({ca:e,methodName:t,ga:n,path:Ub.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function MD(e){var t=e._freezeSettings(),n=oT(e._databaseId);return new LD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function FD(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);$D("Data must be an object, but it was:",o,r);var s,u,c=QD(r,o);if(a.merge)s=new ew(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=N(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=XD(t,l.value,n);if(!o.contains(d))throw new kb(gb.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));nO(f,d)||f.push(d)}}catch(UB){h.e(UB)}finally{h.f()}s=new ew(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new OD(new Rw(c),s,u)}var UD=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ND);function BD(e,t,n){return new jD({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var VD=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new sS(e.path,new Jx)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(ND),zD=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=BD(this,e,!0),n=this.pa.map((function(e){return GD(e,t)})),r=new eS(n);return new sS(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ND),qD=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).pa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=BD(this,e,!0),n=this.pa.map((function(e){return GD(e,t)})),r=new nS(n);return new sS(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ND),ZD=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Ia=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new iS(e.serializer,Gx(e.serializer,this.Ia));return new sS(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(ND);function WD(e,t,n,r){var i=e.ya(1,t,n);$D("Data must be an object, but it was:",i,r);var a=[],o=Rw.empty();H_(r,(function(e,r){var s=eO(t,e,n);r=Ra(r);var u=i.da(s);if(r instanceof UD)a.push(s);else{var c=GD(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new ew(a);return new RD(o,s,i.fieldTransforms)}function HD(e,t,n,r,i,a){var o=e.ya(1,t,n),s=[XD(t,r,n)],u=[i];if(a.length%2!=0)throw new kb(gb.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(XD(t,a[c])),u.push(a[c+1]);for(var l=[],f=Rw.empty(),h=s.length-1;h>=0;--h)if(!nO(l,s[h])){var d=s[h],p=u[h];p=Ra(p);var v=o.da(d);if(p instanceof UD)l.push(d);else{var y=GD(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new ew(l);return new RD(f,m,o.fieldTransforms)}function KD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return GD(n,e.ya(r?4:3,t))}function GD(e,t){if(YD(e=Ra(e)))return $D("Unsupported field value:",t,e),QD(e,t);if(e instanceof ND)return function(e,t){if(!PD(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=N(e);try{for(a.s();!(n=a.n()).done;){var o=GD(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(UB){a.e(UB)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ra(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Gx(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Pb.fromDate(e);return{timestampValue:eE(t.serializer,n)}}if(e instanceof Pb){var r=new Pb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:eE(t.serializer,r)}}if(e instanceof AD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ID)return{bytesValue:tE(t.serializer,e._byteString)};if(e instanceof uD){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:iE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(nD(e)))}(e,t)}function QD(e,t){var n={};return K_(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):H_(e,(function(e,r){var i=GD(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function YD(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Pb||e instanceof AD||e instanceof ID||e instanceof uD||e instanceof ND)}function $D(e,t,n){if(!YD(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=nD(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function XD(e,t,n){if((t=Ra(t))instanceof TD)return t._internalPath;if("string"==typeof t)return eO(e,t);throw tO("Field path arguments must be of type string or ",e,!1,void 0,n)}var JD=new RegExp("[~\\*/\\[\\]]");function eO(e,t,n){if(t.search(JD)>=0)throw tO("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(TD,h(t.split(".")))._internalPath}catch(r){throw tO("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tO(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new kb(gb.INVALID_ARGUMENT,s+e+u)}function nO(e,t){return e.some((function(e){return e.isEqual(t)}))}var rO=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new uD(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new iO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(aO("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),iO=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return We(k(n.prototype),"data",this).call(this)}}]),n}(rO);function aO(e,t){return"string"==typeof t?eO(e,t):t instanceof TD?t._internalPath:t._delegate._internalPath}function oO(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new kb(gb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sO=y((function e(){d(this,e)})),uO=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(sO);function cO(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof sO&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof fO})).length,n=e.filter((function(e){return e instanceof lO})).length;if(t>1||t>0&&n>0)throw new kb(gb.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,s=N(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(UB){s.e(UB)}finally{s.f()}return e}var lO=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return xO(e._query,t),new cD(e.firestore,e.converter,xx(e._query,t))}},{key:"_parse",value:function(e){var t=MD(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new kb(gb.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){wO(o,a);var u,c=[],l=N(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(_O(r,e,f))}}catch(UB){l.e(UB)}finally{l.f()}s={arrayValue:{values:c}}}else s=_O(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||wO(o,a),s=KD(n,"where",o,"in"===a||"not-in"===a);return zw.create(i,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(uO);var fO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:qw.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=N(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;xO(r,a),r=xx(r,a)}}catch(UB){i.e(UB)}finally{i.f()}}(e._query,t),new cD(e.firestore,e.converter,xx(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(sO);var hO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new kb(gb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new kb(gb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Uw(t,n);return function(e,t){if(null===gx(e)){var n=kx(e);null!==n&&SO(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new cD(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new px(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(uO);var dO=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new cD(e.firestore,e.converter,Sx(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(uO);var pO=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=bO(e,this.type,this._docOrFields,this._inclusive);return new cD(e.firestore,e.converter,function(e,t){return new px(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(uO);function vO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pO._create("startAt",t,!0)}function yO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pO._create("startAfter",t,!1)}var mO=function(e){g(n,e);var t=x(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=bO(e,this.type,this._docOrFields,this._inclusive);return new cD(e.firestore,e.converter,function(e,t){return new px(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(uO);function gO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mO._create("endBefore",t,!1)}function kO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mO._create("endAt",t,!0)}function bO(e,t,n,r){if(n[0]=Ra(n[0]),n[0]instanceof rO)return function(e,t,n,r,i){if(!r)throw new kb(gb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=N(_x(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(_w(t,r.key));else{var c=r.data.field(u.field);if(sw(c))throw new kb(gb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new kb(gb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(UB){s.e(UB)}finally{s.f()}return new Lw(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=MD(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new kb(gb.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new kb(gb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!bx(e)&&-1!==c.indexOf("/"))throw new kb(gb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Mb.fromString(c));if(!Bb.isDocumentKey(l))throw new kb(gb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Bb(l);s.push(_w(t,f))}else{var h=KD(n,r,c);s.push(h)}}return new Lw(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function _O(e,t,n){if("string"==typeof(n=Ra(n))){if(""===n)throw new kb(gb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bx(t)&&-1!==n.indexOf("/"))throw new kb(gb.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Mb.fromString(n));if(!Bb.isDocumentKey(r))throw new kb(gb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return _w(e,new Bb(r))}if(n instanceof uD)return _w(e,n._key);throw new kb(gb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(nD(n),"."))}function wO(e,t){if(!Array.isArray(e)||0===e.length)throw new kb(gb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function xO(e,t){if(t.isInequality()){var n=kx(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new kb(gb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=gx(e);null!==i&&SO(e,r,i)}var a=function(e,t){var n,r=N(e);try{for(r.s();!(n=r.n()).done;){var i,a=N(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(UB){a.e(UB)}finally{a.f()}}}catch(UB){r.e(UB)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new kb(gb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new kb(gb.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function SO(e,t,n){if(!n.isEqual(t))throw new kb(gb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var EO=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(pw(e)){case 0:return null;case 1:return e.booleanValue;case 2:return aw(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ow(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vb()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return H_(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new AD(aw(e.latitude),aw(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=uw(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cw(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=iw(e);return new Pb(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Mb.fromString(e);yb(TE(n));var r=new fw(n.get(1),n.get(3)),i=new Bb(n.popFirst(5));return r.isEqual(t)||hb("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function CO(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var IO=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new ID(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uD(this.firestore,null,t)}}]),n}(EO);var TO=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),NO=function(e){g(n,e);var t=x(n);function n(e,r,i,a,o,s){var u;return d(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return y(n,[{key:"exists",value:function(){return We(k(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new AO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(aO("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(rO),AO=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return We(k(n.prototype),"data",this).call(this,e)}}]),n}(NO),DO=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new TO(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new AO(n._firestore,n._userDataWriter,r.key,r,new TO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kb(gb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new AO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new TO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new AO(e._firestore,e._userDataWriter,t.doc.key,t.doc,new TO(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:OO(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function OO(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vb()}}function RO(e,t){return e instanceof NO&&t instanceof NO?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof DO&&t instanceof DO&&e._firestore===t._firestore&&pD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var PO=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new ID(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new uD(this.firestore,null,t)}}]),n}(EO);function jO(e){e=rD(e,uD);var t=rD(e.firestore,gD),n=kD(t),r=new PO(t);return function(e,t){var n=new bb;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function r(){return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=mb(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new kb(gb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=nN(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,zA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new NO(t,r,e._key,n,new TO(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function LO(e){e=rD(e,cD);var t=rD(e.firestore,gD),n=kD(t),r=new PO(t);return function(e,t){var n=new bb;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function r(){return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n,r){var i,a,s,u,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,OI(t,n,!0);case 3:i=e.sent,a=new wN(n,i.ir),s=a.sc(i.documents),u=a.applyChanges(s,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=nN(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,zA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new DO(t,r,e,n)}))}function MO(e,t,n){e=rD(e,uD);var r=rD(e.firestore,gD),i=CO(e.converter,t,n);return VO(r,[FD(MD(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cS.none())])}function FO(e,t,n){e=rD(e,uD);for(var r=rD(e.firestore,gD),i=MD(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return VO(r,[("string"==typeof(t=Ra(t))||t instanceof TD?HD(i,"updateDoc",e._key,t,n,o):WD(i,"updateDoc",e._key,t)).toMutation(e._key,cS.exists(!0))])}function UO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,u;e=Ra(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||yD(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(yD(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(a=v.error)||void 0===a?void 0:a.bind(v),n[l+2]=null===(u=v.complete)||void 0===u?void 0:u.bind(v)}if(e instanceof uD)h=rD(e.firestore,gD),d=yx(e._key.path),f={next:function(t){n[l]&&n[l](zO(h,e,t))},error:n[l+1],complete:n[l+2]};else{var y=rD(e,cD);h=rD(y.firestore,gD),d=y._query;var m=new PO(h);f={next:function(e){n[l]&&n[l](new DO(h,m,y,e))},error:n[l+1],complete:n[l+2]},oO(e._query)}return function(e,t,n,r){var i=new IA(r),a=new vN(t,i,n);return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=uN,t.next=3,HA(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lN,t.next=3,HA(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kD(h),d,p,f)}function BO(e,t){return function(e,t){var n=new IA(t);return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){mb(e).ku.add(t),t.next()},t.next=3,HA(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){mb(e).ku.delete(t)},t.next=3,HA(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kD(e=rD(e,gD)),yD(t)?t:{next:t})}function VO(e,t){return function(e,t){var n=new bb;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function r(){return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=ON,r.next=3,ZA(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(kD(e),t)}function zO(e,t,n){var r=n.docs.get(t._key),i=new PO(e);return new NO(e,i,t._key,r,new TO(n.hasPendingWrites,n.fromCache),t.converter)}var qO={maxAttempts:5},ZO=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=MD(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=WO(e,this._firestore),i=CO(r.converter,t,n),a=FD(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,cS.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=WO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Ra(t))||t instanceof TD?HD(this._dataReader,"WriteBatch.update",i._key,t,n,o):WD(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,cS.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=WO(e,this._firestore);return this._mutations=this._mutations.concat(new SS(t._key,cS.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new kb(gb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function WO(e,t){if((e=Ra(e)).firestore!==t)throw new kb(gb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var HO=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=WO(e,this._firestore),i=new PO(this._firestore);return We(k(n.prototype),"get",this).call(this,e).then((function(e){return new NO(t._firestore,i,r._key,e._document,new TO(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=MD(t)}return y(e,[{key:"get",value:function(e){var t=this,n=WO(e,this._firestore),r=new IO(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return vb();var i=e[0];if(i.isFoundDocument())return new rO(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new rO(t._firestore,r,n._key,null,n.converter);throw vb()}))}},{key:"set",value:function(e,t,n){var r=WO(e,this._firestore),i=CO(r.converter,t,n),a=FD(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=WO(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=Ra(t))||t instanceof TD?HD(this._dataReader,"Transaction.update",i._key,t,n,o):WD(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=WO(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function KO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zD("arrayUnion",t)}function GO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qD("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ub=e}(Ao),xo(new Pa("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new gD(new Sb(e.getProvider("auth-internal")),new Tb(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new kb(gb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fw(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Lo(ob,"3.12.2",e),Lo(ob,"3.12.2","esm2017")}();function QO(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new kb("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function YO(){if("undefined"===typeof Uint8Array)throw new kb("unimplemented","Uint8Arrays are not available in this environment.")}function $O(){if("undefined"==typeof atob)throw new kb("unimplemented","Blobs are unavailable in Firestore in this environment.")}var XO=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return $O(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return YO(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return $O(),new e(ID.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return YO(),new e(ID.fromUint8Array(t))}}]),e}();function JO(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=N(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(UB){i.e(UB)}finally{i.f()}return!1}(e,["next","error","complete"])}var eR=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){CD(e=rD(e,gD));var n=kD(e);if(n._uninitializedComponentsProvider)throw new kb(gb.FAILED_PRECONDITION,"SDK cache is already specified.");db("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new EA;return _D(n,i,new xA(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){CD(e=rD(e,gD));var t=kD(e);if(t._uninitializedComponentsProvider)throw new kb(gb.FAILED_PRECONDITION,"SDK cache is already specified.");db("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new EA;return _D(t,r,new SA(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new kb(gb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new bb;return e._queue.enqueueAndForgetEvenWhileRestricted((0,s.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n_.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,n_.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(mI(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),tR=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof fw||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||db("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};sD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return wD(this._delegate)}},{key:"disableNetwork",value:function(){return xD(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&JA("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new bb;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=qN,n.next=3,ZA(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(kD(rD(this._delegate,gD)))}},{key:"onSnapshotsInSync",value:function(e){return BO(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new kb("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new vR(this,fD(this._delegate,e))}catch(t){throw sR(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new oR(this,hD(this._delegate,e))}catch(t){throw sR(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new hR(this,function(e,t){if(e=rD(e,oD),XA("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new kb(gb.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cD(e,null,function(e){return new px(Mb.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw sR(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=rD(e,gD);var r=Object.assign(Object.assign({},qO),n);return function(e){if(e.maxAttempts<1)throw new kb(gb.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new bb;return e.asyncQueue.enqueueAndForget((0,s.Z)((0,o.Z)().mark((function i(){var a;return(0,o.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,WA(e);case 2:a=i.sent,new AA(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(kD(e),(function(n){return t(new HO(e,n))}),r)}(this._delegate,(function(n){return e(new rR(t,n))}))}},{key:"batch",value:function(){var e=this;return kD(this._delegate),new iR(new ZO(this._delegate,(function(t){return VO(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return SD(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ED(this._delegate,e).then((function(e){return e?new hR(t,e):null}))}}]),e}(),nR=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new XO(new ID(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return oR.forKey(t,this.firestore,null)}}]),n}(EO);var rR=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new nR(t)}return y(e,[{key:"get",value:function(e){var t=this,n=yR(e);return this._delegate.get(n).then((function(e){return new lR(t._firestore,new NO(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=yR(e);return n?(QO("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=yR(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=yR(e);return this._delegate.delete(t),this}}]),e}(),iR=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=yR(e);return n?(QO("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=yR(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=yR(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),aR=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new AO(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fR(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new nR(t),n),i.set(n,a)),a}}]),e}();aR.INSTANCES=new WeakMap;var oR=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new nR(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new vR(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new vR(this.firestore,fD(this._delegate,e))}catch(t){throw sR(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ra(e))instanceof uD&&dD(this._delegate,e)}},{key:"set",value:function(e,t){t=QO("DocumentReference.set",t);try{return t?MO(this._delegate,e,t):MO(this._delegate,e)}catch(n){throw sR(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?FO(this._delegate,e):FO.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw sR(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return VO(rD((e=this._delegate).firestore,gD),[new SS(e._key,cS.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=uR(n),a=cR(n,(function(t){return new lR(e.firestore,new NO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return UO(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?jO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rD(e,uD);var t=rD(e.firestore,gD);return GA(kD(t),e._key,{source:"server"}).then((function(n){return zO(t,e,n)}))}(this._delegate):function(e){e=rD(e,uD);var t=rD(e.firestore,gD);return GA(kD(t),e._key).then((function(n){return zO(t,e,n)}))}(this._delegate)).then((function(e){return new lR(t.firestore,new NO(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(aR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new kb("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new uD(n._delegate,r,new Bb(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new uD(n._delegate,r,t))}}]),e}();function sR(e,t,n){return e.message=e.message.replace(t,n),e}function uR(e){var t,n=N(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!JO(r))return r}}catch(UB){n.e(UB)}finally{n.f()}return{}}function cR(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JO(e[0])?e[0]:JO(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var lR=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new oR(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return RO(this._delegate,e._delegate)}}]),e}(),fR=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||vb(),t}}]),n}(lR),hR=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new nR(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,cO(this._delegate,function(e,t,n){var r=t,i=aO("where",e);return lO._create(i,r,n)}(t,n,r)))}catch(i){throw sR(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,cO(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=aO("orderBy",e);return hO._create(n,t)}(t,n)))}catch(r){throw sR(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,cO(this._delegate,(iD("limit",n=t),dO._create("limit",n,"F"))))}catch(r){throw sR(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,cO(this._delegate,(iD("limitToLast",n=t),dO._create("limitToLast",n,"L"))))}catch(r){throw sR(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,cO(this._delegate,vO.apply(void 0,arguments)))}catch(t){throw sR(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,cO(this._delegate,yO.apply(void 0,arguments)))}catch(t){throw sR(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,cO(this._delegate,gO.apply(void 0,arguments)))}catch(t){throw sR(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,cO(this._delegate,kO.apply(void 0,arguments)))}catch(t){throw sR(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return pD(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?LO(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rD(e,cD);var t=rD(e.firestore,gD),n=kD(t),r=new PO(t);return QA(n,e._query,{source:"server"}).then((function(n){return new DO(t,r,e,n)}))}(this._delegate):function(e){e=rD(e,cD);var t=rD(e.firestore,gD),n=kD(t),r=new PO(t);return oO(e._query),QA(n,e._query).then((function(n){return new DO(t,r,e,n)}))}(this._delegate)).then((function(e){return new pR(t.firestore,new DO(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=uR(n),a=cR(n,(function(t){return new pR(e.firestore,new DO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return UO(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(aR.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),dR=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new fR(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),pR=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new hR(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new fR(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new dR(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new fR(n._firestore,r))}))}},{key:"isEqual",value:function(e){return RO(this._delegate,e._delegate)}}]),e}(),vR=function(e){g(n,e);var t=x(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new oR(this.firestore,e):null}},{key:"doc",value:function(e){try{return new oR(this.firestore,void 0===e?hD(this._delegate):hD(this._delegate,e))}catch(t){throw sR(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=rD(e.firestore,gD),r=hD(e),i=CO(e.converter,t);return VO(n,[FD(MD(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cS.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new oR(t.firestore,e)}))}},{key:"isEqual",value:function(e){return dD(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(aR.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(hR);function yR(e){return rD(e,uD)}var mR=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(TD,n)}return y(e,[{key:"isEqual",value:function(e){return(e=Ra(e))instanceof TD&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Ub.keyField().canonicalString())}}]),e}(),gR=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new VD("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new UD("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=KO.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=GO.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new ZD("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),kR={Firestore:tR,GeoPoint:AD,Timestamp:Pb,Blob:XO,Transaction:rR,WriteBatch:iR,DocumentReference:oR,DocumentSnapshot:lR,Query:hR,QueryDocumentSnapshot:fR,QuerySnapshot:pR,CollectionReference:vR,FieldPath:mR,FieldValue:gR,setLogLevel:function(e){var t;t=e,cb.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Pa("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},kR)))}(e,(function(e,t){return new tR(e,t,new eR)})),e.registerVersion("@firebase/firestore-compat","0.3.11")}(us);us.initializeApp({apiKey:"AIzaSyCncHs0oDoCmDveoAMZvSkLXuc4syN2Mg4",authDomain:"facebugserver.firebaseapp.com",databaseURL:"https://facebugserver-default-rtdb.europe-west1.firebasedatabase.app",projectId:"facebugserver",storageBucket:"facebugserver.appspot.com",messagingSenderId:"915472090039",appId:"1:915472090039:web:532f827244997362d29e32"});us.firestore();var bR,_R=us.storage().ref();function wR(e){var t=e.handleFileChange;return(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsx)("input",{className:"custom-file-input",type:"file",accept:".jpg,.jpeg,.png",multiple:!0,onChange:function(e){if(e.preventDefault(),e.target.files&&e.target.files[0])for(var n=0;n<e.target.files.length;n++){var r=e.target.files[n];t(r)}}})})}function xR(e,t,n,r){var i=window.innerWidth/4,a=window.innerHeight/4,o="width=600,height=600,left="+(window.innerWidth-i)/10+",top="+(window.innerHeight-a)/10;window.open("".concat(pi,"/#/call/").concat(r,"/").concat(e.Id,"/").concat(t.Id,"/").concat(n),"_blank",o)}function SR(e){var t=e.message,n=e.setMessages,i=e.setResponseToMessage,a=e.toWhom,o=e.isOpen,s=e.setIsOpen,u=(0,r.useContext)(ci).myProfile;return(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsxs)("div",{id:"message-options/".concat(a),className:"message-options",children:[(null===u||void 0===u?void 0:u.Id)==t.SenderId&&(0,oi.jsx)("img",{className:"message-options__icon",src:"".concat(pi,"/moreOptionsChat.png"),alt:"",onClick:function(){return e="moreOptions/".concat(t.Id),void s(o===e?"":e);var e}}),(0,oi.jsx)("img",{className:"message-options__icon",src:"".concat(pi,"/response.png"),alt:"",onClick:function(){i({Id:t.Id,SenderName:t.SenderName,TextContent:t.TextContent,MediaFiles:t.MediaFiles})}}),o==="moreOptions/".concat(t.Id)&&(0,oi.jsxs)("div",{className:"message-options-delete",children:[(0,oi.jsx)("div",{className:"message-options-delete__text",onClick:function(){n((function(e){return e.filter((function(e){return e.Id!==t.Id}))})),bi({userId:t.SenderId,friendId:t.ReceiverId,messageId:t.Id,date:t.Date},"remove-message")},children:"Delete"}),(0,oi.jsx)("div",{className:"message-options-delete__text",children:"Share"})]})]})})}function ER(e){var t=e.children;return"undefined"==typeof document?(0,oi.jsx)(oi.Fragment,{children:t}):qr.createPortal(t,document.body)}function CR(e){var t=e.images,n=e.toggleModal,i=(0,r.useState)(0),a=(0,u.Z)(i,2),o=a[0],s=a[1],c=(0,r.useRef)(null),l=(0,r.useRef)(null),f=(0,r.useState)(!0),h=(0,u.Z)(f,2),d=h[0],p=h[1],v=(0,r.useState)(!0),y=(0,u.Z)(v,2),m=y[0],g=y[1];return(0,r.useEffect)((function(){Number.isInteger(o)&&(g(0===o),p(o===t.length-1))}),[o]),(0,oi.jsx)(ER,{children:(0,oi.jsx)("div",{className:"showFullImages",children:(0,oi.jsxs)("div",{className:"showFullImages-container",children:[(0,oi.jsx)("img",{className:"showFullImages-container__close",src:"".concat(pi,"/close.png"),alt:"",onClick:n}),(0,oi.jsx)("div",{className:"showFullImages-container__image",children:(0,oi.jsx)("img",{src:t[o],alt:"image"})}),!m&&(0,oi.jsx)("div",{ref:c,className:"scrollImages scrollImages-left",onClick:function(){return s((function(e){return e-1}))},children:(0,oi.jsx)("img",{src:"".concat(pi,"/goBackArrow.png"),alt:""})}),!d&&(0,oi.jsx)("div",{ref:l,className:"scrollImages scrollImages-right",onClick:function(){return s((function(e){return e+1}))},children:(0,oi.jsx)("img",{src:"".concat(pi,"/goBackArrow.png"),alt:""})})]})})})}function IR(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var TR=ai.styled(bR||(bR=IR(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  background-color: #ffffff;\n  flex-direction: column;\n"])));function NR(e){var t=e.isOpen,n=e.toggleModal,r=e.children;return(0,oi.jsx)(TR,{isOpen:t,onBackgroundClick:n,onEscapeKeydown:n,children:r})}function AR(e){var t=e.message,n=e.setMessages,i=e.setResponseToMessage,a=e.notResponding,o=e.toWhom,s=e.optionsOpen,c=e.setOptionsOpen,l=(0,r.useContext)(ci).myProfile,f=(0,r.useState)({}),h=(0,u.Z)(f,2),d=h[0],p=h[1],v=(0,r.useState)(!1),y=(0,u.Z)(v,2),m=y[0],g=y[1],k=(0,r.useState)(!1),b=(0,u.Z)(k,2),_=b[0],w=b[1],x=(0,r.useState)(!1),S=(0,u.Z)(x,2),E=S[0],C=S[1];function I(){w(!_)}return(0,r.useEffect)((function(){l&&(l.Id==t.SenderId?p({alignSelf:"flex-end",flexDirection:"row-reverse"}):(p({alignSelf:"flex-start",flexDirection:"row"}),g(!0)))}),[l]),(0,oi.jsxs)("div",{id:"message/".concat(t.Id),className:"message",style:d,onMouseEnter:function(){C(!0)},onMouseLeave:function(){C(!1)},children:[(0,oi.jsx)(OR,{message:t,isOpen:_,toggleModal:I}),(0,oi.jsx)(DR,{message:t,fromFriend:m,toggleModal:I,setMessages:n}),a&&(0,oi.jsx)("div",{style:{opacity:E?"1":"0"},children:(0,oi.jsx)(SR,{message:t,setMessages:n,setResponseToMessage:i,toWhom:o,isOpen:s,setIsOpen:c})})]})}var DR=function(e){var t=e.message,n=e.fromFriend,i=e.toggleModal,a=e.setMessages,c=(0,r.useContext)(ci).myProfile,l=(0,r.useState)(!1),f=(0,u.Z)(l,2),h=(f[0],f[1],n?{backgroundColor:"#E4E6EB"}:{backgroundColor:"#0084ff"}),d=n?"#2f2f2f":"#ffffff",p=t.MediaFiles.length<4?t.MediaFiles.length:4,v=t.responseTo&&t.responseTo.MediaFiles.length<4?t.MediaFiles.length:4;function y(){return y=(0,s.Z)((0,o.Z)().mark((function e(){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=document.getElementById("message/".concat(t.responseTo.Id)))){e.next=4;break}return n.scrollIntoView(),e.abrupt("return");case 4:return e.next=6,bi({userId:c.Id,friendId:t.SenderId===c.Id?t.ReceiverId:t.SenderId,messageId:t.responseTo.Id},"get-all-to-message");case 6:r=e.sent,i=[],null===r||void 0===r||r.forEach((function(e,t){(null===r||void 0===r?void 0:r.length)==t+1&&i.push("empty"),i.push(e)})),a(i.reverse());case 10:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}return(0,oi.jsxs)("div",{className:"message-content medium-font",style:(0,Ga.Z)({color:d},h),children:[t.responseTo&&(0,oi.jsx)("div",{className:"message-responseTo",onClick:function(){return y.apply(this,arguments)},children:(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsxs)("div",{className:"message-responseTo-content",children:[(0,oi.jsxs)("div",{className:"message-responseTo-content__autor",children:["Respond to"," ",(0,oi.jsx)("span",{className:"bolder",children:t.responseTo.SenderName})]}),(0,oi.jsx)("span",{className:"message-responseTo-content__text",children:t.responseTo.TextContent}),t.responseTo.MediaFiles.length>0&&(0,oi.jsx)("div",{className:"message-responseTo-content__media",style:{gridTemplateColumns:"repeat(".concat(v,", 1fr)")},children:t.responseTo.MediaFiles.map((function(e){return(0,oi.jsx)("img",{src:e,alt:""},e)}))})]})})}),t.TextContent,t.MediaFiles.length>0&&(0,oi.jsx)("div",{className:"message-content-media",style:{gridTemplateColumns:"repeat(".concat(p,", 1fr)")},onClick:function(){console.log(t.MediaFiles),i()},children:t.MediaFiles.map((function(e){return(0,oi.jsx)("img",{src:e,alt:""},e)}))}),t.VoiceFile&&(0,oi.jsx)("audio",{className:"message-content-audio",src:t.VoiceFile,controls:!0})]})},OR=function(e){var t=e.message,n=e.isOpen,r=e.toggleModal;return(0,oi.jsx)(NR,{isOpen:n,toggleModal:r,children:(0,oi.jsx)("div",{className:"full-container flex-column-center",style:{height:"100vh"},children:(0,oi.jsx)("span",{className:"body",style:{height:"100%"},children:(0,oi.jsx)(CR,{images:t.MediaFiles,toggleModal:r})})})})};function RR(e){var t=e.messages,n=e.setMessages,r=e.setResponseToMessage,i=e.toWhom,a=e.optionsOpen,o=e.setOptionsOpen;return(0,oi.jsx)("div",{className:"listOfMessages",children:t?t.map((function(e){return(0,oi.jsx)(oi.Fragment,{children:e.Id?(0,oi.jsx)(AR,{message:e,setMessages:n,setResponseToMessage:r,notResponding:!0,toWhom:i,optionsOpen:a,setOptionsOpen:o},e.Id):(0,oi.jsx)("span",{id:"scrollable-span"})})})):(0,oi.jsx)("span",{style:{padding:"0.5rem"},children:"Loading messages..."})})}!function(e){try{if(typeof window>"u")return;var t=document.createElement("style");t.appendChild(document.createTextNode(".audio-recorder{background-color:#ebebeb;box-shadow:0 2px 5px #bebebe;border-radius:20px;box-sizing:border-box;color:#000;width:40px;display:flex;align-items:center;transition:all .2s ease-in;-webkit-tap-highlight-color:transparent}.audio-recorder-mic{box-sizing:content-box;cursor:pointer;height:16px;color:#000;padding:12px}.audio-recorder .audio-recorder-mic{border-radius:20px}.audio-recorder.recording .audio-recorder-mic{border-radius:0}.audio-recorder-timer,.audio-recorder-status{color:#000;margin-left:10px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;font-size:14px;font-weight:400;line-height:1}.audio-recorder-status{margin-left:15px;display:flex;align-items:baseline;flex-grow:1;animation-name:fading-ar-status;animation-duration:2s;animation-iteration-count:infinite}.audio-recorder-status-dot{background-color:#d00;border-radius:50%;height:10px;width:9px;margin-right:5px}.audio-recorder-options{box-sizing:content-box;height:16px;cursor:pointer;padding:12px 6px 12px 12px}.audio-recorder-options~.audio-recorder-options{padding:12px 12px 12px 6px;border-radius:0 5px 5px 0}.recording{border-radius:12px;width:300px;transition:all .2s ease-out}.display-none{display:none}.audio-recorder-visualizer{margin-left:15px;flex-grow:1;align-self:center;display:flex;align-items:center}@keyframes fading-ar-status{0%{opacity:1}50%{opacity:0}to{opacity:1}}")),document.head.appendChild(t)}catch(n){console.error("vite-plugin-css-injected-by-js",n)}}();var PR=function(e,t){var n=(0,r.useState)(!1),i=(0,u.Z)(n,2),a=i[0],o=i[1],s=(0,r.useState)(!1),c=(0,u.Z)(s,2),l=c[0],f=c[1],h=(0,r.useState)(0),d=(0,u.Z)(h,2),p=d[0],v=d[1],y=(0,r.useState)(),m=(0,u.Z)(y,2),g=m[0],k=m[1],b=(0,r.useState)(),_=(0,u.Z)(b,2),w=_[0],x=_[1],S=(0,r.useState)(),E=(0,u.Z)(S,2),C=E[0],I=E[1],T=(0,r.useCallback)((function(){var e=setInterval((function(){v((function(e){return e+1}))}),1e3);x(e)}),[v,x]),N=(0,r.useCallback)((function(){null!=w&&clearInterval(w),x(void 0)}),[w,x]),A=(0,r.useCallback)((function(){null==w&&navigator.mediaDevices.getUserMedia({audio:null==e||e}).then((function(e){o(!0);var t=new MediaRecorder(e);k(t),t.start(),T(),t.addEventListener("dataavailable",(function(e){I(e.data),t.stream.getTracks().forEach((function(e){return e.stop()})),k(void 0)}))})).catch((function(e){console.log(e.name,e.message,e.cause),null==t||t(e)}))}),[w,o,k,T,I,t]);return{startRecording:A,stopRecording:(0,r.useCallback)((function(){null==g||g.stop(),N(),v(0),o(!1),f(!1)}),[g,v,o,f,N]),togglePauseResume:(0,r.useCallback)((function(){l?(f(!1),null==g||g.resume(),T()):(f(!0),N(),null==g||g.pause())}),[g,f,T,N]),recordingBlob:C,isRecording:a,isPaused:l,recordingTime:p,mediaRecorder:g}},jR=r.lazy((0,s.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(890).then(n.bind(n,890));case 2:return t=e.sent,r=t.LiveAudioVisualizer,e.abrupt("return",{default:r});case 5:case"end":return e.stop()}}),e)})))),LR=function(e){var t,n,i,a,o,s,c=e.onRecordingComplete,l=e.onNotAllowedOrFound,f=e.recorderControls,h=e.audioTrackConstraints,d=e.downloadOnSavePress,p=void 0!==d&&d,v=e.downloadFileExtension,y=void 0===v?"mp3":v,m=e.showVisualizer,g=void 0!==m&&m,k=e.classes,b=null!=f?f:PR(h,l),_=b.startRecording,w=b.stopRecording,x=b.togglePauseResume,S=b.recordingBlob,E=b.isRecording,C=b.isPaused,I=b.recordingTime,T=b.mediaRecorder,N=(0,r.useState)(!1),A=(0,u.Z)(N,2),D=A[0],O=A[1],R=function(){O(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]),w()};return(0,r.useEffect)((function(){(D||f)&&null!=S&&null!=c&&(c(S),p&&function(e){var t=new Blob([e],{type:"audio/".concat(y)}),n=URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=n,r.download="audio.".concat(y),document.body.appendChild(r),r.click(),r.remove()}(S))}),[S]),r.createElement("div",{className:"audio-recorder ".concat(E?"recording":""," ").concat(null!=(t=null==k?void 0:k.AudioRecorderClass)?t:""),"data-testid":"audio_recorder"},r.createElement("img",{src:E?"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMThweCIgaGVpZ2h0PSIxOHB4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogIDxwYXRoIGZpbGw9IiMwMDAwMDAiIGQ9Ik0xNy44NSAzLjE1bC0yLjk5LTNBLjUwOC41MDggMCAwIDAgMTQuNSAwSDEuNEExLjQxNyAxLjQxNyAwIDAgMCAwIDEuNDN2MTUuMTRBMS40MTcgMS40MTcgMCAwIDAgMS40IDE4aDE1LjJhMS40MTcgMS40MTcgMCAwIDAgMS40LTEuNDNWMy41YS40Ny40NyAwIDAgMC0uMTUtLjM1ek0yIDVWM2ExIDEgMCAwIDEgMS0xaDhhMSAxIDAgMCAxIDEgMXYyYTEgMSAwIDAgMS0xIDFIM2ExIDEgMCAwIDEtMS0xem03IDExYTQgNCAwIDEgMSA0LTQgNCA0IDAgMCAxLTQgNHoiLz4NCjwvc3ZnPg0K":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQ3MCA0NzAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ3MCA0NzA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCgk8Zz4NCgkJPHBhdGggZD0iTTIzNSwzMDIuMjk2YzQ3LjE3NywwLDg1LjQyMy0zOC4yNDUsODUuNDIzLTg1LjQyM1Y4NS40MjNDMzIwLjQyMywzOC4yNDUsMjgyLjE3NywwLDIzNSwwcy04NS40MjMsMzguMjQ1LTg1LjQyMyw4NS40MjMNCgkJCXYxMzEuNDUxQzE0OS41NzcsMjY0LjA1MSwxODcuODIzLDMwMi4yOTYsMjM1LDMwMi4yOTZ6Ii8+DQoJCTxwYXRoIGQ9Ik0zNTAuNDIzLDEzNi4xNDh2MzBoMTV2NTAuNzI2YzAsNzEuOTE1LTU4LjUwOCwxMzAuNDIzLTEzMC40MjMsMTMwLjQyM3MtMTMwLjQyMy01OC41MDctMTMwLjQyMy0xMzAuNDIzdi01MC43MjZoMTV2LTMwDQoJCQloLTQ1djgwLjcyNkM3NC41NzcsMzAwLjI3MywxMzguNTUxLDM2OSwyMjAsMzc2LjU4OVY0NDBoLTkwLjQ0NHYzMGgyMTAuODg5di0zMEgyNTB2LTYzLjQxMQ0KCQkJYzgxLjQ0OS03LjU4OSwxNDUuNDIzLTc2LjMxNywxNDUuNDIzLTE1OS43MTZ2LTgwLjcyNkgzNTAuNDIzeiIvPg0KCTwvZz4NCjwvc3ZnPg0K",className:"audio-recorder-mic ".concat(null!=(n=null==k?void 0:k.AudioRecorderStartSaveClass)?n:""),onClick:E?function(){return R()}:_,"data-testid":"ar_mic",title:E?"Save recording":"Start recording"}),r.createElement("span",{className:"audio-recorder-timer ".concat(E?"":"display-none"," ").concat(null!=(i=null==k?void 0:k.AudioRecorderTimerClass)?i:""),"data-testid":"ar_timer"},Math.floor(I/60),":",String(I%60).padStart(2,"0")),g?r.createElement("span",{className:"audio-recorder-visualizer ".concat(E?"":"display-none")},T&&r.createElement(r.Suspense,{fallback:r.createElement(r.Fragment,null)},r.createElement(jR,{mediaRecorder:T,barWidth:2,gap:2,width:140,height:30,fftSize:512,maxDecibels:-10,minDecibels:-80,smoothingTimeConstant:.4}))):r.createElement("span",{className:"audio-recorder-status ".concat(E?"":"display-none"," ").concat(null!=(a=null==k?void 0:k.AudioRecorderStatusClass)?a:"")},r.createElement("span",{className:"audio-recorder-status-dot"}),"Recording"),r.createElement("img",{src:C?"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDQ5NC4xNDggNDk0LjE0OCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDk0LjE0OCA0OTQuMTQ4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQoJPGc+DQoJCTxnPg0KCQkJPHBhdGggZD0iTTQwNS4yODQsMjAxLjE4OEwxMzAuODA0LDEzLjI4QzExOC4xMjgsNC41OTYsMTA1LjM1NiwwLDk0Ljc0LDBDNzQuMjE2LDAsNjEuNTIsMTYuNDcyLDYxLjUyLDQ0LjA0NHY0MDYuMTI0DQoJCQkJYzAsMjcuNTQsMTIuNjgsNDMuOTgsMzMuMTU2LDQzLjk4YzEwLjYzMiwwLDIzLjItNC42LDM1LjkwNC0xMy4zMDhsMjc0LjYwOC0xODcuOTA0YzE3LjY2LTEyLjEwNCwyNy40NC0yOC4zOTIsMjcuNDQtNDUuODg0DQoJCQkJQzQzMi42MzIsMjI5LjU3Miw0MjIuOTY0LDIxMy4yODgsNDA1LjI4NCwyMDEuMTg4eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9zdmc+DQo=":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNDcuNjA3IDQ3LjYwNyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDcuNjA3IDQ3LjYwNzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KCTxnPg0KCQk8cGF0aCBkPSJNMTcuOTkxLDQwLjk3NmMwLDMuNjYyLTIuOTY5LDYuNjMxLTYuNjMxLDYuNjMxbDAsMGMtMy42NjIsMC02LjYzMS0yLjk2OS02LjYzMS02LjYzMVY2LjYzMUM0LjcyOSwyLjk2OSw3LjY5OCwwLDExLjM2LDANCgkJCWwwLDBjMy42NjIsMCw2LjYzMSwyLjk2OSw2LjYzMSw2LjYzMVY0MC45NzZ6Ii8+DQoJCTxwYXRoIGQ9Ik00Mi44NzcsNDAuOTc2YzAsMy42NjItMi45NjksNi42MzEtNi42MzEsNi42MzFsMCwwYy0zLjY2MiwwLTYuNjMxLTIuOTY5LTYuNjMxLTYuNjMxVjYuNjMxDQoJCQlDMjkuNjE2LDIuOTY5LDMyLjU4NSwwLDM2LjI0NiwwbDAsMGMzLjY2MiwwLDYuNjMxLDIuOTY5LDYuNjMxLDYuNjMxVjQwLjk3NnoiLz4NCgk8L2c+DQo8L3N2Zz4NCg==",className:"audio-recorder-options ".concat(E?"":"display-none"," ").concat(null!=(o=null==k?void 0:k.AudioRecorderPauseResumeClass)?o:""),onClick:x,title:C?"Resume recording":"Pause recording","data-testid":"ar_pause"}),r.createElement("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgNDYuNzM0IDQ2LjczNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDYuNzM0IDQ2LjczNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPHBhdGggZD0iTTQxLjM0NiwwSDUuMzg4QzIuNDE3LDAsMCwyLjQxNywwLDUuMzg4djM1Ljk1OGMwLDIuOTcxLDIuNDE3LDUuMzg4LDUuMzg4LDUuMzg4aDM1Ljk1OGMyLjk3MSwwLDUuMzg4LTIuNDE3LDUuMzg4LTUuMzg4DQoJCVY1LjM4OEM0Ni43MzMsMi40MTcsNDQuMzE2LDAsNDEuMzQ2LDB6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==",className:"audio-recorder-options ".concat(E?"":"display-none"," ").concat(null!=(s=null==k?void 0:k.AudioRecorderDiscardClass)?s:""),onClick:function(){return R(!1)},title:"Discard Recording","data-testid":"ar_cancel"}))};function MR(e){var t=e.setVoiceMessage,n=e.setAudioURL,i=e.voiceMessage,a=e.removedVoiceMes,o=e.setRemovedVoiceMes,s=(0,r.useState)(!1),c=(0,u.Z)(s,2),l=c[0],f=c[1],h=PR();var d="".concat(pi,l?"/stop-record.png":"/micro-on-chat.png");return(0,oi.jsx)("div",{className:"recordMessager",children:i?(0,oi.jsx)("img",{src:"".concat(pi,"/close.png"),onClick:function(){o(!0),t(void 0),n("")},alt:""}):(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("img",{src:d,onClick:function(){l?(h.stopRecording(),f(!1)):(o(!1),h.startRecording(),f(!0))},alt:""}),(0,oi.jsx)("style",{children:".audio-recorder{\n                display: none;\n              }"}),(0,oi.jsx)(LR,{onRecordingComplete:function(e){return function(e){if(!a){var r=URL.createObjectURL(e);n(r),t(e)}}(e)},recorderControls:h})]})})}var FR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0px",n=(0,r.useState)(!1),i=(0,u.Z)(n,2),a=i[0],o=i[1],s=(0,r.useMemo)((function(){return new IntersectionObserver((function(e){var t=(0,u.Z)(e,1)[0];o(t.isIntersecting)}),{rootMargin:t})}),[]);return(0,r.useEffect)((function(){if(null!=e.current)return s.observe(e.current),function(){s.disconnect()}}),[e.current,s]),a};function UR(e){var t=e.friend,n=e.chatInMessager,i=e.smallChatClose,a=(0,r.useState)(),o=(0,u.Z)(a,2),s=o[0],c=o[1],l=(0,r.useRef)(null);return(0,oi.jsxs)("section",{id:"chat/".concat(t.Id),className:"chat","data-testid":"chatWithFriend",children:[(0,oi.jsx)(VR,{friend:t,chatInMessager:n,smallChatClose:i}),(0,oi.jsx)(zR,{friend:t,setRespondTo:c,newestMessagesRef:l}),(0,oi.jsx)(qR,{friend:t,newestMessagesRef:l,respondTo:s,setRespondTo:c})]})}var BR,VR=function(e){var t=e.friend,n=e.chatInMessager,i=e.smallChatClose,a=xe(),o=(0,r.useContext)(ci).myProfile,s=(0,r.useContext)(di),u=s.openedChats,c=s.updateOpenedChats,l=t.ProfileImage||"".concat(pi,"/noProfile.jpg");return(0,oi.jsxs)("div",{id:"chat-header/".concat(t.Id),className:"chat-header",children:[(0,oi.jsx)(oi.Fragment,{children:i}),(0,oi.jsxs)("span",{className:"chat-header-userProfile",children:[(0,oi.jsx)("img",{onClick:function(){a("/user-profile/".concat(t.Id))},className:"chat-header-userProfile-image",src:l,alt:""}),(0,oi.jsx)("span",{className:"chat-header-userProfile-name",children:t.Email})]}),(0,oi.jsx)("img",{className:"chat-header-call",src:"".concat(pi,"/video-call.png"),onClick:function(){var e=zi();OB.emit("create-join-room",{myId:o.Id,friendId:t.Id,roomId:e}),xR(o,t,e,"caller")},alt:""}),!n&&(0,oi.jsx)("img",{"data-testid":"chatWithFriend-closeChat",className:"chat-header-close",src:"".concat(pi,"/close.png"),onClick:function(){var e=u.filter((function(e){return e.Id!=t.Id}));c(e)},alt:""})]})},zR=function(e){var t=e.friend,n=e.setRespondTo,i=e.newestMessagesRef,a=(0,r.useContext)(ci).myProfile,c=(0,r.useState)([]),l=(0,u.Z)(c,2),f=l[0],d=l[1],p=(0,r.useState)(!1),v=(0,u.Z)(p,2),y=v[0],m=v[1],g=(0,r.useState)(!1),k=(0,u.Z)(g,2),b=k[0],_=k[1],w=(0,r.useState)(""),x=(0,u.Z)(w,2),S=x[0],E=x[1],C=t.ProfileImage||"".concat(pi,"/noProfile.jpg"),I=(0,r.useRef)(null),T=10;(0,r.useEffect)((function(){i.current&&i.current.scrollIntoView()}),[i,y]);var N=FR(I,"400px");function A(){return D.apply(this,arguments)}function D(){return(D=(0,s.Z)((0,o.Z)().mark((function e(){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return");case 2:return n=(null===f||void 0===f?void 0:f.length)+T,e.next=5,bi({userId:a.Id,friendId:t.Id,numberOfMessages:n},"get-chat-messages");case 5:(r=e.sent)&&f&&r.length==f.length&&_(!0),m(!0),i=[],null===r||void 0===r||r.forEach((function(e,t){(null===f||void 0===f?void 0:f.length)==t+1&&i.push("empty"),i.push(e)})),d(i.reverse());case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.useEffect)((function(){N&&A()}),[N]),(0,r.useEffect)((function(){a.Id&&i&&t.Id&&(A(),OB.on("receive-message/".concat(a.Id,"/").concat(t.Id),(function(e){f.includes(e)||(d((function(t){return[].concat(h(t),[e])})),setTimeout((function(){i.current&&i.current.scrollIntoView()}),400))})))}),[a,i,t.Id]),(0,r.useEffect)((function(){if(t.Id){var e=document.getElementById("scrollable-span");e&&e.scrollIntoView()}}),[f,t.Id]),(0,oi.jsxs)("div",{id:"chat-body/".concat(t.Id),className:"chat-body",children:[(0,oi.jsxs)("div",{className:"chat-body-start",children:[(0,oi.jsx)("img",{src:C,alt:""}),(0,oi.jsx)("h5",{children:t.Email})]}),(0,oi.jsxs)("div",{className:"chat-body-messages",children:[(0,oi.jsx)("span",{ref:I}),(0,oi.jsx)(RR,{messages:f,setMessages:d,setResponseToMessage:n,toWhom:t.Id,optionsOpen:S,setOptionsOpen:E}),(0,oi.jsx)("span",{ref:i})]})]})},qR=function(e){var t=e.friend,n=e.newestMessagesRef,i=e.respondTo,a=e.setRespondTo,c=(0,r.useContext)(ci).myProfile,l=(0,r.useState)(""),f=(0,u.Z)(l,2),d=f[0],p=f[1],v=(0,r.useState)(""),y=(0,u.Z)(v,2),m=y[0],g=y[1],k=(0,r.useState)(),b=(0,u.Z)(k,2),_=b[0],w=b[1],x=(0,r.useState)(!1),S=(0,u.Z)(x,2),E=S[0],C=S[1],I=(0,r.useState)([]),T=(0,u.Z)(I,2),N=T[0],A=T[1],D=(0,r.useRef)(null),O=(0,r.useRef)(null);function R(){return R=(0,s.Z)((0,o.Z)().mark((function e(){var r,l,f,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={SenderId:c.Id,ReceiverId:t.Id,SenderName:c.Email.split("@")[0],TextContent:d,MediaFiles:[],VoiceFile:"",Date:Date.now(),Emojis:[],AmountOfEmojis:0,responseTo:i},l=[],N.length>0&&(l=N.map(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.Z)(t,2),r=n[0],n[1],i=_R.child("/messageImages/".concat(null===r||void 0===r?void 0:r.name,"+").concat(zi())),e.next=4,i.put(r);case 4:return e.next=6,i.getDownloadURL();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=5,Promise.all(l);case 5:if(r.MediaFiles=e.sent,!_){e.next=14;break}return f=_R.child("/messageVoices/".concat(zi())),e.next=10,f.put(_);case 10:return e.next=12,f.getDownloadURL();case 12:h=e.sent,r.VoiceFile=h;case 14:OB.emit("send-message",r),setTimeout((function(){var e;A([]),w(void 0),g(""),C(!0),p(""),a(void 0),(e=D).current&&Array.from(e.current.childNodes).forEach((function(e){e.nodeType===Node.TEXT_NODE&&(e.textContent=" ")})),n.current&&n.current.scrollIntoView()}),500);case 16:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}var P=""!=d||N.length>0||""!=m?"80%":"45%",j=function(e){var t=new FileReader;t.onload=function(){var n=t.result;A((function(t){return[].concat(h(t),[[e,n]])}))},e&&t.readAsDataURL(e)};return(0,oi.jsxs)("div",{className:"chat-footer",children:[""==d&&!_&&N.length<=0&&(0,oi.jsx)("div",{style:{width:"3rem",height:"3rem",padding:"0.2rem"},children:(0,oi.jsx)(wR,{handleFileChange:j})}),(0,oi.jsx)(MR,{setVoiceMessage:w,setAudioURL:g,voiceMessage:_,removedVoiceMes:E,setRemovedVoiceMes:C}),i&&(0,oi.jsxs)("div",{className:"chat-footer-input-responseTo flexColumnLeft medium-font",children:[(0,oi.jsx)("img",{className:"erase-image",onClick:function(){return a(void 0)},src:"".concat(pi,"/close.png"),alt:""}),(0,oi.jsxs)("span",{children:["You respond to"," ",(0,oi.jsx)("span",{className:"bolder",children:i.SenderName})]}),i.MediaFiles.length>0&&(0,oi.jsx)("span",{children:"Image"}),(0,oi.jsx)("span",{className:"chat-footer-input-responseTo__text",children:i.TextContent})]}),(0,oi.jsx)("div",{className:"chat-footer-container",style:{width:P},children:(0,oi.jsxs)("div",{ref:O,className:"chat-footer-input",children:[(0,oi.jsx)("div",{ref:D,style:{height:"100%",width:"100%",outline:"none"},contentEditable:!0,onInput:function(e){return p(e.target.innerText)}}),N&&N.length>0&&(0,oi.jsxs)("span",{className:"chat-footer-input-images-container",children:[(0,oi.jsx)("div",{style:{width:"3rem",height:"3rem"},children:(0,oi.jsx)(wR,{handleFileChange:j})}),N.map((function(e){var t=(0,u.Z)(e,2),n=t[0],r=t[1];return(0,oi.jsxs)("div",{className:"chat-footer-input-image",style:{width:"3rem"},children:[(0,oi.jsx)("img",{style:{height:"100%",width:"3rem",outline:"none"},src:r,alt:""}),(0,oi.jsx)("img",{className:"erase-image",src:"".concat(pi,"/redX.png"),onClick:function(){return function(e){var t=N.filter((function(t){var n=(0,u.Z)(t,2),r=n[0];return n[1],r.name!=e}));A(t)}(n.name)},alt:""})]})}))]}),_&&m&&(0,oi.jsx)("audio",{style:{width:"100%"},src:m,controls:!0})]})}),(0,oi.jsx)("img",{className:"chat-footer-send",src:d||0!=N.length||_?"".concat(pi,"/sendBtn.png"):"".concat(pi,"/like.png"),onClick:function(){return R.apply(this,arguments)},alt:""})]})};function ZR(e){var t=e.openedChats;return(0,oi.jsx)("div",{className:"listOfOpenedChats",children:t&&t.map((function(e){return(0,oi.jsx)(UR,{friend:e},e.Id)}))})}var WR=ai.styled(BR||(BR=IR(["\n  width: 20rem;\n  display: flex;\n  align-items: center;\n  background-color: #ffffff;\n  flex-direction: column;\n  padding:1rem;\n  text-align:center;\n  gap:1rem;\n"])));function HR(e){var t=e.friend,n=e.onSubmit,i=e.setCall,a=e.onClose,o=(0,r.useState)(!0),s=(0,u.Z)(o,2),c=s[0],l=s[1];function f(){l(!c),i((0,oi.jsx)(oi.Fragment,{}))}return(0,oi.jsxs)(WR,{isOpen:c,onBackgroundClick:f,onEscapeKeydown:f,children:[t.Email," is calling...",(0,oi.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,oi.jsx)("img",{className:"call-image",src:"".concat(pi,"/accept-call.png"),onClick:function(){f(),n()},alt:""}),(0,oi.jsx)("img",{className:"call-image",src:"".concat(pi,"/leave-call.png"),onClick:function(){a(),f()},alt:""})]})]})}function KR(e,t,n){localStorage.setItem("id",e),localStorage.setItem("email",t),localStorage.setItem("profileImage",n)}function GR(){var e=localStorage.getItem("id"),t=localStorage.getItem("email"),n=localStorage.getItem("profileImage"),r={Id:e,Email:t};return r.ProfileImage=n||"".concat(pi,"/noProfile.jpg"),r}var QR,YR=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t,n){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((function(e){return[t].concat(h(e))}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function $R(e){var t=e.handleFileChange,n=(0,r.useState)(!1),i=(0,u.Z)(n,2),a=i[0],o=i[1],s=(0,r.useRef)(null),c=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?o(!0):"dragleave"===e.type&&o(!1)};return(0,oi.jsxs)("form",{id:"form-file-upload",onDragEnter:c,onSubmit:function(e){return e.preventDefault()},children:[(0,oi.jsx)("input",{ref:s,type:"file",id:"input-file-upload",accept:".jpg,.jpeg,.png,.mp4",multiple:!0,onChange:function(e){if(e.preventDefault(),e.target.files&&e.target.files[0])for(var n=0;n<e.target.files.length;n++){var r=e.target.files[n];t(r)}}}),(0,oi.jsx)("label",{id:"label-file-upload",htmlFor:"input-file-upload",className:a?"drag-active":"",children:(0,oi.jsxs)("div",{children:[(0,oi.jsx)("p",{children:"Drag and drop your file here or"}),(0,oi.jsx)("button",{className:"upload-button",onClick:function(){s.current.click()},children:"Upload a file"})]})}),a&&(0,oi.jsx)("div",{id:"drag-file-element",onDragEnter:c,onDragLeave:c,onDragOver:c,onDrop:function(e){if(e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files[0])for(var n=0;n<e.dataTransfer.files.length;n++){var r=e.dataTransfer.files[n];t(r)}}})]})}var XR=ai.styled(QR||(QR=IR(["\n  width: 30rem;\n  height: 40rem;\n  display: flex;\n  align-items: center;\n  background-color: var(--navColor);\n  flex-direction: column;\n  border-radius: 1rem;\n  box-shadow: 0 12px 28px 0 var(--typicalShadow), 0 2px 4px 0 rgba(0, 0, 0, 0.4), inset 0 0 0 1px var(--shadowInset);\n"])));function JR(e){var t=e.isOpen,n=e.toggleModal,r=e.children,i=e.submitButtonText,a=e.onSubmit,o=e.disableSubmit;return(0,oi.jsxs)(XR,{isOpen:t,onBackgroundClick:n,onEscapeKeydown:n,children:[r,(0,oi.jsxs)("div",{children:[(0,oi.jsx)("button",{"data-testid":"modalSubmit",disabled:o,onClick:function(){n(),a()},children:i}),(0,oi.jsx)("button",{onClick:n,children:"Close"})]})]})}var eP=function(e){var t=e.filesArray,n=e.eraseChoosenFile;return(0,oi.jsx)(oi.Fragment,{children:t&&t.map((function(e,t){var r=(0,u.Z)(e,2),i=r[0],a=r[1],o=a&&a.includes("data:image")?"Images":"Videos";return(0,oi.jsxs)("div",{"data-testid":"modalBodyImage",style:{width:"100%",aspectRatio:"1",position:"relative"},children:["Images"==o&&(0,oi.jsx)("img",{className:"modal-body-image",src:a,alt:""}),"Videos"==o&&(0,oi.jsx)("video",{style:{width:"100%",aspectRatio:"1"},controls:!0,children:(0,oi.jsx)("source",{src:a,type:"video/mp4"})}),(0,oi.jsx)("img",{className:"erase-image",style:{height:"2rem"},src:"".concat(pi,"/redX.png"),onClick:function(){return n(i.name)},alt:""})]},t)}))})};function tP(e){var t=e.setPosts,n=e.isOpen,i=e.toggleModal,a=(0,r.useContext)(ci).myProfile,c=(0,r.useState)(""),l=(0,u.Z)(c,2),f=l[0],d=l[1],p=(0,r.useState)([]),v=(0,u.Z)(p,2),y=v[0],m=v[1],g=!f&&y.length<=0,k=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={AutorId:a.Id,AutorName:a.Email,TextContent:f,MediaFiles:[],Date:Date.now()},r=[],y.length>0&&(r=y.map(function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r,i,a,s;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.Z)(t,2),r=n[0],n[1],i=null!==r&&void 0!==r&&r.type.includes("image")?"Images":"Videos",a=_R.child("/post".concat(i,"/").concat(null===r||void 0===r?void 0:r.name,"+").concat(zi())),e.next=5,a.put(r);case 5:return e.next=7,a.getDownloadURL();case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=5,Promise.all(r);case 5:n.MediaFiles=e.sent,bi(n,"post-post").then((function(e){YR(e,t)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(e){var t=new FileReader;t.onload=function(){var n=t.result;m((function(t){return[].concat(h(t),[[e,n]])}))},e&&t.readAsDataURL(e)};return(0,oi.jsx)(JR,{isOpen:n,toggleModal:function(){i(),d(""),m([])},children:(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("div",{className:"modal-header",children:"Create post"}),(0,oi.jsxs)("div",{className:"modal-body",children:[(0,oi.jsxs)("span",{className:"modal-body-profile",children:[(0,oi.jsx)("img",{src:a.ProfileImage,alt:""}),(0,oi.jsx)("span",{children:a.Email})]}),(0,oi.jsx)("div",{className:"modal-body-text",contentEditable:!0,placeholder:"Write something...",onInput:function(e){d(e.target.innerHTML)}}),(0,oi.jsx)(eP,{filesArray:y,eraseChoosenFile:function(e){var t=y.filter((function(t){var n=(0,u.Z)(t,2),r=n[0];n[1];return r.name!=e}));m(t)}}),(0,oi.jsx)($R,{handleFileChange:b})]}),(0,oi.jsx)("div",{className:"modal-image",children:(0,oi.jsx)(wR,{handleFileChange:b})})]}),disableSubmit:g,submitButtonText:"Submit post",onSubmit:k})}var nP=function(e){var t=e.toggleModal,n=(0,r.useContext)(ci).myProfile;return(0,oi.jsxs)("span",{className:"post-form-up shadow-around",children:[(0,oi.jsx)("img",{src:n.ProfileImage,alt:""}),(0,oi.jsx)("div",{className:"post-form-up-placeholder",onClick:t,children:"What do you want to post?"})]})},rP=function(e){e.toggleModal;return(0,oi.jsx)("span",{className:"post-form-down"})};function iP(e){var t=e.setPosts,n=(0,r.useState)(!1),i=(0,u.Z)(n,2),a=i[0],o=i[1];function s(){o(!a)}return(0,oi.jsxs)("div",{className:"post-form ",children:[(0,oi.jsx)(nP,{toggleModal:s}),(0,oi.jsx)(rP,{toggleModal:s}),(0,oi.jsx)(tP,{setPosts:t,isOpen:a,toggleModal:s})]})}function aP(e){var t=e.message,n=e.eventMessage;return(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsxs)("div",{style:{margin:"0 auto",alignSelf:"center"},children:[(0,oi.jsxs)("div",{className:"loader",children:[(0,oi.jsx)("span",{className:"loader__element"}),(0,oi.jsx)("span",{className:"loader__element"}),(0,oi.jsx)("span",{className:"loader__element"})]}),t&&(0,oi.jsx)("h1",{children:t}),n&&(0,oi.jsx)("h2",{className:"event-message",children:n})]})})}function oP(e){return null!==e&&void 0!==e&&e.list?0===e.list.length?e.emptyListUI?e.emptyListUI:(0,oi.jsx)(oi.Fragment,{children:"There are no elements to display"}):e.children:(0,oi.jsx)(aP,{message:"Loading"})}function sP(e){var t=(0,r.useState)(!1),n=(0,u.Z)(t,2),i=n[0],a=n[1],o=(0,r.useState)(""),s=(0,u.Z)(o,2),c=s[0],l=s[1];(0,r.useEffect)((function(){e.TextContent.length>150&&(l(e.TextContent.slice(0,50)),a(!0))}),[]);var f=e.AutorProfileImage||"".concat(pi,"/noProfile.jpg");return(0,oi.jsxs)("div",{className:"comment",children:[(0,oi.jsxs)("div",{className:"comment-profile",children:[(0,oi.jsx)("img",{className:"comment-profile-image",src:f,alt:"profile"}),(0,oi.jsx)("span",{className:"comment-profile-name",children:e.AutorName})]}),(0,oi.jsx)("div",{className:"comment-text",children:i?(0,oi.jsxs)(oi.Fragment,{children:[c,(0,oi.jsx)("span",{className:"show-text",onClick:function(){a(!1)},children:"...Show more"})]}):e.TextContent})]})}function uP(e){var t=e.comments;return(0,oi.jsx)(oP,{list:t,emptyListUI:(0,oi.jsx)(oi.Fragment,{}),children:(0,oi.jsx)("span",{className:"post-comments-comments",children:t?null===t||void 0===t?void 0:t.map((function(e){return(0,oi.jsx)(sP,{Id:e.Id,PostId:e.PostId,AutorName:e.AutorName,TextContent:e.TextContent,AutorProfileImage:e.AutorProfileImage,Date:e.Date},e.Id)})):(0,oi.jsx)(aP,{message:"Loading"})})})}function cP(e){var t=e.mediaFiles,n=(0,r.useRef)(null),i=(0,r.useRef)(null),a=(0,r.useRef)(null),o=(0,r.useState)(!1),s=(0,u.Z)(o,2),c=s[0],l=s[1],f=(0,r.useState)(!1),h=(0,u.Z)(f,2),d=h[0],p=h[1];return(0,r.useEffect)((function(){p(!0)}),[]),(0,r.useEffect)((function(){if(n.current&&i.current&&a.current){i.current.addEventListener("click",(function(){n.current.scrollBy({left:-n.current.offsetWidth,behavior:"smooth"})})),a.current.addEventListener("click",(function(){n.current.scrollBy({left:n.current.offsetWidth,behavior:"smooth"})}));n.current.addEventListener("scroll",(function(){var e=n.current,t=e.scrollLeft,r=e.scrollWidth,i=e.clientWidth,a=Math.floor(t)+i>=r-10,o=0==t;l(a),p(o)}))}}),[n,i,a,c,d]),(0,oi.jsx)(oi.Fragment,{children:t&&(0,oi.jsxs)("div",{className:"box",children:[(0,oi.jsx)("div",{ref:n,className:"container",children:t.map((function(e){return(0,oi.jsxs)("span",{className:"element",children:[(e.includes(".jpg")||e.includes(".jpeg")||e.includes(".png"))&&(0,oi.jsx)("img",{src:e,alt:"Loading"}),e.includes(".mp4")&&(0,oi.jsx)("video",{controls:!0,children:(0,oi.jsx)("source",{src:e,type:"video/mp4"})})]},e)}))}),t.length>1&&(0,oi.jsxs)(oi.Fragment,{children:[!d&&(0,oi.jsx)("div",{ref:i,className:"scroll scroll-left",children:(0,oi.jsx)("img",{src:"".concat(pi,"/goBackArrow.png"),alt:""})}),!c&&(0,oi.jsx)("div",{ref:a,className:"scroll scroll-right",children:(0,oi.jsx)("img",{src:"".concat(pi,"/goBackArrow.png"),alt:""})})]})]})})}function lP(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var fP=function(e,t){(0,r.useEffect)((function(){if(e){e.style.height="0px";var t=e.scrollHeight;e.style.height=t+"px"}}),[e,t,window.innerWidth])},hP=["text","setText"],dP=(0,r.forwardRef)((function(e,t){var n=e.text,i=e.setText,a=lP(e,hP),o=(0,r.useRef)(null),s=t||o;return fP(null===s||void 0===s?void 0:s.current,n),(0,oi.jsx)("textarea",(0,Ga.Z)({ref:s,value:n,className:"divInput",onInput:function(e){i(e.target.value)},rows:1},a))}));function pP(e){var t=e.post,n=e.setPosts,i=(0,r.useState)(t.AmountOfLikes),a=(0,u.Z)(i,2),o=a[0],s=a[1],c=(0,r.useState)(t.AmountOfComments),l=(0,u.Z)(c,2),f=l[0],h=l[1],d=(0,r.useState)(!1),p=(0,u.Z)(d,2),v=p[0],y=p[1];return(0,oi.jsxs)("div",{className:"post shadow-around",children:[(0,oi.jsx)(vP,{post:t,setPosts:n}),(0,oi.jsx)(mP,{post:t}),(0,oi.jsxs)("div",{className:"post-bottom",children:[(0,oi.jsx)(gP,{amountOfLikes:o,amountOfComments:f}),(0,oi.jsxs)("div",{className:"post-bottom-down",children:[(0,oi.jsx)(kP,{post:t,amountOfLikes:o,setAmountOfLikes:s}),(0,oi.jsx)("button",{onClick:function(){y(!v)},children:"Comment it"})]})]}),(0,oi.jsx)(bP,{showComments:v,post:t,setAmountOfComments:h})]})}var vP=function(e){var t=e.post,n=e.setPosts,r=xe(),i=t.AutorProfileImage||"".concat(pi,"/noProfile.jpg");return(0,oi.jsxs)("div",{className:"post-profile",children:[(0,oi.jsx)("img",{onClick:function(){t.AutorId&&r("/user-profile/".concat(t.AutorId))},src:i,alt:""}),(0,oi.jsxs)("span",{className:"flexColumnLeft",style:{maxWidth:"60%"},children:[(0,oi.jsx)("span",{className:"elipsis",style:{maxWidth:"100%"},children:t.AutorName}),(0,oi.jsxs)("span",{className:"medium-font",children:[new Date(t.Date).toLocaleDateString(),", ",new Date(t.Date).toLocaleTimeString()]})]}),(0,oi.jsx)(yP,{post:t,setPosts:n})]})},yP=function(e){var t=e.post,n=e.setPosts,i=(0,r.useContext)(ci).myProfile,a=(0,r.useState)(!1),c=(0,u.Z)(a,2),l=c[0],f=c[1],h=(0,r.useState)(!1),d=(0,u.Z)(h,2),p=(d[0],d[1]);function v(){return v=(0,s.Z)((0,o.Z)().mark((function e(){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i("delete-post",{postId:t.Id.toString()});case 2:"success"===(r=e.sent).status?(n((function(e){return e.filter((function(e){return e.Id!=t.Id}))})),console.log("deleted")):"error"===r.status&&alert("Something went wrong, try again later");case 4:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function y(){return(y=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.useEffect)((function(){window.addEventListener("click",(function(e){var n,r;null!==(n=e.target)&&void 0!==n&&n.id.includes("post-profile-options/".concat(t.Id))||null!==(r=e.target)&&void 0!==r&&r.id.includes("post-profile-options__list/".concat(t.Id))||f(!1)}))}),[]),(0,oi.jsx)("div",{id:"post-profile-options/".concat(t.Id),className:"post-profile-options",style:{backgroundImage:"url(".concat(pi,"/moreOptions.png)")},onClick:function(){f(!l)},children:l&&(0,oi.jsxs)("div",{id:"post-profile-options__list/".concat(t.Id),className:"post-profile-options__list shadow-around medium-font",children:[t.AutorId===i.Id&&(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("div",{className:"post-profile-options__list__child",onClick:function(){return v.apply(this,arguments)},children:"Delete"}),(0,oi.jsx)("div",{className:"post-profile-options__list__child",onClick:function(){return y.apply(this,arguments)},children:"Edit"})]}),t.AutorId!==i.Id&&(0,oi.jsx)("div",{className:"post-profile-options__list__child",children:"Report (doesnt work)"})]})})},mP=function(e){var t=e.post,n=(0,r.useState)(!1),i=(0,u.Z)(n,2),a=i[0],o=i[1],s=(0,r.useState)(""),c=(0,u.Z)(s,2),l=c[0],f=c[1];return(0,r.useEffect)((function(){t.TextContent.length>100&&(f(t.TextContent.slice(0,50)),o(!0))}),[]),(0,oi.jsxs)("div",{className:"post-content",children:[t.TextContent&&(0,oi.jsx)("span",{className:"post-content-text",children:a?(0,oi.jsxs)(oi.Fragment,{children:[l,(0,oi.jsx)("span",{className:"show-text",onClick:function(){o(!1)},children:"...Show more"})]}):t.TextContent}),(0,oi.jsx)(cP,{mediaFiles:t.MediaFiles})]})},gP=function(e){var t=e.amountOfLikes,n=e.amountOfComments;return(0,oi.jsxs)("div",{className:"post-bottom-up",children:[(0,oi.jsxs)("div",{className:"option",children:[(0,oi.jsx)("img",{src:"".concat(pi,"/like.png"),alt:""}),(0,oi.jsx)("span",{className:"large-font",children:t})]}),(0,oi.jsx)("div",{className:"option",children:(0,oi.jsxs)("span",{className:"large-font",children:[n," comments"]})})]})},kP=function(e){var t=e.post,n=e.amountOfLikes,i=e.setAmountOfLikes,a=(0,r.useContext)(ci).myProfile,c=(0,r.useState)(),l=(0,u.Z)(c,2),f=l[0],h=l[1],d=(0,r.useState)(!1),p=(0,u.Z)(d,2),v=p[0],y=p[1],m=function(e,t){var n=(0,r.useState)(e),i=(0,u.Z)(n,2),a=i[0],o=i[1];return(0,r.useEffect)((function(){var n=setTimeout((function(){o(e)}),t);return function(){clearTimeout(n)}}),[e,t]),a}(n,1e3);function g(){return(g=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h,e.next=3,bi({postId:t.Id,userId:a.Id},"user-liked-post");case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wi({postId:t.Id,userId:a.Id},f?"like-post":"like-post-remove");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,r.useEffect)((function(){!function(){g.apply(this,arguments)}()}),[]),(0,r.useEffect)((function(){v&&function(){k.apply(this,arguments)}()}),[m]);var b=f?"var(--testColor3)":"";return(0,oi.jsx)("button",{disabled:void 0===f,style:{backgroundColor:b},onClick:function(){f?(i((function(e){return e-1})),h(!1)):(i((function(e){return e+1})),h(!0)),y(!0)},children:"I like it!"})},bP=function(e){var t=e.post,n=e.showComments,i=e.setAmountOfComments,a=(0,r.useContext)(ci).myProfile,c=(0,r.useState)(),l=(0,u.Z)(c,2),f=l[0],h=l[1],d=(0,r.useState)(""),p=(0,u.Z)(d,2),v=p[0],y=p[1],m=(0,r.useState)(!1),g=(0,u.Z)(m,2),k=g[0],b=g[1],_=(0,r.useRef)(null);function w(){return(w=(0,s.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i((function(e){return e+1})),e.next=3,bi({postId:t.Id,userId:a.Id,textContent:v,autorName:a.Email,date:Date.now()},"put-comment");case 3:(n=e.sent).AutorProfileImage=a.ProfileImage,YR(n,h),y("");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return S.apply(this,arguments)}function S(){return(S=(0,s.Z)((0,o.Z)().mark((function e(n){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({postId:t.Id,numberOfComments:n},"get-comments");case 2:r=e.sent,(null===f||void 0===f?void 0:f.length)==r.length?b(!0):h(r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,r.useEffect)((function(){void 0!==n&&0==n&&(f||x(10))}),[n]);var E=0==(null===v||void 0===v?void 0:v.length),C="".concat(pi,E?"/cant-sendBtn.png":"/sendBtn.png");return(0,oi.jsx)(oi.Fragment,{children:n&&(0,oi.jsxs)("div",{className:"post-comments",children:[(0,oi.jsxs)("div",{className:"post-comments-input",children:[(0,oi.jsx)("img",{className:"post-comments-input__profile",src:a.ProfileImage,alt:""}),(0,oi.jsxs)("div",{className:"commentText",children:[(0,oi.jsx)(dP,{ref:_,text:v,setText:y,placeholder:"Write a comment..."}),(0,oi.jsxs)("div",{className:"commentText-submit",children:[(0,oi.jsx)("span",{}),(0,oi.jsx)("button",{disabled:E,type:"submit",onClick:function(){return w.apply(this,arguments)},style:{backgroundImage:"url(".concat(C,")"),backgroundSize:"cover"},children:""})]})]})]}),f&&(0,oi.jsx)(uP,{comments:f}),0==(null===f||void 0===f?void 0:f.length)||k?(0,oi.jsx)("span",{children:"There are no more comments"}):(0,oi.jsx)("span",{className:"post-comments-more",onClick:function(){x((null===f||void 0===f?void 0:f.length)+10)},children:"Show more..."})]})})};function _P(e){var t;return(0,oi.jsx)(oP,{list:e.posts,emptyListUI:(0,oi.jsx)(oi.Fragment,{}),children:(0,oi.jsx)("div",{className:"listOfPosts",children:e.posts?null===(t=e.posts)||void 0===t?void 0:t.map((function(t){return(0,oi.jsx)(pP,{post:t,setPosts:e.setPosts},t.Id)})):(0,oi.jsx)(aP,{message:"Loading"})})})}var wP=n(77),xP=n.n(wP),SP=function(e){return function(e){return!!e&&"object"===typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===EP}(e)}(e)};var EP="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function CP(e,t){return!1!==t.clone&&t.isMergeableObject(e)?TP(function(e){return Array.isArray(e)?[]:{}}(e),e,t):e}function IP(e,t,n){return e.concat(t).map((function(e){return CP(e,n)}))}function TP(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||IP,n.isMergeableObject=n.isMergeableObject||SP;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach((function(t){r[t]=CP(e[t],n)})),Object.keys(t).forEach((function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=TP(e[i],t[i],n):r[i]=CP(t[i],n)})),r}(e,t,n):CP(t,n)}TP.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return TP(e,n,t)}),{})};var NP=TP,AP="object"==typeof global&&global&&global.Object===Object&&global,DP="object"==typeof self&&self&&self.Object===Object&&self,OP=AP||DP||Function("return this")(),RP=OP.Symbol,PP=Object.prototype,jP=PP.hasOwnProperty,LP=PP.toString,MP=RP?RP.toStringTag:void 0;var FP=function(e){var t=jP.call(e,MP),n=e[MP];try{e[MP]=void 0;var r=!0}catch(a){}var i=LP.call(e);return r&&(t?e[MP]=n:delete e[MP]),i},UP=Object.prototype.toString;var BP=function(e){return UP.call(e)},VP=RP?RP.toStringTag:void 0;var zP=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":VP&&VP in Object(e)?FP(e):BP(e)};var qP=function(e,t){return function(n){return e(t(n))}},ZP=qP(Object.getPrototypeOf,Object);var WP=function(e){return null!=e&&"object"==typeof e},HP=Function.prototype,KP=Object.prototype,GP=HP.toString,QP=KP.hasOwnProperty,YP=GP.call(Object);var $P=function(e){if(!WP(e)||"[object Object]"!=zP(e))return!1;var t=ZP(e);if(null===t)return!0;var n=QP.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&GP.call(n)==YP};var XP=function(){this.__data__=[],this.size=0};var JP=function(e,t){return e===t||e!==e&&t!==t};var ej=function(e,t){for(var n=e.length;n--;)if(JP(e[n][0],t))return n;return-1},tj=Array.prototype.splice;var nj=function(e){var t=this.__data__,n=ej(t,e);return!(n<0)&&(n==t.length-1?t.pop():tj.call(t,n,1),--this.size,!0)};var rj=function(e){var t=this.__data__,n=ej(t,e);return n<0?void 0:t[n][1]};var ij=function(e){return ej(this.__data__,e)>-1};var aj=function(e,t){var n=this.__data__,r=ej(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function oj(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oj.prototype.clear=XP,oj.prototype.delete=nj,oj.prototype.get=rj,oj.prototype.has=ij,oj.prototype.set=aj;var sj=oj;var uj=function(){this.__data__=new sj,this.size=0};var cj=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var lj=function(e){return this.__data__.get(e)};var fj=function(e){return this.__data__.has(e)};var hj=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var dj=function(e){if(!hj(e))return!1;var t=zP(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},pj=OP["__core-js_shared__"],vj=function(){var e=/[^.]+$/.exec(pj&&pj.keys&&pj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var yj=function(e){return!!vj&&vj in e},mj=Function.prototype.toString;var gj=function(e){if(null!=e){try{return mj.call(e)}catch(t){}try{return e+""}catch(t){}}return""},kj=/^\[object .+?Constructor\]$/,bj=Function.prototype,_j=Object.prototype,wj=bj.toString,xj=_j.hasOwnProperty,Sj=RegExp("^"+wj.call(xj).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ej=function(e){return!(!hj(e)||yj(e))&&(dj(e)?Sj:kj).test(gj(e))};var Cj=function(e,t){return null==e?void 0:e[t]};var Ij=function(e,t){var n=Cj(e,t);return Ej(n)?n:void 0},Tj=Ij(OP,"Map"),Nj=Ij(Object,"create");var Aj=function(){this.__data__=Nj?Nj(null):{},this.size=0};var Dj=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Oj=Object.prototype.hasOwnProperty;var Rj=function(e){var t=this.__data__;if(Nj){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Oj.call(t,e)?t[e]:void 0},Pj=Object.prototype.hasOwnProperty;var jj=function(e){var t=this.__data__;return Nj?void 0!==t[e]:Pj.call(t,e)};var Lj=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Nj&&void 0===t?"__lodash_hash_undefined__":t,this};function Mj(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Mj.prototype.clear=Aj,Mj.prototype.delete=Dj,Mj.prototype.get=Rj,Mj.prototype.has=jj,Mj.prototype.set=Lj;var Fj=Mj;var Uj=function(){this.size=0,this.__data__={hash:new Fj,map:new(Tj||sj),string:new Fj}};var Bj=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Vj=function(e,t){var n=e.__data__;return Bj(t)?n["string"==typeof t?"string":"hash"]:n.map};var zj=function(e){var t=Vj(this,e).delete(e);return this.size-=t?1:0,t};var qj=function(e){return Vj(this,e).get(e)};var Zj=function(e){return Vj(this,e).has(e)};var Wj=function(e,t){var n=Vj(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Hj(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Hj.prototype.clear=Uj,Hj.prototype.delete=zj,Hj.prototype.get=qj,Hj.prototype.has=Zj,Hj.prototype.set=Wj;var Kj=Hj;var Gj=function(e,t){var n=this.__data__;if(n instanceof sj){var r=n.__data__;if(!Tj||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Kj(r)}return n.set(e,t),this.size=n.size,this};function Qj(e){var t=this.__data__=new sj(e);this.size=t.size}Qj.prototype.clear=uj,Qj.prototype.delete=cj,Qj.prototype.get=lj,Qj.prototype.has=fj,Qj.prototype.set=Gj;var Yj=Qj;var $j=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Xj=function(){try{var e=Ij(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();var Jj=function(e,t,n){"__proto__"==t&&Xj?Xj(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},eL=Object.prototype.hasOwnProperty;var tL=function(e,t,n){var r=e[t];eL.call(e,t)&&JP(r,n)&&(void 0!==n||t in e)||Jj(e,t,n)};var nL=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Jj(n,s,u):tL(n,s,u)}return n};var rL=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var iL=function(e){return WP(e)&&"[object Arguments]"==zP(e)},aL=Object.prototype,oL=aL.hasOwnProperty,sL=aL.propertyIsEnumerable,uL=iL(function(){return arguments}())?iL:function(e){return WP(e)&&oL.call(e,"callee")&&!sL.call(e,"callee")},cL=uL,lL=Array.isArray;var fL=function(){return!1},hL="object"==typeof exports&&exports&&!exports.nodeType&&exports,dL=hL&&"object"==typeof module&&module&&!module.nodeType&&module,pL=dL&&dL.exports===hL?OP.Buffer:void 0,vL=(pL?pL.isBuffer:void 0)||fL,yL=/^(?:0|[1-9]\d*)$/;var mL=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&yL.test(e))&&e>-1&&e%1==0&&e<t};var gL=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},kL={};kL["[object Float32Array]"]=kL["[object Float64Array]"]=kL["[object Int8Array]"]=kL["[object Int16Array]"]=kL["[object Int32Array]"]=kL["[object Uint8Array]"]=kL["[object Uint8ClampedArray]"]=kL["[object Uint16Array]"]=kL["[object Uint32Array]"]=!0,kL["[object Arguments]"]=kL["[object Array]"]=kL["[object ArrayBuffer]"]=kL["[object Boolean]"]=kL["[object DataView]"]=kL["[object Date]"]=kL["[object Error]"]=kL["[object Function]"]=kL["[object Map]"]=kL["[object Number]"]=kL["[object Object]"]=kL["[object RegExp]"]=kL["[object Set]"]=kL["[object String]"]=kL["[object WeakMap]"]=!1;var bL=function(e){return WP(e)&&gL(e.length)&&!!kL[zP(e)]};var _L=function(e){return function(t){return e(t)}},wL="object"==typeof exports&&exports&&!exports.nodeType&&exports,xL=wL&&"object"==typeof module&&module&&!module.nodeType&&module,SL=xL&&xL.exports===wL&&AP.process,EL=function(){try{var e=xL&&xL.require&&xL.require("util").types;return e||SL&&SL.binding&&SL.binding("util")}catch(t){}}(),CL=EL&&EL.isTypedArray,IL=CL?_L(CL):bL,TL=Object.prototype.hasOwnProperty;var NL=function(e,t){var n=lL(e),r=!n&&cL(e),i=!n&&!r&&vL(e),a=!n&&!r&&!i&&IL(e),o=n||r||i||a,s=o?rL(e.length,String):[],u=s.length;for(var c in e)!t&&!TL.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||mL(c,u))||s.push(c);return s},AL=Object.prototype;var DL=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||AL)},OL=qP(Object.keys,Object),RL=Object.prototype.hasOwnProperty;var PL=function(e){if(!DL(e))return OL(e);var t=[];for(var n in Object(e))RL.call(e,n)&&"constructor"!=n&&t.push(n);return t};var jL=function(e){return null!=e&&gL(e.length)&&!dj(e)};var LL=function(e){return jL(e)?NL(e):PL(e)};var ML=function(e,t){return e&&nL(t,LL(t),e)};var FL=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},UL=Object.prototype.hasOwnProperty;var BL=function(e){if(!hj(e))return FL(e);var t=DL(e),n=[];for(var r in e)("constructor"!=r||!t&&UL.call(e,r))&&n.push(r);return n};var VL=function(e){return jL(e)?NL(e,!0):BL(e)};var zL=function(e,t){return e&&nL(t,VL(t),e)},qL="object"==typeof exports&&exports&&!exports.nodeType&&exports,ZL=qL&&"object"==typeof module&&module&&!module.nodeType&&module,WL=ZL&&ZL.exports===qL?OP.Buffer:void 0,HL=WL?WL.allocUnsafe:void 0;var KL=function(e,t){if(t)return e.slice();var n=e.length,r=HL?HL(n):new e.constructor(n);return e.copy(r),r};var GL=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var QL=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var YL=function(){return[]},$L=Object.prototype.propertyIsEnumerable,XL=Object.getOwnPropertySymbols,JL=XL?function(e){return null==e?[]:(e=Object(e),QL(XL(e),(function(t){return $L.call(e,t)})))}:YL,eM=JL;var tM=function(e,t){return nL(e,eM(e),t)};var nM=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},rM=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)nM(t,eM(e)),e=ZP(e);return t}:YL,iM=rM;var aM=function(e,t){return nL(e,iM(e),t)};var oM=function(e,t,n){var r=t(e);return lL(e)?r:nM(r,n(e))};var sM=function(e){return oM(e,LL,eM)};var uM=function(e){return oM(e,VL,iM)},cM=Ij(OP,"DataView"),lM=Ij(OP,"Promise"),fM=Ij(OP,"Set"),hM=Ij(OP,"WeakMap"),dM="[object Map]",pM="[object Promise]",vM="[object Set]",yM="[object WeakMap]",mM="[object DataView]",gM=gj(cM),kM=gj(Tj),bM=gj(lM),_M=gj(fM),wM=gj(hM),xM=zP;(cM&&xM(new cM(new ArrayBuffer(1)))!=mM||Tj&&xM(new Tj)!=dM||lM&&xM(lM.resolve())!=pM||fM&&xM(new fM)!=vM||hM&&xM(new hM)!=yM)&&(xM=function(e){var t=zP(e),n="[object Object]"==t?e.constructor:void 0,r=n?gj(n):"";if(r)switch(r){case gM:return mM;case kM:return dM;case bM:return pM;case _M:return vM;case wM:return yM}return t});var SM=xM,EM=Object.prototype.hasOwnProperty;var CM=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&EM.call(e,"index")&&(n.index=e.index,n.input=e.input),n},IM=OP.Uint8Array;var TM=function(e){var t=new e.constructor(e.byteLength);return new IM(t).set(new IM(e)),t};var NM=function(e,t){var n=t?TM(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},AM=/\w*$/;var DM=function(e){var t=new e.constructor(e.source,AM.exec(e));return t.lastIndex=e.lastIndex,t},OM=RP?RP.prototype:void 0,RM=OM?OM.valueOf:void 0;var PM=function(e){return RM?Object(RM.call(e)):{}};var jM=function(e,t){var n=t?TM(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var LM=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return TM(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return NM(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return jM(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return DM(e);case"[object Symbol]":return PM(e)}},MM=Object.create,FM=function(){function e(){}return function(t){if(!hj(t))return{};if(MM)return MM(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),UM=FM;var BM=function(e){return"function"!=typeof e.constructor||DL(e)?{}:UM(ZP(e))};var VM=function(e){return WP(e)&&"[object Map]"==SM(e)},zM=EL&&EL.isMap,qM=zM?_L(zM):VM;var ZM=function(e){return WP(e)&&"[object Set]"==SM(e)},WM=EL&&EL.isSet,HM=WM?_L(WM):ZM,KM="[object Arguments]",GM="[object Function]",QM="[object Object]",YM={};YM[KM]=YM["[object Array]"]=YM["[object ArrayBuffer]"]=YM["[object DataView]"]=YM["[object Boolean]"]=YM["[object Date]"]=YM["[object Float32Array]"]=YM["[object Float64Array]"]=YM["[object Int8Array]"]=YM["[object Int16Array]"]=YM["[object Int32Array]"]=YM["[object Map]"]=YM["[object Number]"]=YM[QM]=YM["[object RegExp]"]=YM["[object Set]"]=YM["[object String]"]=YM["[object Symbol]"]=YM["[object Uint8Array]"]=YM["[object Uint8ClampedArray]"]=YM["[object Uint16Array]"]=YM["[object Uint32Array]"]=!0,YM["[object Error]"]=YM[GM]=YM["[object WeakMap]"]=!1;var $M=function e(t,n,r,i,a,o){var s,u=1&n,c=2&n,l=4&n;if(r&&(s=a?r(t,i,a,o):r(t)),void 0!==s)return s;if(!hj(t))return t;var f=lL(t);if(f){if(s=CM(t),!u)return GL(t,s)}else{var h=SM(t),d=h==GM||"[object GeneratorFunction]"==h;if(vL(t))return KL(t,u);if(h==QM||h==KM||d&&!a){if(s=c||d?{}:BM(t),!u)return c?aM(t,zL(s,t)):tM(t,ML(s,t))}else{if(!YM[h])return a?t:{};s=LM(t,h,u)}}o||(o=new Yj);var p=o.get(t);if(p)return p;o.set(t,s),HM(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,o))})):qM(t)&&t.forEach((function(i,a){s.set(a,e(i,n,r,a,t,o))}));var v=f?void 0:(l?c?uM:sM:c?VL:LL)(t);return $j(v||t,(function(i,a){v&&(i=t[a=i]),tL(s,a,e(i,n,r,a,t,o))})),s};var XM=function(e){return $M(e,4)};var JM=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var eF=function(e){return"symbol"==typeof e||WP(e)&&"[object Symbol]"==zP(e)};function tF(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(tF.Cache||Kj),n}tF.Cache=Kj;var nF=tF;var rF=function(e){var t=nF(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},iF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aF=/\\(\\)?/g,oF=rF((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(iF,(function(e,n,r,i){t.push(r?i.replace(aF,"$1"):n||e)})),t})),sF=oF;var uF=function(e){if("string"==typeof e||eF(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},cF=RP?RP.prototype:void 0,lF=cF?cF.toString:void 0;var fF=function e(t){if("string"==typeof t)return t;if(lL(t))return JM(t,e)+"";if(eF(t))return lF?lF.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var hF=function(e){return null==e?"":fF(e)};var dF=function(e){return lL(e)?JM(e,uF):eF(e)?[e]:GL(sF(hF(e)))};var pF=function(e,t){};var vF=function(e){return $M(e,5)};function yF(){return yF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yF.apply(this,arguments)}function mF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function gF(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function kF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var bF=function(e){return Array.isArray(e)&&0===e.length},_F=function(e){return"function"===typeof e},wF=function(e){return null!==e&&"object"===typeof e},xF=function(e){return String(Math.floor(Number(e)))===e},SF=function(e){return"[object String]"===Object.prototype.toString.call(e)},EF=function(e){return 0===r.Children.count(e)},CF=function(e){return wF(e)&&_F(e.then)};function IF(e,t,n,r){void 0===r&&(r=0);for(var i=dF(t);e&&r<i.length;)e=e[i[r++]];return r===i.length||e?void 0===e?n:e:n}function TF(e,t,n){for(var r=XM(e),i=r,a=0,o=dF(t);a<o.length-1;a++){var s=o[a],u=IF(e,o.slice(0,a+1));if(u&&(wF(u)||Array.isArray(u)))i=i[s]=XM(u);else{var c=o[a+1];i=i[s]=xF(c)&&Number(c)>=0?[]:{}}}return(0===a?e:i)[o[a]]===n?e:(void 0===n?delete i[o[a]]:i[o[a]]=n,0===a&&void 0===n&&delete r[o[a]],r)}function NF(e,t,n,r){void 0===n&&(n=new WeakMap),void 0===r&&(r={});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];wF(s)?n.get(s)||(n.set(s,!0),r[o]=Array.isArray(s)?[]:{},NF(s,t,n,r[o])):r[o]=t}return r}var AF=(0,r.createContext)(void 0);AF.displayName="FormikContext";AF.Provider,AF.Consumer;function DF(){var e=(0,r.useContext)(AF);return e||pF(!1),e}function OF(e,t){switch(t.type){case"SET_VALUES":return yF({},e,{values:t.payload});case"SET_TOUCHED":return yF({},e,{touched:t.payload});case"SET_ERRORS":return xP()(e.errors,t.payload)?e:yF({},e,{errors:t.payload});case"SET_STATUS":return yF({},e,{status:t.payload});case"SET_ISSUBMITTING":return yF({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return yF({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return yF({},e,{values:TF(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return yF({},e,{touched:TF(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return yF({},e,{errors:TF(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return yF({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return yF({},e,{touched:NF(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return yF({},e,{isSubmitting:!1});default:return e}}var RF={},PF={};function jF(e){var t=e.validateOnChange,n=void 0===t||t,i=e.validateOnBlur,a=void 0===i||i,o=e.validateOnMount,s=void 0!==o&&o,u=e.isInitialValid,c=e.enableReinitialize,l=void 0!==c&&c,f=e.onSubmit,h=gF(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),d=yF({validateOnChange:n,validateOnBlur:a,validateOnMount:s,onSubmit:f},h),p=(0,r.useRef)(d.initialValues),v=(0,r.useRef)(d.initialErrors||RF),y=(0,r.useRef)(d.initialTouched||PF),m=(0,r.useRef)(d.initialStatus),g=(0,r.useRef)(!1),k=(0,r.useRef)({});(0,r.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]);var b=(0,r.useReducer)(OF,{values:d.initialValues,errors:d.initialErrors||RF,touched:d.initialTouched||PF,status:d.initialStatus,isSubmitting:!1,isValidating:!1,submitCount:0}),_=b[0],w=b[1],x=(0,r.useCallback)((function(e,t){return new Promise((function(n,r){var i=d.validate(e,t);null==i?n(RF):CF(i)?i.then((function(e){n(e||RF)}),(function(e){r(e)})):n(i)}))}),[d.validate]),S=(0,r.useCallback)((function(e,t){var n=d.validationSchema,r=_F(n)?n(t):n,i=t&&r.validateAt?r.validateAt(t,e):function(e,t,n,r){void 0===n&&(n=!1);var i=LF(e);return t[n?"validateSync":"validate"](i,{abortEarly:!1,context:r||i})}(e,r);return new Promise((function(e,t){i.then((function(){e(RF)}),(function(n){"ValidationError"===n.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return TF(t,e.path,e.message);var n=e.inner,r=Array.isArray(n),i=0;for(n=r?n:n[Symbol.iterator]();;){var a;if(r){if(i>=n.length)break;a=n[i++]}else{if((i=n.next()).done)break;a=i.value}var o=a;IF(t,o.path)||(t=TF(t,o.path,o.message))}}return t}(n)):t(n)}))}))}),[d.validationSchema]),E=(0,r.useCallback)((function(e,t){return new Promise((function(n){return n(k.current[e].validate(t))}))}),[]),C=(0,r.useCallback)((function(e){var t=Object.keys(k.current).filter((function(e){return _F(k.current[e].validate)})),n=t.length>0?t.map((function(t){return E(t,IF(e,t))})):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(n).then((function(e){return e.reduce((function(e,n,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===n||n&&(e=TF(e,t[r],n)),e}),{})}))}),[E]),I=(0,r.useCallback)((function(e){return Promise.all([C(e),d.validationSchema?S(e):{},d.validate?x(e):{}]).then((function(e){var t=e[0],n=e[1],r=e[2];return NP.all([t,n,r],{arrayMerge:MF})}))}),[d.validate,d.validationSchema,C,x,S]),T=UF((function(e){return void 0===e&&(e=_.values),w({type:"SET_ISVALIDATING",payload:!0}),I(e).then((function(e){return g.current&&(w({type:"SET_ISVALIDATING",payload:!1}),w({type:"SET_ERRORS",payload:e})),e}))}));(0,r.useEffect)((function(){s&&!0===g.current&&xP()(p.current,d.initialValues)&&T(p.current)}),[s,T]);var N=(0,r.useCallback)((function(e){var t=e&&e.values?e.values:p.current,n=e&&e.errors?e.errors:v.current?v.current:d.initialErrors||{},r=e&&e.touched?e.touched:y.current?y.current:d.initialTouched||{},i=e&&e.status?e.status:m.current?m.current:d.initialStatus;p.current=t,v.current=n,y.current=r,m.current=i;var a=function(){w({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:n,touched:r,status:i,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"===typeof e.submitCount?e.submitCount:0}})};if(d.onReset){var o=d.onReset(_.values,G);CF(o)?o.then(a):a()}else a()}),[d.initialErrors,d.initialStatus,d.initialTouched]);(0,r.useEffect)((function(){!0!==g.current||xP()(p.current,d.initialValues)||l&&(p.current=d.initialValues,N(),s&&T(p.current))}),[l,d.initialValues,N,s,T]),(0,r.useEffect)((function(){l&&!0===g.current&&!xP()(v.current,d.initialErrors)&&(v.current=d.initialErrors||RF,w({type:"SET_ERRORS",payload:d.initialErrors||RF}))}),[l,d.initialErrors]),(0,r.useEffect)((function(){l&&!0===g.current&&!xP()(y.current,d.initialTouched)&&(y.current=d.initialTouched||PF,w({type:"SET_TOUCHED",payload:d.initialTouched||PF}))}),[l,d.initialTouched]),(0,r.useEffect)((function(){l&&!0===g.current&&!xP()(m.current,d.initialStatus)&&(m.current=d.initialStatus,w({type:"SET_STATUS",payload:d.initialStatus}))}),[l,d.initialStatus,d.initialTouched]);var A=UF((function(e){if(k.current[e]&&_F(k.current[e].validate)){var t=IF(_.values,e),n=k.current[e].validate(t);return CF(n)?(w({type:"SET_ISVALIDATING",payload:!0}),n.then((function(e){return e})).then((function(t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),w({type:"SET_ISVALIDATING",payload:!1})}))):(w({type:"SET_FIELD_ERROR",payload:{field:e,value:n}}),Promise.resolve(n))}return d.validationSchema?(w({type:"SET_ISVALIDATING",payload:!0}),S(_.values,e).then((function(e){return e})).then((function(t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:IF(t,e)}}),w({type:"SET_ISVALIDATING",payload:!1})}))):Promise.resolve()})),D=(0,r.useCallback)((function(e,t){var n=t.validate;k.current[e]={validate:n}}),[]),O=(0,r.useCallback)((function(e){delete k.current[e]}),[]),R=UF((function(e,t){return w({type:"SET_TOUCHED",payload:e}),(void 0===t?a:t)?T(_.values):Promise.resolve()})),P=(0,r.useCallback)((function(e){w({type:"SET_ERRORS",payload:e})}),[]),j=UF((function(e,t){var r=_F(e)?e(_.values):e;return w({type:"SET_VALUES",payload:r}),(void 0===t?n:t)?T(r):Promise.resolve()})),L=(0,r.useCallback)((function(e,t){w({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})}),[]),M=UF((function(e,t,r){return w({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?n:r)?T(TF(_.values,e,t)):Promise.resolve()})),F=(0,r.useCallback)((function(e,t){var n,r=t,i=e;if(!SF(e)){e.persist&&e.persist();var a=e.target?e.target:e.currentTarget,o=a.type,s=a.name,u=a.id,c=a.value,l=a.checked,f=(a.outerHTML,a.options),h=a.multiple;r=t||(s||u),i=/number|range/.test(o)?(n=parseFloat(c),isNaN(n)?"":n):/checkbox/.test(o)?function(e,t,n){if("boolean"===typeof e)return Boolean(t);var r=[],i=!1,a=-1;if(Array.isArray(e))r=e,i=(a=e.indexOf(n))>=0;else if(!n||"true"==n||"false"==n)return Boolean(t);if(t&&n&&!i)return r.concat(n);if(!i)return r;return r.slice(0,a).concat(r.slice(a+1))}(IF(_.values,r),l,c):f&&h?function(e){return Array.from(e).filter((function(e){return e.selected})).map((function(e){return e.value}))}(f):c}r&&M(r,i)}),[M,_.values]),U=UF((function(e){if(SF(e))return function(t){return F(t,e)};F(e)})),B=UF((function(e,t,n){return void 0===t&&(t=!0),w({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===n?a:n)?T(_.values):Promise.resolve()})),V=(0,r.useCallback)((function(e,t){e.persist&&e.persist();var n=e.target,r=n.name,i=n.id,a=(n.outerHTML,t||(r||i));B(a,!0)}),[B]),z=UF((function(e){if(SF(e))return function(t){return V(t,e)};V(e)})),q=(0,r.useCallback)((function(e){_F(e)?w({type:"SET_FORMIK_STATE",payload:e}):w({type:"SET_FORMIK_STATE",payload:function(){return e}})}),[]),Z=(0,r.useCallback)((function(e){w({type:"SET_STATUS",payload:e})}),[]),W=(0,r.useCallback)((function(e){w({type:"SET_ISSUBMITTING",payload:e})}),[]),H=UF((function(){return w({type:"SUBMIT_ATTEMPT"}),T().then((function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var n;try{if(void 0===(n=Q()))return}catch(Is){throw Is}return Promise.resolve(n).then((function(e){return g.current&&w({type:"SUBMIT_SUCCESS"}),e})).catch((function(e){if(g.current)throw w({type:"SUBMIT_FAILURE"}),e}))}if(g.current&&(w({type:"SUBMIT_FAILURE"}),t))throw e}))})),K=UF((function(e){e&&e.preventDefault&&_F(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&_F(e.stopPropagation)&&e.stopPropagation(),H().catch((function(e){console.warn("Warning: An unhandled error was caught from submitForm()",e)}))})),G={resetForm:N,validateForm:T,validateField:A,setErrors:P,setFieldError:L,setFieldTouched:B,setFieldValue:M,setStatus:Z,setSubmitting:W,setTouched:R,setValues:j,setFormikState:q,submitForm:H},Q=UF((function(){return f(_.values,G)})),Y=UF((function(e){e&&e.preventDefault&&_F(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&_F(e.stopPropagation)&&e.stopPropagation(),N()})),$=(0,r.useCallback)((function(e){return{value:IF(_.values,e),error:IF(_.errors,e),touched:!!IF(_.touched,e),initialValue:IF(p.current,e),initialTouched:!!IF(y.current,e),initialError:IF(v.current,e)}}),[_.errors,_.touched,_.values]),X=(0,r.useCallback)((function(e){return{setValue:function(t,n){return M(e,t,n)},setTouched:function(t,n){return B(e,t,n)},setError:function(t){return L(e,t)}}}),[M,B,L]),J=(0,r.useCallback)((function(e){var t=wF(e),n=t?e.name:e,r=IF(_.values,n),i={name:n,value:r,onChange:U,onBlur:z};if(t){var a=e.type,o=e.value,s=e.as,u=e.multiple;"checkbox"===a?void 0===o?i.checked=!!r:(i.checked=!(!Array.isArray(r)||!~r.indexOf(o)),i.value=o):"radio"===a?(i.checked=r===o,i.value=o):"select"===s&&u&&(i.value=i.value||[],i.multiple=!0)}return i}),[z,U,_.values]),ee=(0,r.useMemo)((function(){return!xP()(p.current,_.values)}),[p.current,_.values]),te=(0,r.useMemo)((function(){return"undefined"!==typeof u?ee?_.errors&&0===Object.keys(_.errors).length:!1!==u&&_F(u)?u(d):u:_.errors&&0===Object.keys(_.errors).length}),[u,ee,_.errors,d]);return yF({},_,{initialValues:p.current,initialErrors:v.current,initialTouched:y.current,initialStatus:m.current,handleBlur:z,handleChange:U,handleReset:Y,handleSubmit:K,resetForm:N,setErrors:P,setFormikState:q,setFieldTouched:B,setFieldValue:M,setFieldError:L,setStatus:Z,setSubmitting:W,setTouched:R,setValues:j,submitForm:H,validateForm:T,validateField:A,isValid:te,dirty:ee,unregisterField:O,registerField:D,getFieldProps:J,getFieldMeta:$,getFieldHelpers:X,validateOnBlur:a,validateOnChange:n,validateOnMount:s})}function LF(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=String(n);!0===Array.isArray(e[r])?t[r]=e[r].map((function(e){return!0===Array.isArray(e)||$P(e)?LF(e):""!==e?e:void 0})):$P(e[r])?t[r]=LF(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function MF(e,t,n){var r=e.slice();return t.forEach((function(t,i){if("undefined"===typeof r[i]){var a=!1!==n.clone&&n.isMergeableObject(t);r[i]=a?NP(Array.isArray(t)?[]:{},t,n):t}else n.isMergeableObject(t)?r[i]=NP(e[i],t,n):-1===e.indexOf(t)&&r.push(t)})),r}var FF="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?r.useLayoutEffect:r.useEffect;function UF(e){var t=(0,r.useRef)(e);return FF((function(){t.current=e})),(0,r.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current.apply(void 0,n)}),[])}(0,r.forwardRef)((function(e,t){var n=e.action,i=gF(e,["action"]),a=null!=n?n:"#",o=DF(),s=o.handleReset,u=o.handleSubmit;return(0,r.createElement)("form",Object.assign({onSubmit:u,ref:t,onReset:s,action:a},i))})).displayName="Form";var BF=function(e,t,n){var r=VF(e);return r.splice(t,0,n),r},VF=function(e){if(e){if(Array.isArray(e))return[].concat(e);var t=Object.keys(e).map((function(e){return parseInt(e)})).reduce((function(e,t){return t>e?t:e}),0);return Array.from(yF({},e,{length:t+1}))}return[]},zF=function(e,t){var n="function"===typeof e?e:t;return function(e){if(Array.isArray(e)||wF(e)){var t=VF(e);return n(t)}return e}},qF=function(e){function t(t){var n;return(n=e.call(this,t)||this).updateArrayField=function(e,t,r){var i=n.props,a=i.name;(0,i.formik.setFormikState)((function(n){var i=zF(r,e),o=zF(t,e),s=TF(n.values,a,e(IF(n.values,a))),u=r?i(IF(n.errors,a)):void 0,c=t?o(IF(n.touched,a)):void 0;return bF(u)&&(u=void 0),bF(c)&&(c=void 0),yF({},n,{values:s,errors:r?TF(n.errors,a,u):n.errors,touched:t?TF(n.touched,a,c):n.touched})}))},n.push=function(e){return n.updateArrayField((function(t){return[].concat(VF(t),[vF(e)])}),!1,!1)},n.handlePush=function(e){return function(){return n.push(e)}},n.swap=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=VF(e),i=r[t];return r[t]=r[n],r[n]=i,r}(n,e,t)}),!0,!0)},n.handleSwap=function(e,t){return function(){return n.swap(e,t)}},n.move=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=VF(e),i=r[t];return r.splice(t,1),r.splice(n,0,i),r}(n,e,t)}),!0,!0)},n.handleMove=function(e,t){return function(){return n.move(e,t)}},n.insert=function(e,t){return n.updateArrayField((function(n){return BF(n,e,t)}),(function(t){return BF(t,e,null)}),(function(t){return BF(t,e,null)}))},n.handleInsert=function(e,t){return function(){return n.insert(e,t)}},n.replace=function(e,t){return n.updateArrayField((function(n){return function(e,t,n){var r=VF(e);return r[t]=n,r}(n,e,t)}),!1,!1)},n.handleReplace=function(e,t){return function(){return n.replace(e,t)}},n.unshift=function(e){var t=-1;return n.updateArrayField((function(n){var r=n?[e].concat(n):[e];return t<0&&(t=r.length),r}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n}),(function(e){var n=e?[null].concat(e):[null];return t<0&&(t=n.length),n})),t},n.handleUnshift=function(e){return function(){return n.unshift(e)}},n.handleRemove=function(e){return function(){return n.remove(e)}},n.handlePop=function(){return function(){return n.pop()}},n.remove=n.remove.bind(kF(n)),n.pop=n.pop.bind(kF(n)),n}mF(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){this.props.validateOnChange&&this.props.formik.validateOnChange&&!xP()(IF(e.formik.values,e.name),IF(this.props.formik.values,this.props.name))&&this.props.formik.validateForm(this.props.formik.values)},n.remove=function(e){var t;return this.updateArrayField((function(n){var r=n?VF(n):[];return t||(t=r[e]),_F(r.splice)&&r.splice(e,1),_F(r.every)&&r.every((function(e){return void 0===e}))?[]:r}),!0,!0),t},n.pop=function(){var e;return this.updateArrayField((function(t){var n=t.slice();return e||(e=n&&n.pop&&n.pop()),n}),!0,!0),e},n.render=function(){var e={push:this.push,pop:this.pop,swap:this.swap,move:this.move,insert:this.insert,replace:this.replace,unshift:this.unshift,remove:this.remove,handlePush:this.handlePush,handlePop:this.handlePop,handleSwap:this.handleSwap,handleMove:this.handleMove,handleInsert:this.handleInsert,handleReplace:this.handleReplace,handleUnshift:this.handleUnshift,handleRemove:this.handleRemove},t=this.props,n=t.component,i=t.render,a=t.children,o=t.name,s=yF({},e,{form:gF(t.formik,["validate","validationSchema"]),name:o});return n?(0,r.createElement)(n,s):i?i(s):a?"function"===typeof a?a(s):EF(a)?null:r.Children.only(a):null},t}(r.Component);qF.defaultProps={validateOnChange:!0};var ZF=n(758),WF=n(564),HF=n(514),KF=n.n(HF),GF=Object.prototype.toString,QF=Error.prototype.toString,YF=RegExp.prototype.toString,$F="undefined"!==typeof Symbol?Symbol.prototype.toString:function(){return""},XF=/^Symbol\((.*)\)(.*)$/;function JF(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;var n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return $F.call(e).replace(XF,"Symbol($1)");var r=GF.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+QF.call(e)+"]":"RegExp"===r?YF.call(e):null}function eU(e,t){var n=JF(e,t);return null!==n?n:JSON.stringify(e,(function(e,n){var r=JF(this[e],t);return null!==r?r:n}),2)}function tU(e){return null==e?[]:[].concat(e)}var nU=/\$\{\s*(\w+)\s*\}/g,rU=function(e){g(n,e);var t=x(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).value=void 0,o.path=void 0,o.type=void 0,o.errors=void 0,o.params=void 0,o.inner=void 0,o.name="ValidationError",o.value=r,o.path=i,o.type=a,o.errors=[],o.inner=[],tU(e).forEach((function(e){var t;n.isError(e)?((t=o.errors).push.apply(t,h(e.errors)),o.inner=o.inner.concat(e.inner.length?e.inner:e)):o.errors.push(e)})),o.message=o.errors.length>1?"".concat(o.errors.length," errors occurred"):o.errors[0],Error.captureStackTrace&&Error.captureStackTrace(w(o),n),o}return y(n,null,[{key:"formatError",value:function(e,t){var n=t.label||t.path||"this";return n!==t.path&&(t=Object.assign({},t,{path:n})),"string"===typeof e?e.replace(nU,(function(e,n){return eU(t[n])})):"function"===typeof e?e(t):e}},{key:"isError",value:function(e){return e&&"ValidationError"===e.name}}]),n}(E(Error)),iU={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:function(e){var t=e.path,n=e.type,r=e.value,i=e.originalValue,a=null!=i&&i!==r?" (cast from the value `".concat(eU(i,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(eU(r,!0),"`")+a:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(eU(r,!0),"`")+a}},aU={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},oU={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},sU={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},uU={isValue:"${path} field must be ${value}"},cU={noUnknown:"${path} field has unspecified keys: ${unknown}"},lU={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},fU=function(e){var t=e.path,n=e.value,r=e.spec.types.length;if(Array.isArray(n)){if(n.length<r)return"".concat(t," tuple value has too few items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(eU(n,!0),"`");if(n.length>r)return"".concat(t," tuple value has too many items, expected a length of ").concat(r," but got ").concat(n.length," for value: `").concat(eU(n,!0),"`")}return rU.formatError(iU.notType,e)},hU=(Object.assign(Object.create(null),{mixed:iU,string:aU,number:oU,date:sU,object:cU,array:lU,boolean:uU}),function(e){return e&&e.__isYupSchema__}),dU=function(){function e(t,n){d(this,e),this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}return y(e,[{key:"resolve",value:function(e,t){var n=this.refs.map((function(e){return e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)})),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!hU(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}],[{key:"fromOptions",value:function(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");var r=n.is,i=n.then,a=n.otherwise,o="function"===typeof r?r:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((function(e){return e===r}))};return new e(t,(function(e,t){var n,r=o.apply(void 0,h(e))?i:a;return null!=(n=null==r?void 0:r(t))?n:t}))}}]),e}(),pU="$",vU=".";var yU=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(d(this,e),this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof t)throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),""===t)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===pU,this.isValue=this.key[0]===vU,this.isSibling=!this.isContext&&!this.isValue;var r=this.isContext?pU:this.isValue?vU:"";this.path=this.key.slice(r.length),this.getter=this.path&&(0,ZF.getter)(this.path,!0),this.map=n.map}return y(e,[{key:"getValue",value:function(e,t,n){var r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}},{key:"cast",value:function(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}},{key:"resolve",value:function(){return this}},{key:"describe",value:function(){return{type:"ref",key:this.key}}},{key:"toString",value:function(){return"Ref(".concat(this.key,")")}}],[{key:"isRef",value:function(e){return e&&e.__isYupRef}}]),e}();yU.prototype.__isYupRef=!0;var mU=function(e){return null==e};function gU(e){function t(t,n,r){var i=t.value,a=t.path,o=void 0===a?"":a,s=t.options,u=t.originalValue,c=t.schema,l=e.name,f=e.test,h=e.params,d=e.message,p=e.skipAbsent,v=s.parent,y=s.context,m=s.abortEarly;function g(e){return yU.isRef(e)?e.getValue(i,v,y):e}function k(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({value:i,originalValue:u,label:c.spec.label,path:e.path||o,spec:c.spec},h,e.params),n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];t[a]=g(t[a])}var s=new rU(rU.formatError(e.message||d,t),i,t.path,e.type||l);return s.params=t,s}var b=(void 0===m?c.spec.abortEarly:m)?n:r,_={path:o,parent:v,type:l,from:s.from,createError:k,resolve:g,options:s,originalValue:u,schema:c},w=function(e){rU.isError(e)?b(e):e?r(null):b(k())},x=function(e){rU.isError(e)?b(e):n(e)},S=p&&mU(i);if(s.sync){var E;try{var C;if("function"===typeof(null==(C=E=!!S||f.call(_,i,_))?void 0:C.then))throw new Error('Validation test of type: "'.concat(_.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned")}catch(UB){return void x(UB)}w(E)}else try{Promise.resolve(!!S||f.call(_,i,_)).then(w,x)}catch(UB){x(UB)}}return t.OPTIONS=e,t}function kU(e,t,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,ZF.forEach)(t,(function(s,u,c){var l=u?s.slice(1,s.length-1):s,f="tuple"===(e=e.resolve({context:o,parent:r,value:n})).type,h=c?parseInt(l,10):0;if(e.innerType||f){if(f&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(a,'" must contain an index to the tuple element, e.g. "').concat(a,'[0]"'));if(n&&h>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(s,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[h],e=f?e.spec.types[h]:e.innerType}if(!c){if(!e.fields||!e.fields[l])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(a,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[l],e=e.fields[l]}i=l,a=u?"["+s+"]":"."+s})),{schema:e,parent:r,parentPath:i}):{parent:r,parentPath:t,schema:e}}var bU=function(e){g(n,e);var t=x(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"describe",value:function(){var e,t=[],n=N(this.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(yU.isRef(r)?r.describe():r)}}catch(UB){n.e(UB)}finally{n.f()}return t}},{key:"resolveAll",value:function(e){var t,n=[],r=N(this.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(e(i))}}catch(UB){r.e(UB)}finally{r.f()}return n}},{key:"clone",value:function(){return new n(this.values())}},{key:"merge",value:function(e,t){var n=this.clone();return e.forEach((function(e){return n.add(e)})),t.forEach((function(e){return n.delete(e)})),n}}]),n}(E(Set));function _U(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(hU(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(var r=0;r<e.length;r++)t[r]=_U(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);var i,a=N(e.entries());try{for(a.s();!(i=a.n()).done;){var o=(0,u.Z)(i.value,2),s=o[0],c=o[1];t.set(s,_U(c,n))}}catch(UB){a.e(UB)}finally{a.f()}}else if(e instanceof Set){t=new Set,n.set(e,t);var l,f=N(e);try{for(f.s();!(l=f.n()).done;){var h=l.value;t.add(_U(h,n))}}catch(UB){f.e(UB)}finally{f.f()}}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(var d=0,p=Object.entries(e);d<p.length;d++){var v=(0,u.Z)(p[d],2),y=v[0],m=v[1];t[y]=_U(m,n)}}return t}var wU=function(){function e(t){var n=this;d(this,e),this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new bU,this._blacklist=new bU,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation((function(){n.typeError(iU.notType)})),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,optional:!0,coerce:!0},null==t?void 0:t.spec),this.withMutation((function(e){e.nonNullable()}))}return y(e,[{key:"_type",get:function(){return this.type}},{key:"clone",value:function(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;var t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=h(this.deps),t.conditions=h(this.conditions),t.tests=h(this.tests),t.transforms=h(this.transforms),t.spec=_U(Object.assign({},this.spec,e)),t}},{key:"label",value:function(e){var t=this.clone();return t.spec.label=e,t}},{key:"meta",value:function(){if(0===arguments.length)return this.spec.meta;var e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}},{key:"withMutation",value:function(e){var t=this._mutate;this._mutate=!0;var n=e(this);return this._mutate=t,n}},{key:"concat",value:function(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));var t=this,n=e.clone(),r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation((function(t){e.tests.forEach((function(e){t.test(e.OPTIONS)}))})),n.transforms=[].concat(h(t.transforms),h(n.transforms)),n}},{key:"isType",value:function(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}},{key:"resolve",value:function(e){var t=this;if(t.conditions.length){var n=t.conditions;(t=t.clone()).conditions=[],t=(t=n.reduce((function(t,n){return n.resolve(t,e)}),t)).resolve(e)}return t}},{key:"resolveOptions",value:function(e){var t,n,r;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive})}},{key:"cast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,i=n._cast(e,t);if(!1!==t.assert&&!n.isType(i)){if(r&&mU(i))return i;var a=eU(e),o=eU(i);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(a," \n")+(o!==a?"result of cast: ".concat(o):""))}return i}},{key:"_cast",value:function(e,t){var n=this,r=void 0===e?e:this.transforms.reduce((function(t,r){return r.call(n,t,e,n)}),e);return void 0===r&&(r=this.getDefault(t)),r}},{key:"_validate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=n.path,o=n.originalValue,s=void 0===o?e:o,u=n.strict,c=void 0===u?this.spec.strict:u,l=e;c||(l=this._cast(l,Object.assign({assert:!1},n)));for(var f=[],h=0,d=Object.values(this.internalTests);h<d.length;h++){var p=d[h];p&&f.push(p)}this.runTests({path:a,value:l,originalValue:s,options:n,tests:f},r,(function(e){if(e.length)return i(e,l);t.runTests({path:a,value:l,originalValue:s,options:n,tests:t.tests},r,i)}))}},{key:"runTests",value:function(e,t,n){var r=!1,i=e.tests,a=e.value,o=e.originalValue,s=e.path,u=e.options,c=function(e){r||(r=!0,t(e,a))},l=function(e){r||(r=!0,n(e,a))},f=i.length,h=[];if(!f)return l([]);for(var d={value:a,originalValue:o,path:s,options:u,schema:this},p=0;p<i.length;p++){(0,i[p])(d,c,(function(e){e&&(h=h.concat(e)),--f<=0&&l(h)}))}}},{key:"asNestedTest",value:function(e){var t,n=this,r=e.key,i=e.index,a=e.parent,o=e.parentPath,s=e.originalParent,u=e.options,c=null!=r?r:i;if(null==c)throw TypeError("Must include `key` or `index` for nested validations");var l="number"===typeof c,f=a[c],h=Object.assign({},u,(t={strict:!0,parent:a,value:f,originalValue:s[c],key:void 0},(0,qi.Z)(t,l?"index":"key",c),(0,qi.Z)(t,"path",l||c.includes(".")?"".concat(o||"","[").concat(f?c:'"'.concat(c,'"'),"]"):(o?"".concat(o,"."):"")+r),t));return function(e,t,r){return n.resolve(h)._validate(f,h,t,r)}}},{key:"validate",value:function(e,t){var n=this.resolve(Object.assign({},t,{value:e}));return new Promise((function(r,i){return n._validate(e,t,(function(e,t){rU.isError(e)&&(e.value=t),i(e)}),(function(e,t){e.length?i(new rU(e,t)):r(t)}))}))}},{key:"validateSync",value:function(e,t){var n;return this.resolve(Object.assign({},t,{value:e}))._validate(e,Object.assign({},t,{sync:!0}),(function(e,t){throw rU.isError(e)&&(e.value=t),e}),(function(t,r){if(t.length)throw new rU(t,e);n=r})),n}},{key:"isValid",value:function(e,t){return this.validate(e,t).then((function(){return!0}),(function(e){if(rU.isError(e))return!1;throw e}))}},{key:"isValidSync",value:function(e,t){try{return this.validateSync(e,t),!0}catch(UB){if(rU.isError(UB))return!1;throw UB}}},{key:"_getDefault",value:function(e){var t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):_U(t)}},{key:"getDefault",value:function(e){return this.resolve(e||{})._getDefault(e)}},{key:"default",value:function(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}},{key:"strict",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}},{key:"nullability",value:function(e,t){var n=this.clone({nullable:e});return n.internalTests.nullable=gU({message:t,name:"nullable",test:function(e){return null!==e||this.schema.spec.nullable}}),n}},{key:"optionality",value:function(e,t){var n=this.clone({optional:e});return n.internalTests.optionality=gU({message:t,name:"optionality",test:function(e){return void 0!==e||this.schema.spec.optional}}),n}},{key:"optional",value:function(){return this.optionality(!0)}},{key:"defined",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iU.defined;return this.optionality(!1,e)}},{key:"nullable",value:function(){return this.nullability(!0)}},{key:"nonNullable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iU.notNull;return this.nullability(!1,e)}},{key:"required",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iU.required;return this.clone().withMutation((function(t){return t.nonNullable(e).defined(e)}))}},{key:"notRequired",value:function(){return this.clone().withMutation((function(e){return e.nullable().optional()}))}},{key:"transform",value:function(e){var t=this.clone();return t.transforms.push(e),t}},{key:"test",value:function(){var e;if(void 0===(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]}).message&&(e.message=iU.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");var t=this.clone(),n=gU(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter((function(t){if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0})),t.tests.push(n),t}},{key:"when",value:function(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");var n=this.clone(),r=tU(e).map((function(e){return new yU(e)}));return r.forEach((function(e){e.isSibling&&n.deps.push(e.key)})),n.conditions.push("function"===typeof t?new dU(r,t):dU.fromOptions(r,t)),n}},{key:"typeError",value:function(e){var t=this.clone();return t.internalTests.typeError=gU({message:e,name:"typeError",skipAbsent:!0,test:function(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}},{key:"oneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iU.oneOf,n=this.clone();return e.forEach((function(e){n._whitelist.add(e),n._blacklist.delete(e)})),n.internalTests.whiteList=gU({message:t,name:"oneOf",skipAbsent:!0,test:function(e){var t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"notOneOf",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:iU.notOneOf,n=this.clone();return e.forEach((function(e){n._blacklist.add(e),n._whitelist.delete(e)})),n.internalTests.blacklist=gU({message:t,name:"notOneOf",test:function(e){var t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}},{key:"strip",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}},{key:"describe",value:function(e){var t=(e?this.resolve(e):this).clone(),n=t.spec,r=n.label,i={meta:n.meta,label:r,optional:n.optional,nullable:n.nullable,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map((function(e){return{name:e.OPTIONS.name,params:e.OPTIONS.params}})).filter((function(e,t,n){return n.findIndex((function(t){return t.name===e.name}))===t}))};return i}}]),e}();wU.prototype.__isYupSchema__=!0;for(var xU=function(){var e=EU[SU];wU.prototype["".concat(e,"At")]=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=kU(this,t,n,r.context),a=i.parent,o=i.parentPath;return i.schema[e](a&&a[o],Object.assign({},r,{parent:a,path:t}))}},SU=0,EU=["validate","validateSync"];SU<EU.length;SU++)xU();for(var CU=0,IU=["equals","is"];CU<IU.length;CU++){var TU=IU[CU];wU.prototype[TU]=wU.prototype.oneOf}for(var NU=0,AU=["not","nope"];NU<AU.length;NU++){var DU=AU[NU];wU.prototype[DU]=wU.prototype.notOneOf}var OU=function(){return!0};var RU=function(e){g(n,e);var t=x(n);function n(e){return d(this,n),t.call(this,"function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:OU},e))}return y(n)}(wU);RU.prototype;var PU=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"boolean",check:function(e){return e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e}}),e.withMutation((function(){e.transform((function(e,t,n){if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e}))})),e}return y(n,[{key:"isTrue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uU.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:function(e){return mU(e)||!0===e}})}},{key:"isFalse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uU.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:function(e){return mU(e)||!1===e}})}},{key:"default",value:function(e){return We(k(n.prototype),"default",this).call(this,e)}},{key:"defined",value:function(e){return We(k(n.prototype),"defined",this).call(this,e)}},{key:"optional",value:function(){return We(k(n.prototype),"optional",this).call(this)}},{key:"required",value:function(e){return We(k(n.prototype),"required",this).call(this,e)}},{key:"notRequired",value:function(){return We(k(n.prototype),"notRequired",this).call(this)}},{key:"nullable",value:function(){return We(k(n.prototype),"nullable",this).call(this)}},{key:"nonNullable",value:function(e){return We(k(n.prototype),"nonNullable",this).call(this,e)}},{key:"strip",value:function(e){return We(k(n.prototype),"strip",this).call(this,e)}}]),n}(wU);PU.prototype;var jU=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,LU=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,MU=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,FU=function(e){return mU(e)||e===e.trim()},UU={}.toString();function BU(){return new VU}var VU=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"string",check:function(e){return e instanceof String&&(e=e.valueOf()),"string"===typeof e}}),e.withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;var r=null!=e&&e.toString?e.toString():e;return r===UU?e:r}))})),e}return y(n,[{key:"required",value:function(e){return We(k(n.prototype),"required",this).call(this,e).withMutation((function(t){return t.test({message:e||iU.required,name:"required",skipAbsent:!0,test:function(e){return!!e.length}})}))}},{key:"notRequired",value:function(){return We(k(n.prototype),"notRequired",this).call(this).withMutation((function(e){return e.tests=e.tests.filter((function(e){return"required"!==e.OPTIONS.name})),e}))}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aU.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"matches",value:function(e,t){var n,r,i=!1;if(t)if("object"===typeof t){var a=t.excludeEmptyString;i=void 0!==a&&a,n=t.message,r=t.name}else n=t;return this.test({name:r||"matches",message:n||aU.matches,params:{regex:e},skipAbsent:!0,test:function(t){return""===t&&i||-1!==t.search(e)}})}},{key:"email",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.email;return this.matches(jU,{name:"email",message:e,excludeEmptyString:!0})}},{key:"url",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.url;return this.matches(LU,{name:"url",message:e,excludeEmptyString:!0})}},{key:"uuid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.uuid;return this.matches(MU,{name:"uuid",message:e,excludeEmptyString:!1})}},{key:"ensure",value:function(){return this.default("").transform((function(e){return null===e?"":e}))}},{key:"trim",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.trim;return this.transform((function(e){return null!=e?e.trim():e})).test({message:e,name:"trim",test:FU})}},{key:"lowercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.lowercase;return this.transform((function(e){return mU(e)?e:e.toLowerCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return mU(e)||e===e.toLowerCase()}})}},{key:"uppercase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aU.uppercase;return this.transform((function(e){return mU(e)?e:e.toUpperCase()})).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:function(e){return mU(e)||e===e.toUpperCase()}})}}]),n}(wU);BU.prototype=VU.prototype;var zU=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"number",check:function(e){return e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!function(e){return e!=+e}(e)}}),e.withMutation((function(){e.transform((function(e,t,n){if(!n.spec.coerce)return e;var r=e;if("string"===typeof r){if(""===(r=r.replace(/\s/g,"")))return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)}))})),e}return y(n,[{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t>=this.resolve(e)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t<=this.resolve(e)}})}},{key:"lessThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test:function(t){return t<this.resolve(e)}})}},{key:"moreThan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oU.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test:function(t){return t>this.resolve(e)}})}},{key:"positive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oU.positive;return this.moreThan(0,e)}},{key:"negative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oU.negative;return this.lessThan(0,e)}},{key:"integer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oU.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:function(e){return Number.isInteger(e)}})}},{key:"truncate",value:function(){return this.transform((function(e){return mU(e)?e:0|e}))}},{key:"round",value:function(e){var t,n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform((function(t){return mU(t)?t:Math[e](t)}))}}]),n}(wU);zU.prototype;var qU=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var ZU=new Date("");function WU(){return new HU}var HU=function(e){g(n,e);var t=x(n);function n(){var e;return d(this,n),e=t.call(this,{type:"date",check:function(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),e.withMutation((function(){e.transform((function(e,t,r){return!r.spec.coerce||r.isType(e)||null===e?e:(e=function(e){var t,n,r=[1,4,5,6,7,10,11],i=0;if(n=qU.exec(e)){for(var a,o=0;a=r[o];++o)n[a]=+n[a]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,n[7]=n[7]?String(n[7]).substr(0,3):0,void 0!==n[8]&&""!==n[8]||void 0!==n[9]&&""!==n[9]?("Z"!==n[8]&&void 0!==n[9]&&(i=60*n[10]+n[11],"+"===n[9]&&(i=0-i)),t=Date.UTC(n[1],n[2],n[3],n[4],n[5]+i,n[6],n[7])):t=+new Date(n[1],n[2],n[3],n[4],n[5],n[6],n[7])}else t=Date.parse?Date.parse(e):NaN;return t}(e),isNaN(e)?n.INVALID_DATE:new Date(e))}))})),e}return y(n,[{key:"prepareParam",value:function(e,t){var n;if(yU.isRef(e))n=e;else{var r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}},{key:"min",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sU.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(e){return e>=this.resolve(n)}})}},{key:"max",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sU.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(e){return e<=this.resolve(n)}})}}]),n}(wU);function KU(e,t){var n=1/0;return e.some((function(e,r){var i;if(null!=(i=t.path)&&i.includes(e))return n=r,!0})),n}function GU(e){return function(t,n){return KU(e,t)-KU(e,n)}}HU.INVALID_DATE=ZU,WU.prototype=HU.prototype,WU.INVALID_DATE=ZU;var QU=function(e,t,n){if("string"!==typeof e)return e;var r=e;try{r=JSON.parse(e)}catch(UB){}return n.isType(r)?r:e};function YU(e){if("fields"in e){for(var t={},n=0,r=Object.entries(e.fields);n<r.length;n++){var i=(0,u.Z)(r[n],2),a=i[0],o=i[1];t[a]=YU(o)}return e.setFields(t)}if("array"===e.type){var s=e.optional();return s.innerType&&(s.innerType=YU(s.innerType)),s}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(YU)}):"optional"in e?e.optional():e}var $U=function(e){return"[object Object]"===Object.prototype.toString.call(e)};var XU=GU([]);function JU(e){return new eB(e)}var eB=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),r=t.call(this,{type:"object",check:function(e){return $U(e)||"function"===typeof e}}),r.fields=Object.create(null),r._sortErrors=XU,r._nodes=[],r._excludedEdges=[],r.withMutation((function(){e&&r.shape(e)})),r}return y(n,[{key:"_cast",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=We(k(n.prototype),"_cast",this).call(this,e,i);if(void 0===a)return this.getDefault(i);if(!this._typeCheck(a))return a;var o,s=this.fields,u=null!=(t=i.stripUnknown)?t:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(a).filter((function(e){return!r._nodes.includes(e)}))),l={},f=Object.assign({},i,{parent:l,__validating:i.__validating||!1}),h=!1,d=N(c);try{for(d.s();!(o=d.n()).done;){var p=o.value,v=s[p],y=p in a;if(v){var m,g=a[p];f.path=(i.path?"".concat(i.path,"."):"")+p;var b=(v=v.resolve({value:g,context:i.context,parent:l}))instanceof wU?v.spec:void 0,_=null==b?void 0:b.strict;if(null!=b&&b.strip){h=h||p in a;continue}void 0!==(m=i.__validating&&_?a[p]:v.cast(a[p],f))&&(l[p]=m)}else y&&!u&&(l[p]=a[p]);y===p in l&&l[p]===a[p]||(h=!0)}}catch(UB){d.e(UB)}finally{d.f()}return h?l:a}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=r.from,s=void 0===o?[]:o,u=r.originalValue,c=void 0===u?e:u,l=r.recursive,f=void 0===l?this.spec.recursive:l;r.from=[{schema:this,value:c}].concat(h(s)),r.__validating=!0,r.originalValue=c,We(k(n.prototype),"_validate",this).call(this,e,r,i,(function(e,n){if(f&&$U(n)){c=c||n;var o,s=[],u=N(t._nodes);try{for(u.s();!(o=u.n()).done;){var l=o.value,h=t.fields[l];h&&!yU.isRef(h)&&s.push(h.asNestedTest({options:r,key:l,parent:n,parentPath:r.path,originalParent:c}))}}catch(UB){u.e(UB)}finally{u.f()}t.runTests({tests:s,value:n,originalValue:c,options:r},i,(function(r){a(r.sort(t._sortErrors).concat(e),n)}))}else a(e,n)}))}},{key:"clone",value:function(e){var t=We(k(n.prototype),"clone",this).call(this,e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}},{key:"concat",value:function(e){for(var t=this,r=We(k(n.prototype),"concat",this).call(this,e),i=r.fields,a=0,o=Object.entries(this.fields);a<o.length;a++){var s=(0,u.Z)(o[a],2),c=s[0],l=s[1],f=i[c];i[c]=void 0===f?l:f}return r.withMutation((function(n){return n.setFields(i,[].concat(h(t._excludedEdges),h(e._excludedEdges)))}))}},{key:"_getDefault",value:function(e){var t=this;if("default"in this.spec)return We(k(n.prototype),"_getDefault",this).call(this,e);if(this._nodes.length){var r={};return this._nodes.forEach((function(n){var i,a=t.fields[n],o=e;null!=(i=o)&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[n]})),r[n]=a&&"getDefault"in a?a.getDefault(o):void 0})),r}}},{key:"setFields",value:function(e,t){var n=this.clone();return n.fields=e,n._nodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,i=new Set(t.map((function(e){var t=(0,u.Z)(e,2),n=t[0],r=t[1];return"".concat(n,"-").concat(r)})));function a(e,t){var a=(0,ZF.split)(e)[0];r.add(a),i.has("".concat(t,"-").concat(a))||n.push([t,a])}for(var o=function(){var t=c[s],n=e[t];r.add(t),yU.isRef(n)&&n.isSibling?a(n.path,t):hU(n)&&"deps"in n&&n.deps.forEach((function(e){return a(e,t)}))},s=0,c=Object.keys(e);s<c.length;s++)o();return KF().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=GU(Object.keys(e)),t&&(n._excludedEdges=t),n}},{key:"shape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation((function(n){var r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[].concat(h(n._excludedEdges),h(t))),n.setFields(Object.assign(n.fields,e),r)}))}},{key:"partial",value:function(){for(var e={},t=0,n=Object.entries(this.fields);t<n.length;t++){var r=(0,u.Z)(n[t],2),i=r[0],a=r[1];e[i]="optional"in a&&a.optional instanceof Function?a.optional():a}return this.setFields(e)}},{key:"deepPartial",value:function(){return YU(this)}},{key:"pick",value:function(e){var t,n={},r=N(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.fields[i]&&(n[i]=this.fields[i])}}catch(UB){r.e(UB)}finally{r.f()}return this.setFields(n)}},{key:"omit",value:function(e){var t,n=Object.assign({},this.fields),r=N(e);try{for(r.s();!(t=r.n()).done;){delete n[t.value]}}catch(UB){r.e(UB)}finally{r.f()}return this.setFields(n)}},{key:"from",value:function(e,t,n){var r=(0,ZF.getter)(e,!0);return this.transform((function(i){if(!i)return i;var a=i;return function(e,t){var n=h((0,ZF.normalizePath)(t));if(1===n.length)return n[0]in e;var r=n.pop(),i=(0,ZF.getter)((0,ZF.join)(n),!0)(e);return!(!i||!(r in i))}(i,e)&&(a=Object.assign({},i),n||delete a[e],a[t]=r(i)),a}))}},{key:"json",value:function(){return this.transform(QU)}},{key:"noUnknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cU.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);var n=this.test({name:"noUnknown",exclusive:!0,message:t,test:function(t){if(null==t)return!0;var n=function(e,t){var n=Object.keys(e.fields);return Object.keys(t).filter((function(e){return-1===n.indexOf(e)}))}(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}},{key:"unknown",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cU.noUnknown;return this.noUnknown(!e,t)}},{key:"transformKeys",value:function(e){return this.transform((function(t){if(!t)return t;for(var n={},r=0,i=Object.keys(t);r<i.length;r++){var a=i[r];n[e(a)]=t[a]}return n}))}},{key:"camelCase",value:function(){return this.transformKeys(WF.camelCase)}},{key:"snakeCase",value:function(){return this.transformKeys(WF.snakeCase)}},{key:"constantCase",value:function(){return this.transformKeys((function(e){return(0,WF.snakeCase)(e).toUpperCase()}))}},{key:"describe",value:function(e){var t=We(k(n.prototype),"describe",this).call(this,e);t.fields={};for(var r=0,i=Object.entries(this.fields);r<i.length;r++){var a,o=(0,u.Z)(i[r],2),s=o[0],c=o[1],l=e;null!=(a=l)&&a.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[s]})),t.fields[s]=c.describe(l)}return t}}]),n}(wU);JU.prototype=eB.prototype;var tB=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),r=t.call(this,{type:"array",spec:{types:e},check:function(e){return Array.isArray(e)}}),r.innerType=void 0,r.innerType=e,r}return y(n,[{key:"_cast",value:function(e,t){var r=this,i=We(k(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i)||!this.innerType)return i;var a=!1,o=i.map((function(e,n){var i=r.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return i!==e&&(a=!0),i}));return a?o:i}},{key:"_validate",value:function(e){var t,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=this.innerType,u=null!=(t=i.recursive)?t:this.spec.recursive;null!=i.originalValue&&i.originalValue,We(k(n.prototype),"_validate",this).call(this,e,i,a,(function(t,n){var c;if(u&&s&&r._typeCheck(n)){for(var l=new Array(n.length),f=0;f<n.length;f++){var h;l[f]=s.asNestedTest({options:i,index:f,parent:n,parentPath:i.path,originalParent:null!=(h=i.originalValue)?h:e})}r.runTests({value:n,tests:l,originalValue:null!=(c=i.originalValue)?c:e,options:i},a,(function(e){return o(e.concat(t),n)}))}else o(t,n)}))}},{key:"clone",value:function(e){var t=We(k(n.prototype),"clone",this).call(this,e);return t.innerType=this.innerType,t}},{key:"json",value:function(){return this.transform(QU)}},{key:"concat",value:function(e){var t=We(k(n.prototype),"concat",this).call(this,e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}},{key:"of",value:function(e){var t=this.clone();if(!hU(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+eU(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}},{key:"length",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lU.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test:function(t){return t.length===this.resolve(e)}})}},{key:"min",value:function(e,t){return t=t||lU.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test:function(t){return t.length>=this.resolve(e)}})}},{key:"max",value:function(e,t){return t=t||lU.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test:function(t){return t.length<=this.resolve(e)}})}},{key:"ensure",value:function(){var e=this;return this.default((function(){return[]})).transform((function(t,n){return e._typeCheck(t)?t:null==n?[]:[].concat(n)}))}},{key:"compact",value:function(e){var t=e?function(t,n,r){return!e(t,n,r)}:function(e){return!!e};return this.transform((function(e){return null!=e?e.filter(t):e}))}},{key:"describe",value:function(e){var t=We(k(n.prototype),"describe",this).call(this,e);if(this.innerType){var r,i=e;null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[0]})),t.innerType=this.innerType.describe(i)}return t}}]),n}(wU);tB.prototype;var nB=function(e){g(n,e);var t=x(n);function n(e){var r;return d(this,n),r=t.call(this,{type:"tuple",spec:{types:e},check:function(e){var t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),r.withMutation((function(){r.typeError(fU)})),r}return y(n,[{key:"_cast",value:function(e,t){var r=this.spec.types,i=We(k(n.prototype),"_cast",this).call(this,e,t);if(!this._typeCheck(i))return i;var a=!1,o=r.map((function(e,n){var r=e.cast(i[n],Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return r!==i[n]&&(a=!0),r}));return a?o:i}},{key:"_validate",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=this.spec.types;We(k(n.prototype),"_validate",this).call(this,e,r,i,(function(n,s){var c;if(t._typeCheck(s)){var l,f=[],h=N(o.entries());try{for(h.s();!(l=h.n()).done;){var d,p=(0,u.Z)(l.value,2),v=p[0],y=p[1];f[v]=y.asNestedTest({options:r,index:v,parent:s,parentPath:r.path,originalParent:null!=(d=r.originalValue)?d:e})}}catch(UB){h.e(UB)}finally{h.f()}t.runTests({value:s,tests:f,originalValue:null!=(c=r.originalValue)?c:e,options:r},i,(function(e){return a(e.concat(n),s)}))}else a(n,s)}))}},{key:"describe",value:function(e){var t=We(k(n.prototype),"describe",this).call(this,e);return t.innerType=this.spec.types.map((function(t,n){var r,i=e;return null!=(r=i)&&r.value&&(i=Object.assign({},i,{parent:i.value,value:i.value[n]})),t.describe(i)})),t}}]),n}(wU);nB.prototype;var rB=JU().shape({email:BU().email("Enter valid email").required("Required"),password:BU().min(5).max(20).matches(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,20}$/,{message:"Create stronger password"}).required("Required")});function iB(e,t){var n=(0,r.useState)(!1),i=(0,u.Z)(n,2),a=i[0],o=i[1],s=jF({initialValues:{email:e.model.email,password:e.model.password},validationSchema:rB,onSubmit:function(t,n){e.onSubmit(t),o(!0),setTimeout((function(){o(!1)}),3e3)}}),c=(s.values,s.errors),l=s.touched,f=s.handleBlur,h=s.handleChange,d=s.handleSubmit;return(0,oi.jsxs)("form",{className:"auth-form",onSubmit:d,style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,oi.jsx)("input",{style:{textAlign:"left"},className:"auth-input my-input",onChange:h,onBlur:f,id:"email",type:"email",placeholder:"Email"}),l.email&&c.email&&(0,oi.jsx)("div",{className:"error",children:c.email}),(0,oi.jsx)("input",{style:{textAlign:"left"},className:"auth-input my-input",onChange:h,onBlur:f,id:"password",type:"password",placeholder:"Password"}),l.password&&c.password&&(0,oi.jsx)("div",{className:"error",children:c.password}),(0,oi.jsx)("button",{className:"auth-submit",disabled:a,type:"submit",style:{marginTop:"50px"},children:"Submit"})]})}var aB,oB=function(e,t){var n=new Request("".concat(ki,"/").concat(t),{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST","Access-Control-Allow-Headers":"Content-Type"},mode:"cors",body:JSON.stringify({credentials:e})});return fetch(n).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error("Error:",e)}))};function sB(){var e=(0,r.useState)([]),t=(0,u.Z)(e,2),n=t[0],i=t[1],a=(0,r.useContext)(mi).update,c=xe();function l(e){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i([]),e.next=4,oB(t,"login");case 4:Oi((n=e.sent).token),a(Ri()),KR(n.user.id,n.user.email,n.user.profileImage),n&&(c("/"),c(0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),i(["Your login or password was wrong!"]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var h=document.forms[0];return(0,r.useEffect)((function(){if(h){for(var e=h.getElementsByTagName("input"),t=e[0],n=e[1],r="example@gmail.com",i="Example1@",a=function(e){setTimeout((function(){t.value+=r[e]}),80*e)},o=0;o<17;o++)a(o);for(var s=function(e){setTimeout((function(){n.value+=i[e]}),100*e)},u=0;u<9;u++)s(u)}}),[h]),(0,oi.jsx)("div",{className:"notLogged",children:(0,oi.jsxs)("div",{className:"auth-container",children:[(0,oi.jsx)("h1",{className:"auth-title",children:"Login"}),(0,oi.jsx)(iB,{model:{email:"example@gmail.com",password:"Example1@"},onSubmit:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Login"}),(0,oi.jsx)("div",{className:"auth-link",children:(0,oi.jsxs)("div",{children:["Don't have an account?"," ",(0,oi.jsx)("span",{onClick:function(){return c("/register")},style:{textDecoration:"underline",color:"highlight",cursor:"pointer"},children:"Register here!"})]})}),(0,oi.jsx)("span",{style:{color:"red"},children:n})]})})}function uB(e){var t=e.friend,n=(0,r.useContext)(di),i=n.openedChats,a=n.updateOpenedChats;return(0,oi.jsxs)("li",{"data-testid":"rightBarFriend",onClick:function(){if(!i.includes(t)){var e=[t].concat(h(i));a(e)}},children:[(0,oi.jsx)("img",{"data-testid":"rightBarFriend-image",src:t.ProfileImage||"".concat(pi,"/noProfile.jpg"),alt:""}),(0,oi.jsx)("span",{"data-testid":"rightBarFriend-email",className:"medium-font",children:t.Email})]})}function cB(){var e=(0,r.useContext)(li).myFriends;return(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsxs)("div",{className:"bar bar-right",children:[(0,oi.jsx)("h5",{children:"Friends"}),(0,oi.jsx)("ul",{children:e&&e.map((function(e){return(0,oi.jsx)(uB,{friend:e},e.Id)}))})]})})}function lB(){var e=(0,r.useState)(window.innerWidth),t=(0,u.Z)(e,2),n=t[0],i=t[1],a=(0,r.useState)(),c=(0,u.Z)(a,2),l=c[0],f=c[1],h=(0,r.useState)(!1),d=(0,u.Z)(h,2),p=d[0],v=d[1],y=(0,r.useRef)(null),m=10;(0,r.useEffect)((function(){k()}),[]);var g=FR(y,"1000px");function k(){return b.apply(this,arguments)}function b(){return(b=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l?(null===l||void 0===l?void 0:l.length)+m:m,e.next=3,bi({numberOfPosts:t},"get-posts");case 3:(n=e.sent)&&0!=n.length&&(l&&n.length==l.length?v(!0):f(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,r.useEffect)((function(){g&&k()}),[g]),(0,r.useEffect)((function(){window.addEventListener("resize",(function(){i(window.innerWidth)}))}),[]),(0,r.useEffect)((function(){i(window.innerWidth)}),[window.innerWidth]);var _=n>700;return(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsx)(gi,{isAuthorized:(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsxs)("div",{className:"middle-content",children:[(0,oi.jsx)(iP,{setPosts:f}),(0,oi.jsx)(_P,{posts:l,setPosts:f}),(0,oi.jsx)("span",{ref:y}),p&&(0,oi.jsx)("h2",{children:"You have reached end of internet."})]}),_&&(0,oi.jsx)(cB,{})]}),notAuthorized:(0,oi.jsx)("div",{className:"notLogged","data-testid":"notLogged",children:(0,oi.jsx)(sB,{})})})})}function fB(e){var t=e.friend,n=e.setChoosenFriend,r=e.fullScreen,i=r?{width:"100%"}:{},a=r?(0,oi.jsx)("img",{className:"chat-header-userProfile-image",style:{marginRight:"1rem"},src:"".concat(pi,"/goBackArrow.png"),onClick:function(){return n(void 0)},alt:""}):void 0;return(0,oi.jsx)("section",{className:"messager-chat",style:i,children:t&&(0,oi.jsx)(UR,{friend:t,chatInMessager:!0,smallChatClose:a},t.Id)})}function hB(e){var t=e.profile,n=e.setChoosenFriend,r=t.ProfileImage||"".concat(pi,"/noProfile.jpg");return(0,oi.jsxs)("div",{className:"messager-friend",onClick:function(){n(t)},children:[(0,oi.jsx)("img",{className:"messager-friend-image",src:r,alt:""}),(0,oi.jsx)("span",{className:"messager-friend-name",children:t.Email})]})}function dB(e){var t=e.friends,n=e.setChoosenFriend;return(0,oi.jsx)(oP,{list:t,emptyListUI:(0,oi.jsx)(oi.Fragment,{}),children:(0,oi.jsx)(oi.Fragment,{children:t?t.map((function(e){return(0,oi.jsx)(hB,{profile:e,setChoosenFriend:n},e.Id)})):(0,oi.jsx)(aP,{message:"Loading"})})})}function pB(e){var t=e.profile,n=e.setChoosenFriend,r=t.ProfileImage||"".concat(pi,"/noProfile.jpg");return(0,oi.jsxs)("div",{className:"messager-mobile-icon flex-center",onClick:function(){n(t)},children:[(0,oi.jsx)("img",{className:"messager-mobile-icon-image",src:r,alt:""}),(0,oi.jsx)("span",{className:"messager-mobile-icon-name medium-font",children:t.Email})]})}function vB(e){var t=e.profile,n=e.setChoosenFriend,r=t.ProfileImage||"".concat(pi,"/noProfile.jpg");return(0,oi.jsxs)("div",{className:"mobile-friend messager-friend",onClick:function(){n(t)},children:[(0,oi.jsx)("img",{className:"messager-friend-image",src:r,alt:""}),(0,oi.jsx)("div",{children:(0,oi.jsx)("span",{className:"messager-friend-name",style:{fontSize:"2rem"},children:t.Email})})]})}function yB(e){var t=e.setChoosenFriend,n=e.choosenFriend,i=xe(),a=(0,r.useContext)(li).myFriends;return(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsxs)("div",{className:"messager-mobile-header flex-center",children:[(0,oi.jsx)("img",{src:"".concat(pi,"/goBackArrow.png"),onClick:function(){return i("/")},alt:""}),(0,oi.jsx)("h3",{children:"Chats"})]}),(0,oi.jsxs)("div",{className:"messager-mobile-options",children:[(0,oi.jsx)(Ti,{setChoosenFriend:t}),a&&(0,oi.jsx)("div",{className:"messager-mobile-options-friends",children:a.map((function(e){return(0,oi.jsx)(pB,{profile:e,setChoosenFriend:t},e.Id)}))})]}),(0,oi.jsx)("div",{className:"messager-mobile-body",children:a&&a.map((function(e){return(0,oi.jsx)(vB,{profile:e,setChoosenFriend:t},e.Id)}))}),(0,oi.jsx)("div",{className:"messager-mobile-footer"}),n&&(0,oi.jsx)("div",{className:"whole-page",children:(0,oi.jsx)(fB,{friend:n,fullScreen:!0,setChoosenFriend:t})})]})}function mB(e){var t=e.friend,n=e.sent,i=(0,r.useContext)(ci).myProfile,a=(0,r.useContext)(li),u=a.myFriends,c=a.updateFriends,l=(0,r.useContext)(fi),f=l.myFriendRequests,d=l.updateFriendRequests,p=(0,r.useContext)(hi),v=p.mySentRequests,y=p.updateSentFriendRequests;function m(){return(m=(0,s.Z)((0,o.Z)().mark((function e(){var n,r,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({userId:i.Id,friendId:t.Id},"accept-friend-request");case 2:n=e.sent,r=f.filter((function(e){return e.Id!=t.Id})),d(r),(a=h(u)).push(n),c(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,s.Z)((0,o.Z)().mark((function e(){var r,a,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=9;break}return console.log(i.Id),e.next=4,bi({userId:i.Id,friendId:t.Id},"cancel-friend-request/user");case 4:r=e.sent,a=v.filter((function(e){return e.Id!=r.Id})),y(a),e.next=14;break;case 9:return e.next=11,bi({userId:t.Id,friendId:i.Id},"cancel-friend-request/friend");case 11:s=e.sent,u=f.filter((function(e){return e.Id!=s.Id})),d(u);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,oi.jsxs)("div",{className:"friend-request",children:[(0,oi.jsxs)("span",{className:"friend-request-profile",children:[(0,oi.jsx)("img",{src:t.ProfileImage||"".concat(pi,"/noProfile.jpg"),alt:""}),(0,oi.jsx)("span",{className:"friend-request-email large-font",children:t.Email})]}),(0,oi.jsxs)("span",{className:"friend-request-options",children:[!n&&(0,oi.jsx)("button",{onClick:function(){return m.apply(this,arguments)},children:"Accept request"}),(0,oi.jsx)("button",{onClick:function(){return g.apply(this,arguments)},children:"Cancel request"})]})]})}function gB(e){var t=e.friends,n=e.sent;return(0,oi.jsx)(oP,{list:t,emptyListUI:(0,oi.jsx)(oi.Fragment,{children:"You don't have friend requests"}),children:(0,oi.jsx)("div",{className:"listOfFriendRequests",children:t?t.map((function(e){return(0,oi.jsx)(mB,{sent:n,friend:e},e.Id)})):(0,oi.jsx)(aP,{message:"Loading"})})})}function kB(e){var t=e.friend,n=xe(),i=(0,r.useContext)(ci).myProfile,a=(0,r.useContext)(li),u=a.myFriends,c=a.updateFriends;function l(){return(l=(0,s.Z)((0,o.Z)().mark((function e(){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({userId:i.Id,friendId:t.Id},"remove-friend");case 2:n=e.sent,r=u.filter((function(e){return e.Id!=n.Id})),c(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,oi.jsxs)("div",{className:"friend",children:[(0,oi.jsx)("img",{src:t.ProfileImage||"".concat(pi,"/noProfile.jpg"),onClick:function(){return n("/user-profile/".concat(t.Id))},alt:""}),(0,oi.jsxs)("span",{className:"friend-info",children:[(0,oi.jsx)("span",{className:"large-font",children:t.Email}),(0,oi.jsx)("button",{className:"friend-remove medium-font",onClick:function(){return l.apply(this,arguments)},children:"Remove friend"})]})]})}function bB(e){var t=e.friends;return(0,oi.jsx)(oP,{list:t,emptyListUI:(0,oi.jsx)(oi.Fragment,{children:"You don't have friends"}),children:(0,oi.jsx)("div",{className:"listOfFriends",style:{gridTemplateColumns:"repeat(3, 1fr)"},children:t?t.map((function(e){return(0,oi.jsx)(kB,{friend:e},e.Id)})):(0,oi.jsx)(aP,{message:"Loading"})})})}function _B(e){var t=e.friend,n=xe(),r=t.ProfileImage||"".concat(pi,"/noProfile.jpg");return(0,oi.jsxs)("div",{className:"friend-profile",onClick:function(){return n("/user-profile/".concat(t.Id))},children:[(0,oi.jsx)("img",{src:r,alt:""}),(0,oi.jsx)("span",{className:"large-font",style:{wordBreak:"break-all",padding:"0.5rem"},children:t.Email})]})}function wB(e){var t=e.friends;return(0,oi.jsx)(oP,{list:t,emptyListUI:(0,oi.jsx)(oi.Fragment,{children:"You don't have friends."}),children:(0,oi.jsx)("div",{className:"listOfPosts",style:{gap:"1rem",flexDirection:"row"},children:t?t.map((function(e){return(0,oi.jsx)(_B,{friend:e},e.Id)})):(0,oi.jsx)(aP,{message:"Loading"})})})}var xB=ai.styled(aB||(aB=IR(["\n  position: absolute;\n  top: 0;\n  width: 70vw;\n  height: 13vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  align-items: center;\n  background-color: #ffffff;\n  border-radius: 0 0 1rem 1rem;\n"])));function SB(e){var t=e.isOpen,n=e.toggleModal,r=e.children,i=e.submitButtonText,a=e.onSubmit,o=e.onClose,s=e.disableSubmit;return(0,oi.jsxs)(xB,{isOpen:t,onBackgroundClick:n,onEscapeKeydown:n,children:[r,(0,oi.jsxs)("div",{children:[(0,oi.jsx)("button",{disabled:s,onClick:function(){n(),a()},children:i}),(0,oi.jsx)("button",{onClick:function(){o(),n()},children:"Close"})]})]})}function EB(e){var t=e.imageFunction,n=e.fileFunction,i=e.callback,a=(0,r.useState)(null),o=(0,u.Z)(a,2),s=(o[0],o[1]);return(0,oi.jsx)(oi.Fragment,{children:(0,oi.jsx)("input",{className:"custom-file-input",type:"file",accept:".jpg,.jpeg,.png",onChange:function(e){var r=e.target.files[0],a=new FileReader;a.onload=function(){var e=a.result;n(r),t(e),s(e)},r&&a.readAsDataURL(r),i()}})})}var CB=function(e){var t=e.userProfile,n=e.setContent,i=(0,r.useContext)(ci),a=i.myProfile,c=i.updateProfile,l=(0,r.useContext)(li),f=l.myFriends,d=l.updateFriends,p=(0,r.useContext)(fi),v=p.myFriendRequests,y=p.updateFriendRequests,m=(0,r.useContext)(hi),g=m.mySentRequests,k=m.updateSentFriendRequests,b=(0,r.useState)(),_=(0,u.Z)(b,2),w=_[0],x=_[1],S=(0,r.useState)(),E=(0,u.Z)(S,2),C=E[0],I=E[1],T=(0,r.useState)(!1),N=(0,u.Z)(T,2),A=N[0],D=N[1],O=(0,r.useState)((null===t||void 0===t?void 0:t.ProfileImage)||"".concat(pi,"/noProfile.jpg")),R=(0,u.Z)(O,2),P=R[0],j=R[1];function L(){return(L=(0,s.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.Id&&a&&a.Id)){e.next=5;break}return e.next=3,bi({userId:a.Id,friendId:t.Id},"check-if-in-friends");case 3:n=e.sent,x(n.relation);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){D(!A)}function F(){return F=(0,s.Z)((0,o.Z)().mark((function e(){var t,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=7;break}return n=_R.child("/profileImages/".concat(null===C||void 0===C?void 0:C.name,"+").concat(zi())),e.next=4,n.put(C);case 4:return e.next=6,n.getDownloadURL();case 6:t=e.sent;case 7:j(t),wi({userId:a.Id,fileUrl:t},"change-profile-image"),localStorage.setItem("profileImage",t),c({Id:a.Id,Email:a.Email,ProfileImage:t});case 11:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function U(){return(U=(0,s.Z)((0,o.Z)().mark((function e(){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({userId:a.Id,friendId:t.Id},"accept-friend-request");case 2:n=e.sent,r=v.filter((function(e){return e.Id!=t.Id})),y(r),(i=h(f)).push(n),d(i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return B=(0,s.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x("inFriendRequests"),e.next=3,bi({userId:a.Id,friendId:t.Id},"send-friend-request");case 3:n=e.sent,k((function(e){return[n].concat(h(e))}));case 5:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function V(){return V=(0,s.Z)((0,o.Z)().mark((function e(){var n,r,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x("stranger"),e.next=3,bi({userId:a.Id,friendId:t.Id},"cancel-friend-request/user");case 3:n=e.sent,r=n.Id,i=g.filter((function(e){return e.Id!=r})),k(i);case 7:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}return(0,r.useEffect)((function(){t&&j((null===t||void 0===t?void 0:t.ProfileImage)||"".concat(pi,"/noProfile.jpg"))}),[t]),(0,r.useEffect)((function(){!function(){L.apply(this,arguments)}()}),[a,t]),(0,oi.jsxs)("div",{className:"profile-up",children:[(0,oi.jsx)(SB,{isOpen:A,toggleModal:M,children:(0,oi.jsx)("span",{style:{padding:"0.4rem",color:"green",textAlign:"center"},children:"Do you want to set this image?"}),submitButtonText:"Submit",onSubmit:function(){return F.apply(this,arguments)},onClose:function(){return j(localStorage.getItem("profileImage"))}}),(0,oi.jsx)("div",{className:"profile-up-image",style:{backgroundImage:"url(".concat(P,")")},children:"me"==w&&(0,oi.jsx)("span",{className:"profile-up-image-input",children:(0,oi.jsx)(EB,{imageFunction:j,fileFunction:I,callback:M})})}),(0,oi.jsxs)("span",{className:"profile-up-options",children:[(0,oi.jsxs)("span",{className:"profile-up-options-up",children:[(0,oi.jsx)("img",{src:P||"".concat(pi,"/noProfile.jpg"),alt:""}),(0,oi.jsx)("h4",{children:t.Email})]}),(0,oi.jsxs)("span",{className:"profile-up-options-down",children:[(0,oi.jsx)("button",{className:"large-font",onClick:function(){return n("posts")},children:"Posts"}),(0,oi.jsx)("button",{className:"large-font",onClick:function(){return n("friends")},children:"Friends"}),"stranger"==w&&(0,oi.jsx)("button",{className:"large-font",onClick:function(){return B.apply(this,arguments)},children:"Add friend"}),"inFriendRequests"==w&&(0,oi.jsx)("button",{className:"large-font",style:{backgroundColor:"var(--testColor3)"},onClick:function(){return V.apply(this,arguments)},children:"Cancel request"}),"pendingRequest"==w&&(0,oi.jsx)("button",{className:"large-font",style:{backgroundColor:"var(--testColor3)"},onClick:function(){return U.apply(this,arguments)},children:"Accept request"})]})]})]})},IB=function(e){var t=e.userProfile,n=e.content,i=(0,r.useState)([]),a=(0,u.Z)(i,2),c=a[0],l=a[1],f=(0,r.useState)([]),h=(0,u.Z)(f,2),d=h[0],p=h[1],v=(0,r.useState)(!1),y=(0,u.Z)(v,2),m=y[0],g=y[1],k=10,b=(0,r.useRef)(null);(0,r.useEffect)((function(){if(t){var e=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(null===t||void 0===t?void 0:t.Email),e.t0=l,e.next=4,bi({userId:null===t||void 0===t?void 0:t.Id},"get-friends");case 4:e.t1=e.sent,(0,e.t0)(e.t1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[t]);var _=FR(b,"1000px");function w(e){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)((0,o.Z)().mark((function e(t){var n,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length+k,e.next=3,bi({name:t,numberOfPosts:n},"get-user-posts");case 3:(r=e.sent)&&(r.length==d.length?g(!0):p(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.useEffect)((function(){_&&w(t.Email)}),[_]),(0,oi.jsxs)("div",{className:"profile-down",children:["posts"==n&&(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("h2",{children:"Posts"}),(0,oi.jsx)(_P,{posts:d,setPosts:p}),(0,oi.jsx)("span",{ref:b}),m&&(0,oi.jsx)("h2",{children:"You have reached end of internet."})]}),"friends"==n&&(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("h2",{children:"Friends"}),(0,oi.jsx)(wB,{friends:c})]})]})};var TB=new RTCPeerConnection({});var NB=[{path:"/login",component:sB},{path:"/register",component:function(){var e=(0,r.useState)([]),t=(0,u.Z)(e,2),n=(t[0],t[1]),i=(0,r.useContext)(mi).update,a=xe();function c(e){return l.apply(this,arguments)}function l(){return(l=(0,s.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n([]),e.next=4,oB(t,"register");case 4:Oi((r=e.sent).token),i(Ri()),KR(r.user.id,r.user.email,r.user.profileImage),r&&(a("/"),a(0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),n(["The name is already taken"]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return(0,oi.jsx)("div",{className:"notLogged",children:(0,oi.jsxs)("div",{className:"auth-container",children:[(0,oi.jsx)("h1",{className:"auth-title",children:"Register"}),(0,oi.jsx)(iB,{model:{email:"",password:""},onSubmit:function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitButtonName:"Register"})]})})}},{path:"/user-profile/:id",component:function(){var e=Ee().id,t=(0,r.useState)(),n=(0,u.Z)(t,2),i=n[0],a=n[1],c=(0,r.useState)("posts"),l=(0,u.Z)(c,2),f=l[0],h=l[1];return(0,r.useEffect)((function(){var t=function(){var t=(0,s.Z)((0,o.Z)().mark((function t(){var n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bi({name:e},"get-user");case 2:n=t.sent,a(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]),(0,oi.jsx)(oi.Fragment,{children:i?(0,oi.jsxs)("div",{className:"profile",children:[(0,oi.jsx)(CB,{userProfile:i,setContent:h}),(0,oi.jsx)(IB,{content:f,userProfile:i})]}):(0,oi.jsx)(aP,{message:"Loading..."})})}},{path:"/user-friends/:id",component:function(){var e=(0,r.useContext)(li).myFriends;return(0,oi.jsxs)("div",{className:"friends",children:[(0,oi.jsx)("h2",{children:"Your friends"}),(0,oi.jsx)("span",{className:"friends-container",children:(0,oi.jsx)(bB,{friends:e})})]})}},{path:"/user-friend-requests/:id",component:function(){var e=(0,r.useContext)(fi).myFriendRequests;return(0,oi.jsxs)("div",{className:"friendRequests",children:[(0,oi.jsx)("h2",{children:"Your incoming requests"}),(0,oi.jsx)(gB,{friends:e,sent:!1})]})}},{path:"/user-sent-friend-requests/:id",component:function(){var e=(0,r.useContext)(hi).mySentRequests;return(0,oi.jsxs)("div",{className:"friendRequests",children:[(0,oi.jsx)("h2",{children:"Your Sent Requests"}),(0,oi.jsx)(gB,{friends:e,sent:!0})]})}},{path:"/call/:who/:userId/:friendId/:roomId",component:function(){var e=Ee(),t=e.who,n=e.userId,i=e.friendId,a=e.roomId,c={audio:!0,video:!0},l=(0,r.useRef)(null),f=(0,r.useRef)(null),h=(0,r.useState)(""),d=(0,u.Z)(h,2),p=d[0],v=d[1],y=(0,r.useState)(!0),m=(0,u.Z)(y,2),g=m[0],k=m[1],b=(0,r.useState)(!0),_=(0,u.Z)(b,2),w=_[0],x=_[1],S=(0,r.useState)("on"),E=(0,u.Z)(S,2),C=E[0],I=E[1],T=(0,r.useState)("on"),A=(0,u.Z)(T,2),D=A[0],O=A[1],R=(0,r.useState)(!1),P=(0,u.Z)(R,2),j=P[0],L=P[1];function M(){return M=(0,s.Z)((0,o.Z)().mark((function e(){var n,r,i,a,u,h;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l.current||!f.current){e.next=19;break}return e.next=4,navigator.mediaDevices.getUserMedia(c);case 4:n=e.sent,r=N(n.getTracks());try{for(r.s();!(i=r.n()).done;)a=i.value,TB.addTrack(a,n)}catch(UB){r.e(UB)}finally{r.f()}l.current.srcObject=n,TB.ontrack=function(e){var t=e.track,n=e.streams;t.onunmute=function(){f.current.srcObject||(f.current.srcObject=n[0])}},u=!1,"caller"==t&&(TB.onnegotiationneeded=(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{u=!0,setTimeout((0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TB.setLocalDescription();case 2:console.log("sending offer"),OB.send({type:"video-offer",description:TB.localDescription,target:p});case 4:case"end":return e.stop()}}),e)}))),1e3)}catch(UB){console.error(UB)}finally{u=!1}case 1:case"end":return e.stop()}}),e)})))),TB.onconnectionstatechange=function(e){"disconnected"===TB.connectionState&&L(!0)},TB.oniceconnectionstatechange=function(){"failed"===TB.iceConnectionState&&TB.restartIce()},TB.onicecandidate=function(e){var t=e.candidate;setTimeout((function(){OB.send({type:"iceCandidate",candidate:t,target:p})}),1e3)},h=!1,console.log(Date.now()),OB.on("message",function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.description){e.next=15;break}if(n="offer"===t.description.type&&(u||"stable"!==TB.signalingState),!(h=n)){e.next=6;break}return e.abrupt("return");case 6:return console.log("remote description"),e.next=9,TB.setRemoteDescription(t.description);case 9:if("offer"!==t.description.type){e.next=13;break}return e.next=12,TB.setLocalDescription();case 12:OB.send({type:"video-answer",description:TB.localDescription,target:p});case 13:e.next=31;break;case 15:if(!t.answer){e.next=21;break}return e.next=18,TB.setRemoteDescription(t.answer);case 18:console.log(t.answer),e.next=31;break;case 21:if(!t.candidate||!TB.remoteDescription){e.next=31;break}return e.prev=22,e.next=25,TB.addIceCandidate(t.candidate);case 25:e.next=31;break;case 27:if(e.prev=27,e.t0=e.catch(22),h){e.next=31;break}throw e.t0;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(0),console.error(e.t1);case 36:case"end":return e.stop()}}),e,null,[[0,33],[22,27]])})));return function(t){return e.apply(this,arguments)}}()),e.next=20;break;case 19:throw new Error("selfVideo.current is null");case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])}))),M.apply(this,arguments)}return(0,r.useEffect)((function(){a&&v("".concat(a))}),[a]),(0,r.useEffect)((function(){n&&i&&t&&p&&(OB.emit("join-call",{who:t,myId:n,friendId:i,roomId:a}),OB.on("start-peering",(function(){!function(){M.apply(this,arguments)}()})))}),[t,n,i,p]),(0,oi.jsx)(ER,{children:(0,oi.jsxs)("div",{className:"call",children:[j?(0,oi.jsx)("div",{className:"flex-column-center full-container",style:{color:"white"},children:(0,oi.jsx)("h1",{children:"User left call"})}):(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("video",{id:"video",className:"video",muted:!0,autoPlay:!0,ref:l}),(0,oi.jsx)("video",{id:"friendVideo",className:"friendVideo",ref:f,autoPlay:!0})]}),(0,oi.jsxs)("div",{className:"call-options",children:[l.current&&(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("img",{className:"call-options-option",src:"".concat(pi,"/micro-").concat(C,".png"),onClick:function(){return function(e,t){e.getSenders().forEach((function(e){var n=e.track;"audio"==(null===n||void 0===n?void 0:n.kind)&&(n.enabled=!t)})),k(!t),I(t?"off":"on")}(TB,g)},alt:""}),(0,oi.jsx)("img",{className:"call-options-option",src:"".concat(pi,"/camera-").concat(D,".png"),onClick:function(){return function(e,t){e.getSenders().forEach((function(e){var n=e.track;"video"==(null===n||void 0===n?void 0:n.kind)&&(n.enabled=!t)})),x(!t),O(t?"off":"on")}(TB,w)},alt:""}),(0,oi.jsx)("img",{className:"call-options-option",src:"".concat(pi,"/friends.png"),onClick:function(){return function(e){e.getReceivers().forEach((function(e){e.track.enabled=!e.track.enabled}))}(TB)},alt:""})]}),(0,oi.jsx)("img",{src:"".concat(pi,"/leave-call.png"),className:"call-options-option",onClick:function(){window.close()},alt:""})]})]})})}},{path:"/messaging-only/:id",component:function(){var e=(0,r.useContext)(li).myFriends,t=(0,r.useState)(),n=(0,u.Z)(t,2),i=n[0],a=n[1],o=(0,r.useState)(window.innerWidth),s=(0,u.Z)(o,2),c=s[0],l=s[1],f=(0,r.useContext)(ci).myProfile,h=c<600;return(0,r.useEffect)((function(){e&&(h||a(e[0]))}),[e,h]),(0,r.useEffect)((function(){window.addEventListener("resize",(function(){l(window.innerWidth)}))}),[]),(0,r.useEffect)((function(){l(window.innerWidth)}),[window.innerWidth]),(0,oi.jsx)(ER,{children:(0,oi.jsx)("div",{id:"messager",children:h?(0,oi.jsx)(yB,{setChoosenFriend:a,choosenFriend:i}):(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("nav",{className:"messager-nav",children:(0,oi.jsxs)("span",{children:[(0,oi.jsx)("img",{src:"".concat(pi,"/messaging-only.png"),alt:""}),(0,oi.jsx)("img",{src:f.ProfileImage,alt:""})]})}),(0,oi.jsx)("span",{id:"go-to-app",children:(0,oi.jsx)(yi,{appName:"FriendLink"})}),(0,oi.jsxs)("article",{className:"messager-content",children:[(0,oi.jsxs)("section",{className:"messager-friends",children:[(0,oi.jsx)("h2",{children:"Chats"}),(0,oi.jsx)(Ti,{setChoosenFriend:a}),(0,oi.jsx)(dB,{friends:e,setChoosenFriend:a})]}),i&&(0,oi.jsx)(fB,{friend:i,fullScreen:!1,setChoosenFriend:a})]})]})})})}},{path:"/",component:lB},{path:"*",component:lB}],AB=[],DB=NB,OB=hn("https://cacarrot-server.herokuapp.com/");var RB=function(){var e=(0,r.useState)([]),t=(0,u.Z)(e,2),n=t[0],i=t[1],a=(0,r.useState)(),c=(0,u.Z)(a,2),l=c[0],f=c[1],h=(0,r.useState)(),d=(0,u.Z)(h,2),p=d[0],v=d[1],y=(0,r.useState)(),m=(0,u.Z)(y,2),g=m[0],k=m[1],b=(0,r.useState)(),_=(0,u.Z)(b,2),w=_[0],x=_[1],S=(0,r.useState)([]),E=(0,u.Z)(S,2),C=E[0],I=E[1],T=(0,r.useState)((0,oi.jsx)(oi.Fragment,{})),N=(0,u.Z)(T,2),A=N[0],D=N[1],O=(0,r.useState)(!1),R=(0,u.Z)(O,2),P=R[0],j=R[1],L=(0,r.useState)(!1),M=(0,u.Z)(L,2),F=M[0],U=M[1];function B(){return(B=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({userId:l.Id},"get-friends");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:v(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({userId:l.Id},"get-friend-requests");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:k(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=(0,s.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({userId:l.Id},"get-sent-friend-requests");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:x(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.useEffect)((function(){f(GR()),i(Ri())}),[]),(0,r.useEffect)((function(){f(GR()),i(Ri()),U(!0),j(navigator.onLine)}),[localStorage]),(0,r.useEffect)((function(){l&&l.Id&&(OB.on("calling/".concat(l.Id),function(){var e=(0,s.Z)((0,o.Z)().mark((function e(t){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bi({name:t.userId},"get-user");case 2:n=e.sent,D((0,oi.jsx)(HR,{onSubmit:function(){return xR(l,n,t.roomId,"receiver")},friend:n,setCall:D,onClose:function(){OB.emit("leave-call",{friendId:n.Id})}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p||g||w||(function(){B.apply(this,arguments)}(),function(){V.apply(this,arguments)}(),function(){z.apply(this,arguments)}()))}),[l]),(0,oi.jsx)(mi.Provider,{value:{claims:n,update:i},children:(0,oi.jsx)(ci.Provider,{value:{myProfile:l,updateProfile:f},children:(0,oi.jsx)(li.Provider,{value:{myFriends:p,updateFriends:v},children:(0,oi.jsx)(fi.Provider,{value:{myFriendRequests:g,updateFriendRequests:k},children:(0,oi.jsx)(hi.Provider,{value:{mySentRequests:w,updateSentFriendRequests:x},children:(0,oi.jsx)(di.Provider,{value:{openedChats:C,updateOpenedChats:I},children:(0,oi.jsx)(ni,{children:(0,oi.jsx)("div",{className:"App",children:P?(0,oi.jsxs)(oi.Fragment,{children:[(0,oi.jsx)("div",{className:"navbar-placeholder"}),(0,oi.jsx)(Ui,{}),(0,oi.jsx)(gi,{isAuthorized:(0,oi.jsx)(vi,{})}),(0,oi.jsx)(ZR,{openedChats:C}),A,(0,oi.jsx)("section",{className:"landing-page",children:(0,oi.jsxs)(ze,{children:[DB.map((function(e){return(0,oi.jsx)(Be,{path:e.path,Component:e.component},e.path)})),F&&AB.map((function(e){return(0,oi.jsx)(Be,{element:(0,oi.jsx)(si,{isAuthenticated:n.length>0}),children:(0,oi.jsx)(Be,{Component:e.component,path:e.path})},e.path)}))]})})]}):(0,oi.jsx)(ui,{})})})})})})})})})},PB=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};var jB="startTransition";function LB(e){var t,n=e.basename,a=e.children,o=e.window,s=r.useRef();null==s.current&&(s.current=(void 0===(t={window:o,v5Compat:!0})&&(t={}),U((function(e,t){var n=F(e.location.hash.substr(1)),r=n.pathname,i=void 0===r?"/":r,a=n.search,o=void 0===a?"":a,s=n.hash;return L("",{pathname:i,search:o,hash:void 0===s?"":s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){var n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){var i=e.location.href,a=i.indexOf("#");r=-1===a?i:i.slice(0,a)}return r+"#"+("string"===typeof t?t:M(t))}),(function(e,t){P("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),t)));var c=s.current,l=r.useState({action:c.action,location:c.location}),f=(0,u.Z)(l,2),h=f[0],d=f[1],p=r.useCallback((function(e){jB in i?i[jB]((function(){return d(e)})):d(e)}),[d]);return r.useLayoutEffect((function(){return c.listen(p)}),[c,p]),r.createElement(Ve,{basename:n,children:a,location:h.location,navigationType:h.action,navigator:c})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var MB,FB;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(MB||(MB={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(FB||(FB={}));a.createRoot(document.getElementById("root")).render((0,oi.jsx)(LB,{children:(0,oi.jsx)(RB,{})})),PB()}()}();
//# sourceMappingURL=main.77fcd94a.js.map